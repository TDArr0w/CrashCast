import React from 'react';
import '../styles/LandingCarousel.css';
import LandingAmbulance from './LandingAmbulance';

// This is a placeholder for your "Stats Carousel"
// Replace this with your actual component
const StatsCarouselPlaceholder = () => (
  <div style={{
    position: 'absolute',
    top: '50%',
    left: '50%',
    transform: 'translate(-50%, -50%)',
    zIndex: 1, // <-- 1. At the bottom of the stack
    background: 'rgba(255, 255, 255, 0.05)',
    border: '1px solid rgba(255, 255, 255, 0.1)',
    padding: '20px',
    borderRadius: '15px',
    textAlign: 'center',
    color: 'var(--text-color, #000)' // Uses theme color
  }}>
    <h3>City-Wide Stats</h3>
    <p>Incidents: 14</p>
    <p>Available Units: 8</p>
  </div>
);


const LandingCarousel = ({
  size = 3500,
  rotationSpeed = 35,
  roadThickness = 160,
  stripeWidth = 14,
  dashLengthDeg = 10,
  gapLengthDeg = 16,
  arcHeight = 305,
  arcOffset = 2.8,
}) => {
  return (
    <div className="landing-carousel-container" style={{ height: `${arcHeight}px`, position: "relative" }}>
      
      {/* 1. STATS COMPONENT (z-index: 1) */}
      {/* This component will be BEHIND the road */}
      <StatsCarouselPlaceholder />

      {/* 2. SVG ROAD (z-index: 2) */}
      <svg
        viewBox="0 6 100 30"
        preserveAspectRatio="xMidYMid meet"
        style={{
          width: "100%",
          height: "100%",
          transform: "scale(2)",
          overflow: "visible", 
          transformOrigin: "top",
          position: "relative", // <-- ADD: Make it a stacking context
          zIndex: 2, // <-- CHANGE: Set to 2 (above stats, below ambulance)
        }}
      >
        <circle cx="50" cy="50" r="40" stroke="#222" strokeWidth="10" fill="none" />
        <circle cx="50" cy="50" r="40" stroke="white" strokeDasharray="5 4" strokeWidth="1" fill="none">
          <animateTransform
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 50 50"
            to="360 50 50"
            dur={`${rotationSpeed}s`}
            repeatCount="indefinite"
          />
        </circle>
      </svg>
      
      {/* 3. AMBULANCE (z-index: 3) */}
      {/* This component's z-index is set in LandingAmbulance.jsx */}
      <LandingAmbulance />
    </div>
  );
};

export default LandingCarousel;