/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as e}from"tslib";import r from"../../../core/Accessor.js";import{createTask as o}from"../../../core/asyncUtils.js";import t from"../../../core/Collection.js";import{throwIfAborted as s}from"../../../core/promiseUtils.js";import{watch as i,syncAndInitial as c}from"../../../core/reactiveUtils.js";import{property as n}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as p}from"../../../core/accessorSupport/decorators/subclass.js";import{updateDirectionalNodesGeneric as a}from"./imageNavigationUtils.js";let m=class extends r{constructor(e){super(e),this._compileTask=null,this.currentNode=null,this.currentBestFeature=null,this.nodes=new t}initialize(){this.addHandles(i(()=>({nodes:this.nodes,currenNode:this.currentNode,length:this.nodes.length,currentHeading:this.currentNode?.currentHeading,currentPitch:this.currentNode?.currentPitch}),()=>{this._compileTask?.abort(),this._compileTask=o(async e=>{s(e),this.compile()})},c))}get state(){const e=this._compileTask;return e?e.finished?e.error?"error":"compiled":"compiling":"ready"}compile(){const{currentNode:e,nodes:r}=this;e&&r.length&&(e.reset(),a(e,r))}};e([n()],m.prototype,"_compileTask",void 0),e([n()],m.prototype,"currentNode",void 0),e([n()],m.prototype,"currentBestFeature",void 0),e([n()],m.prototype,"nodes",void 0),e([n()],m.prototype,"state",null),m=e([p("esri.widgets.OrientedImageryViewer.components.NavigationUIPanoramicViewModel")],m);const l=m;export{l as default};
