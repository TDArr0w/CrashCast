/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as e}from"tslib";import t from"../../../../core/Accessor.js";import o from"../../../../core/Collection.js";import{property as s}from"../../../../core/accessorSupport/decorators/property.js";import"../../../../core/has.js";import"../../../../core/Logger.js";import"../../../../core/RandomLCG.js";import{subclass as r}from"../../../../core/accessorSupport/decorators/subclass.js";let i=class extends t{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new o,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver(()=>{this._measure()})}get _sortedElements(){return[...this.managedElements].sort((e,t)=>t.priority-e.priority)}connect(e){this._resizeObserver.disconnect(),this.measuredElement=e,this._resizeObserver.observe(e),this._measure()}allocate(){const e=new Map,{availableLength:t,_sortedElements:o}=this;let s=0;for(const r of o){const t=r.lengthOptions[0];e.set(r,t),s+=t}for(const r of o)for(;s<t;){const o=e.get(r);if(!o)break;const i=r.lengthOptions.find(e=>e>o);if(!i)break;const n=s-o+i;if(n>t)break;e.set(r,i),s=n}for(const[r,i]of e)r.budgetedLength=i}_measure(){const e=this.measuredElement;this.availableLength=e?"horizontal"===this.layout?e.clientWidth??0:e.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};e([s()],i.prototype,"measuredElement",void 0),e([s()],i.prototype,"managedElements",void 0),e([s()],i.prototype,"_sortedElements",null),e([s()],i.prototype,"availableLength",void 0),e([s()],i.prototype,"layout",void 0),i=e([r("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],i);export{i as default};
