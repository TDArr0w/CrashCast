/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as o}from"tslib";import{deprecateWidget as e}from"../core/deprecate.js";import t from"../core/Logger.js";import{property as i}from"../core/accessorSupport/decorators/property.js";import"../core/has.js";import"../core/RandomLCG.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import s from"./Widget.js";import{loadCalciteComponents as a}from"./support/componentsUtils.js";import{globalCss as n}from"./support/globalCss.js";import"./support/widgetUtils.js";import{messageBundle as l}from"./support/decorators/messageBundle.js";import{vmEvent as c}from"./support/decorators/vmEvent.js";import{tsx as p}from"./support/jsxFactory.js";import"@arcgis/toolkit/dom";import d from"./Track/TrackViewModel.js";const g={base:"esri-track"};let m=class extends s{constructor(o,i){super(o,i),this.messages=null,this.viewModel=new d,this._toggleTracking=()=>{const o=this.viewModel;o&&"feature-unsupported"!==o.state&&"disabled"!==o.state&&("tracking"!==o.state&&"waiting"!==o.state?this.viewModel.start():this.viewModel.stop())},e(t.getLogger(this),"Track","arcgis-track",{version:"4.32"})}loadDependencies(){return a({button:()=>import("@esri/calcite-components/dist/components/calcite-button"),tooltip:()=>import("@esri/calcite-components/dist/components/calcite-tooltip")})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(o){this.viewModel.geolocationOptions=o}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(o){this.viewModel.goToLocationEnabled=o}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(o){this.viewModel.goToOverride=o}get graphic(){return this.viewModel.graphic}set graphic(o){this.viewModel.graphic=o}get icon(){return"compass-north-circle"}set icon(o){this._overrideIfSome("icon",o)}get label(){return this.messages?.widgetLabel??""}set label(o){this._overrideIfSome("label",o)}get rotationEnabled(){return this.viewModel.rotationEnabled}set rotationEnabled(o){this.viewModel.rotationEnabled=o}get scale(){return this.viewModel.scale}set scale(o){this.viewModel.scale=o}get tracking(){return this.viewModel.tracking}get view(){return this.viewModel.view}set view(o){this.viewModel.view=o}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){const{viewModel:o,messages:e,icon:t}=this,i=o?.state,r="tracking"===i,s=this._localizeError(this.viewModel?.error),a=(r?e?.stopTracking:e?.startTracking)??"",l="feature-unsupported"===i,c=("tracking"===i?"pause":void 0)??t;return p("div",{class:this.classes(g.base,n.widget)},!l&&p("calcite-button",{class:n.widgetButton,disabled:"disabled"===i,iconStart:c,kind:"neutral",label:a,loading:"waiting"===i,onclick:this._toggleTracking,title:a}),s?p("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},s):null)}_localizeError(o){return o instanceof GeolocationPositionError?o.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:o.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable:o instanceof Error?o.message:void 0}};o([i()],m.prototype,"geolocationOptions",null),o([i()],m.prototype,"goToLocationEnabled",null),o([i()],m.prototype,"goToOverride",null),o([i()],m.prototype,"graphic",null),o([i()],m.prototype,"icon",null),o([i()],m.prototype,"label",null),o([i(),l("esri/widgets/Track/t9n/Track")],m.prototype,"messages",void 0),o([i()],m.prototype,"rotationEnabled",null),o([i()],m.prototype,"scale",null),o([i({readOnly:!0})],m.prototype,"tracking",null),o([i()],m.prototype,"view",null),o([i({type:d}),c(["track","track-error"])],m.prototype,"viewModel",void 0),m=o([r("esri.widgets.Track")],m);const u=m;export{u as default};
