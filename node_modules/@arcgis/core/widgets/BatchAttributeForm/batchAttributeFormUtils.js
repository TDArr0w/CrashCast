/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import"../../intl.js";import{neverReached as e}from"../../core/compilerUtils.js";import{ReactiveGraphic as i}from"./ReactiveGraphic.js";import{getIntlOptionsForField as t}from"../support/dateUtils.js";import{getRangeErrorMessage as n,shouldUseScientificNotation as r,scientificNumberFormatOptions as o,numberFormatOptions as a}from"../support/forms/formUtils.js";import{substitute as l}from"../../intl/substitute.js";const s=(e,i)=>null!=e&&e.input?.type===i;function d(e){return new i({source:e})}function u(e,i,s,d){const{dataType:u,minLength:p}=e,c=s?.validationErrors;if(!c||!i)return null;if("batch-attribute-form-validation::features-have-different-errors"===i)return c.invalidBatchFormType;if("input-validation-error::cannot-be-empty"===i)return c.cannotBeNull;if("domain-validation-error::value-out-of-range"===i||"numeric-range-validation-error::out-of-range"===i){const{field:i,range:s}=e,p={type:"date",intlOptions:{timeZone:"date"===i.type&&d?d:void 0,...t(i)}},f=n(s,c);return l(f,s,{format:{max:"date"===u?p:null!=s.max&&r(s.max)?o:a,min:"date"===u?p:null!=s.min&&r(s.min)?o:a}})}return"domain-validation-error::invalid-coded-value"===i?c.invalidCodedValue:"type-validation-error::invalid-type"===i?c.invalidType:"length-validation-error::too-short"===i?l(c.tooShort,{min:p}):null}function p(i,t,n){const r=n?.validationErrors;if(!r)return null;let o=null;for(const a of i.invalidHiddenInputs)switch(a.effectiveVisibilityCode){case"hidden:visibility-expression:all-features":case"hidden:group-visibility-expression:all-features":case"hidden:field-definition":return"single"===t?r.nonVisibleError_changeValues:r.nonVisibleError_checkIndividualFeatures;case"hidden:no-domain-in-common":case"hidden:visibility-expression:some-features":case"hidden:group-visibility-expression:some-features":case"hidden:not-in-all-layers":o=r.nonVisibleError_checkIndividualFeatures;break;case"visible":continue;default:e(a.effectiveVisibilityCode)}return o}function c(e){return null!=e&&"object"==typeof e&&"type"in e&&("feature"===e.type||"geojson"===e.type||"knowledge-graph-sublayer"===e.type||"oriented-imagery"===e.type||"scene"===e.type||"subtype-sublayer"===e.type)}export{d as createReactiveGraphic,p as getHiddenFieldsValidationErrorMessage,u as getVisibleFieldInputValidationErrorMessage,c as isAttributeFormSupportedLayerUnion,s as isElementTemplateWithInputType};
