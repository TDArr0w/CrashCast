/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{pt2px as e}from"../../../../core/screenUtils.js";import{isWidthAndHeight as i}from"./utils.js";import{attachToNode as t}from"../../support/styleUtils.js";import"../../../support/widgetUtils.js";import{tsx as s}from"../../../support/jsxFactory.js";import"@arcgis/toolkit/dom";const o="#ddd",n=window.devicePixelRatio,a="esri-spike-ramp",r={spikeRampContainer:`${a}__container`,spikeRampPreviewContainer:`${a}__preview-container`,spikeRampPreview:`${a}__preview`,spikeRampSymbolPreview:`${a}__symbol-preview`,spikeRampLines:`${a}__lines`,spikeRampLabelsContainer:`${a}__labels-container`,spikeRampLabel:`${a}__label`};function p(e){return 5!==e.infos.length?null:s("div",{class:r.spikeRampContainer},s("div",{class:r.spikeRampPreviewContainer},l(e),m(e)),d(e))}function l(e){const[i,o,n]=h(e).map(({preview:e})=>{if(!e)return null;const i=e.cloneNode(!0);return i.classList.add(r.spikeRampSymbolPreview),i});return i&&o&&n?s("div",{class:r.spikeRampPreview},s("div",{afterCreate:t,bind:n}),s("div",{afterCreate:t,bind:o}),s("div",{afterCreate:t,bind:i})):null}function m(a){const[{width:p,height:l},{width:m},{width:d,height:c}]=h(a).map(({size:t})=>i(t)?{width:e(t.width),height:e(t.height)}:{width:0,height:0}),v=10,b=8,u=p+m+d+3*v,w=l,k=document.createElement("canvas");k.width=(u+v)*n,k.height=w*n,k.style.width=k.width/n+"px",k.style.height=k.height/n+"px";const f=k.getContext("2d");f.beginPath();const g=u-(p/2+v),R=0,_=u+b,y=0;f.moveTo(g*n,R*n),f.lineTo(_*n,y*n);const C=(u-b)/2,L=(l-c)/2,x=u+b,P=(l-c)/2;f.moveTo(C*n,L*n),f.lineTo(x*n,P*n);const $=d/2,j=w-c,T=u+b,S=w-c;return f.moveTo($*n,j*n),f.lineTo(T*n,S*n),f.strokeStyle=o,f.lineWidth=.5*n,f.stroke(),s("div",{afterCreate:t,bind:k,class:r.spikeRampLines})}function d(t){const[{label:o,height:n},{label:a},{label:p,height:l}]=h(t).map(({label:t,size:s})=>({label:t,height:i(s)?e(s.height):0})),m=n-l,d={position:"absolute",top:"0"},c={position:"absolute",top:m/2+"px"},v={position:"absolute",top:`${m}px`};return s("div",{class:r.spikeRampLabelsContainer},s("div",{class:r.spikeRampLabel,styles:d},o),s("div",{class:r.spikeRampLabel,styles:c},a),s("div",{class:r.spikeRampLabel,styles:v},p))}function h(e){return e.infos.filter((e,i)=>i%2==0)}export{p as renderSpikeRamp};
