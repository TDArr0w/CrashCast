/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import e from"./Dictionary.js";import{ArcadeExecutionError as a}from"./executionError.js";import t from"./ImmutablePathArray.js";import n from"./ImmutablePointArray.js";import{L as r,j as s,r as i,h as c}from"../chunks/languageUtils.js";import l from"../core/Accessor.js";import{isArray as o,isString as u,isNumber as h}from"../support/guards.js";const p={point:["hasZ","hasM","spatialReference","type","x","y","z","m"],multipoint:["hasZ","hasM","spatialReference","type","points"],polyline:["hasZ","hasM","spatialReference","type","paths"],polygon:["hasZ","hasM","spatialReference","type","rings"],extent:["hasZ","hasM","spatialReference","type","xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]};function f(e){return p[e.type]}let m=0;function d(r,s,i,c,o=1){let u;switch(s=s.toLowerCase()){case"hasz":{const e=r.hasZ;return void 0!==e&&e}case"hasm":{const e=r.hasM;return void 0!==e&&e}case"spatialreference":{let a=r.spatialReference._arcadeCacheId;if(void 0===a){let e=!0;l.isFrozen(r.spatialReference)&&(e=!1),e&&(m++,r.spatialReference._arcadeCacheId=m,a=m)}const t=new e({__proto__:null,wkt:r.spatialReference.wkt,wkid:r.spatialReference.wkid});return void 0!==a&&(t._arcadeCacheId="SPREF"+a.toString()),t}}switch(r.type){case"extent":switch(s){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const e=r[s];return void 0!==e?e:null}case"type":return"Extent"}break;case"polygon":switch(s){case"rings":u=r.cache._arcadeCacheId,void 0===u&&(m++,u=m,r.cache._arcadeCacheId=u);return new t(r.rings,r.spatialReference,!0===r.hasZ,!0===r.hasM,u);case"type":return"Polygon"}break;case"point":switch(s){case"x":case"y":case"z":case"m":return r[s]??null;case"type":return"Point"}break;case"polyline":switch(s){case"paths":u=r.cache._arcadeCacheId,void 0===u&&(m++,u=m,r.cache._arcadeCacheId=u);return new t(r.paths,r.spatialReference,!0===r.hasZ,!0===r.hasM,u);case"type":return"Polyline"}break;case"multipoint":switch(s){case"points":u=r.cache._arcadeCacheId,void 0===u&&(m++,u=m,r.cache._arcadeCacheId=u);return new n(r.points,r.spatialReference,!0===r.hasZ,!0===r.hasM,u,1);case"type":return"Multipoint"}}if(1===o)throw new a(i,"InvalidIdentifier",c);return 2===o?{keystate:"notfound"}:null}function y(e,a){let t,n=e;if(null==n)return null;if(o(a))t=a;else if(s(a))t=a.toArray();else{if(null==a)return null;t=[a]}for(const r of t){if(i(n)){if(!1===u(r))return null;if(!n.hasField(r))return null;n=n.field(r)}else if(c(n)){if(!1===u(r))return null;n=d(n,r,null,null,0)}else if(o(n)){if(!1===h(r))return null;n=r>=0?n[r]:n[n.length+r]}else{if(!s(n))return null;if(!1===h(r))return null;n=r>=0?n.get(r):n.get(n.length()+r)}if(null==n)return null}return n}function x(e){return!!r(e)||(o(e)?0===e.length:s(e)?0===e.length():!!i(e)&&e.isEmpty())}export{d as geometryMember,f as getGeometryKeys,y as getNestedOptionalValue,x as isEmpty};
