/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__addDisposableResource as r,__disposeResources as t}from"tslib";import{t as s}from"./Geometry.js";import{m as e,P as o}from"./Point2D.js";import"./MultiPathImpl.js";import{h as a,r as n,a6 as i,O as l,a7 as c,ay as m}from"./UnitFactory.js";import"./Envelope.js";function f(m,f,g,u,y,h){const N={stack:[],error:void 0,hasError:!1};try{4===u&&s("");const t=m,p=a(t),S=n();p.querySpheroidData(S);const v=S.e2,T=S.majorSemiAxis,d=p.getUnit().getUnitToBaseFactor(),j=r(N,new i,!1),x=r(N,new i,!1),w=r(N,new i,!1);if(f.isNAN()||g.isNAN())return Number.NaN;const A=e(o,2);A[0].assign(f),A[1].assign(g);const C=e(o,2),E=t.getGCS()!==t?t.getSRToGCSTransform():null;if(E){if(2!==(new l).transform(E,A,2,C))return Number.NaN}else C[0].assign(A[0]),C[1].assign(A[1]);return C[0].scale(d),C[1].scale(d),c.geodeticDistance(T,v,C[0].x,C[0].y,C[1].x,C[1].y,j,x,w,u),y[0]=x.val,h[0]=w.val,j.val}catch(p){N.error=p,N.hasError=!0}finally{t(N)}}function g(l,f,g,u,y,h){const N={stack:[],error:void 0,hasError:!1};try{4===h&&s("");const t=l,p=a(t),S=n();p.querySpheroidData(S);const v=S.e2,T=S.majorSemiAxis,d=p.getUnit().getUnitToBaseFactor(),j=r(N,new i,!1),x=r(N,new i,!1),w=t.getSRToGCSTransform(),A=t.getGCSToSRTransform(),C=e(o,100),E=e(o,100);let G=0;for(let r=0,s=0;r<g;){let t=g-r;t>C.length&&(t=C.length);for(let s=0;s<t;s++)C[s].assign(f[r+s]);if(m(w,C,t,E,null)>0){for(let r=0;r<t;r++){const t=E[r].clone();t.isNAN()?C[r].assign(t):(t.scale(d),c.geodeticCoordinate(T,v,t.x,t.y,u,y,j,x,h),t.x=j.val,t.y=x.val,t.scale(1/d),C[r].assign(t))}G+=m(A,C,t,E,null)}for(let r=0;r<t;r++)f[s+r].assign(E[r]);r+=t,s+=t}return G}catch(p){N.error=p,N.hasError=!0}finally{t(N)}}export{f as calculateDistanceAndAzimuth,g as movePointsByDistance};
