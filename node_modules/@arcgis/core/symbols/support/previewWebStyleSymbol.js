/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import t from"../../request.js";import{pt2px as e}from"../../core/screenUtils.js";import{defaultAcceptedFormats as i}from"./webStyleAcceptedFormats.js";async function n(e,n,s){const r=e.thumbnail?.url;if(r){const e=o((await t(r,{responseType:"image"})).data,s);return s?.node?(s.node.appendChild(e),s.node):e}const a=await e.fetchSymbol({acceptedFormats:i});return a?n(a,s):null}function o(t,i){const n=!/\\.svg$/i.test(t.src)&&i?.disableUpsampling,o=Math.max(t.width,t.height);let s=null!=i?.maxSize?e(i.maxSize):120;n&&(s=Math.min(o,s));const r="number"==typeof i?.size?i?.size:null,a=Math.min(s,null!=r?e(r):o);if(a!==o){const e=0!==t.width&&0!==t.height?t.width/t.height:1;e>=1?(t.width=a,t.height=a/e):(t.width=a*e,t.height=a)}return t}export{n as previewWebStyleSymbol};
