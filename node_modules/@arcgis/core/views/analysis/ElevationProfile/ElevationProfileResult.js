/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as t}from"tslib";import{Clonable as e}from"../../../core/Clonable.js";import{memoize as o}from"../../../core/memoize.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/Logger.js";import"../../../core/RandomLCG.js";import{subclass as s}from"../../../core/accessorSupport/decorators/subclass.js";import l from"../../../geometry/Point.js";import{sanitizeProgress as i,binaryFindClosest as n}from"./elevationProfileGenerationUtils.js";import{convertSamples as a,convertStatistics as p}from"./elevationProfileUnitUtils.js";let u=class extends e{constructor(t){super(t),this._getSamplesMemoized=o((t,e)=>a(t,e)),this._getStatisticsMemoized=o((t,e)=>p(t,e)),this.rawResult=null}get available(){const{computation:t}=this;return t.profile.enabled&&t.available}get profile(){return this.computation.profile}get progress(){return i(null!=this.rawResult&&this.computation.profile.enabled?this.rawResult.progress:0)}get samples(){return this._getSamplesMemoized(this.rawResult,this.computation.controller.effectiveDisplayUnits)}get statistics(){return this._getStatisticsMemoized(this.rawResult,this.computation.controller.effectiveDisplayUnits)}get hoveredPoint(){if(!this.computation.profile.enabled)return null;const t=this.computation.controller.analysisViewData.hoveredPosition;if(null==t)return null;const{rawResult:e,samples:o}=this;if(null==o||null==e)return null;const r=o.length;if(0===r)return null;const s=o[r-1].distance,i=n(o,t*s,t=>t.distance);if(null==i)return null;const{x:a,y:p,z:u}=i;return null==u?null:new l({x:a,y:p,z:u,spatialReference:e.spatialReference})}};t([r()],u.prototype,"available",null),t([r({readOnly:!0})],u.prototype,"profile",null),t([r({readOnly:!0})],u.prototype,"progress",null),t([r()],u.prototype,"samples",null),t([r()],u.prototype,"statistics",null),t([r({constructOnly:!0})],u.prototype,"computation",void 0),t([r()],u.prototype,"rawResult",void 0),t([r()],u.prototype,"hoveredPoint",null),u=t([s("esri.views.analysis.ElevationProfile.ElevationProfileResult")],u);export{u as default};
