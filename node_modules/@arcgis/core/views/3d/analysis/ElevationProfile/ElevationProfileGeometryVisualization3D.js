/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as e}from"tslib";import t from"../../../../core/Accessor.js";import{destroyHandle as i,handlesGroup as s}from"../../../../core/handleUtils.js";import{removeMaybe as o}from"../../../../core/maybe.js";import{watch as a,syncAndInitial as r}from"../../../../core/reactiveUtils.js";import{property as l}from"../../../../core/accessorSupport/decorators/property.js";import"../../../../core/has.js";import"../../../../core/Logger.js";import"../../../../core/RandomLCG.js";import{subclass as n}from"../../../../core/accessorSupport/decorators/subclass.js";import{getEffectiveElevationMode as m}from"../../../../support/elevationInfoUtils.js";import{Settings as c}from"../../interactive/editingTools/settings.js";import{OutlineVisualElement as p}from"../../interactive/visualElements/OutlineVisualElement.js";import{connectVisualization as v}from"../../../analysis/ElevationProfile/elevationProfileInputVisualizationUtils.js";let u=class extends t{constructor(e){super(e),this._visualElementHandle=null}initialize(){this._settings=new c({getTheme:()=>this.view.effectiveTheme}),this.addHandles(v({analysisViewData:this.analysisViewData,remove:()=>this._remove(),show:e=>this._show(e)}))}destroy(){this._remove()}get updating(){return!1}_remove(){this._visualElementHandle=o(this._visualElementHandle)}_show(e){this._remove();const{view:t}=this,o=new p({view:t,geometry:this.analysisViewData.analysis.geometry,attached:!1,renderOccluded:8,isDecoration:!0}),l=[a(()=>this.analysisViewData.analysis.elevationInfo,e=>{o.elevationInfo=e,o.isDraped="on-the-ground"===m(!0,e)},r),a(()=>this.analysisViewData.analysis.geometry,e=>{o.geometry=e}),t.maskOccludee(e),i(o)];this._settings.visualElements.lineObjects.outline.apply(o),o.attached=!0,this._visualElementHandle=s(l)}};e([l({constructOnly:!0})],u.prototype,"view",void 0),e([l({constructOnly:!0})],u.prototype,"analysisViewData",void 0),e([l()],u.prototype,"updating",null),u=e([n("esri.views.3d.analysis.ElevationProfile.ElevationProfileGeometryVisualization3D")],u);export{u as ElevationProfileGeometryVisualization3D};
