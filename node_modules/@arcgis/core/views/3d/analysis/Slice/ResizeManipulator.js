/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import e from"../../../../Color.js";import{watch as t,initial as r}from"../../../../core/reactiveUtils.js";import{fromValues as o}from"../../../../core/libs/gl-matrix-2/factories/vec3f64.js";import{resizeHandleCornerWidth as i,resizeHandleEdgeWidth as s,displayFocusMultiplier as a,resizeHandleCornerInputRadius as l,resizeHandleEdgeInputRadius as n}from"./sliceToolConfig.js";import{isDiagonalResizeHandle as c,resizeNormal as m,resizeOutlineOnly as f}from"./sliceToolUtils.js";import{Manipulator3D as d}from"../../interactive/Manipulator3D.js";import{worldScaledManipulatorSettings as p}from"../../interactive/manipulatorUtils.js";import{RenderObject as u}from"../../interactive/RenderObject.js";import{createPolylineGeometry as j}from"../../webgl-engine/lib/GeometryUtil.js";import{RibbonLineMaterial as w}from"../../webgl-engine/materials/RibbonLineMaterial.js";class b extends d{constructor(o,l){const n=c(l),m=n?i:s,f=m*a,d=s,u={renderOccluded:4,isDecoration:!0},j=new w({...u,width:m},o.state.isGlobal),b=new w({...u,width:f},o.state.isGlobal),v=new w({...u,width:d},o.state.isGlobal);super({view:o,...p,...h({isCorner:n,unfocusedMaterial:j,focusedMaterial:b,outlineMaterial:v})}),this._themeHandle=t(()=>o.effectiveTheme.accentColor,t=>{const r=e.toUnitRGBA(t);j.setParameters({color:r}),b.setParameters({color:r}),v.setParameters({color:r})},r)}destroy(){this._themeHandle.remove(),super.destroy()}}function h({isCorner:e,unfocusedMaterial:t,focusedMaterial:r,outlineMaterial:i}){const s=e?[o(1,0,0),o(0,0,0),o(0,1,0)]:[o(1,0,0),o(-1,0,0)];return{renderObjects:[new u(j(t,s),1|m),new u(j(r,s),2|m),new u(j(i,s),f)],collisionType:{type:"line",paths:[s]},radius:e?l:n,state:m}}export{b as ResizeManipulator};
