/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{rad2deg as t,acosClamped as o}from"../../../core/mathUtils.js";import{n as s,f as r,d as e,h as n,e as i,b as a,i as c}from"../../../chunks/vec32.js";import{create as m}from"../../../core/libs/gl-matrix-2/factories/vec3f64.js";import{wrap as f}from"../../../geometry/support/lineSegment.js";import{intersectLineSegment as p}from"../../../geometry/support/plane.js";const l=m(),u=m();function h(){return{direction:m(),up:m()}}function g(m,f,p,h,g){let j=s(l,m),b=r(j,h);const d=b>0;b=Math.abs(b),b>.99&&(b=Math.abs(r(f,h)),b<.99?(e(j,f),d&&n(j,j,-1)):j=null);let v=0;if(j){n(u,h,r(h,j)),i(j,j,u);const s=r(j,g)/(a(j)*a(g));c(u,j,g);v=(r(u,h)>0?1:-1)*t(o(s))}const x=t(o(-r(h,m)/a(m)));return p?(p.heading=v,p.tilt=x,p):{heading:v,tilt:x}}function j(t,o,s,r){i(b,s,o),p(r,f(o,b),t)||t===s||e(t,s)}const b=m();export{j as clampLineSegmentToPlane,h as createDirectionUp,g as directionToHeadingTilt};
