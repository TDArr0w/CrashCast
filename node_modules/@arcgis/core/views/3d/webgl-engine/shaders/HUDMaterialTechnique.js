/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{glLayout as e}from"../../support/buffer/glUtil.js";import{newLayout as r}from"../../support/buffer/InterleavedLayout.js";import{isColorOrColorEmission as t}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as o}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as s}from"../core/shaderTechnique/ShaderTechnique.js";import{olidEnabled as i}from"../effects/geometry/olidUtils.js";import{getDrawBuffers as n,blending as l}from"../lib/OrderIndependentTransparency.js";import{H as u}from"../../../../chunks/HUDMaterial.glsl.js";import{PrimitiveType as a}from"../../../webgl/enums.js";import{makePipelineState as c,defaultColorWrite as f,defaultDepthWrite as p}from"../../../webgl/renderState.js";import{fromLayouts as m}from"../../../webgl/VertexAttributeLocations.js";class d extends s{constructor(r,t){super(r,t,new o(u,()=>import("./HUDMaterial.glsl.js")),m([v,g()].map(e))),this.primitiveType=t.occlusionPass?a.POINTS:a.TRIANGLE_STRIP}initializePipeline(e){const{oitPass:r,hasPolygonOffset:o,draped:s,output:i,depthTestEnabled:u,occlusionPass:a}=e,m=u&&!s&&!(1===r)&&!a&&!(9===i);return c({blending:t(i)?l(r,!0):null,depthTest:u&&!s?{func:515}:null,depthWrite:m?p:null,drawBuffers:n(r,i),colorWrite:f,polygonOffset:o?h:null})}}const h={factor:0,units:-4},v=r().vec2u8("uv0",{glNormalized:!0}),b=r().vec3f("position").vec3f("normal").vec4i16("uvi").vec4u8("color").vec2f("size").f32("rotation").vec4f("centerOffsetAndDistance").vec4f("featureAttribute"),j=b.clone().vec4u8("olidColor");function g(){return i()?j:b}export{d as HUDMaterialTechnique,v as baseLayout,g as getInstanceLayout,b as instanceLayout,j as olidInstanceLayout};
