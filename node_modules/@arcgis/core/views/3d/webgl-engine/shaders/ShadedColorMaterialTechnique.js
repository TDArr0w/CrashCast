/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{newLayout as e}from"../../support/buffer/InterleavedLayout.js";import{isColorOrColorEmission as r}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as o}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as t}from"../core/shaderTechnique/ShaderTechnique.js";import{OITPolygonOffset as n,getDrawBuffers as s,depthWrite as a,blending as i}from"../lib/OrderIndependentTransparency.js";import{S as l}from"../../../../chunks/ShadedColorMaterial.glsl.js";import{makePipelineState as d,defaultColorWrite as c,cullingParams as u}from"../../../webgl/renderState.js";class p extends t{constructor(e,r){super(e,r,new o(l,()=>import("./ShadedColorMaterial.glsl.js")),f(r).locations)}initializePipeline(e){const{oitPass:o,output:t,transparent:l,cullFace:p,shadingEnabled:f}=e,m=0===o,h=2===o;return d({blending:r(t)&&l?i(o):null,culling:u(p),depthTest:{func:h?513:f?515:513},depthWrite:a(e),drawBuffers:s(o,t),colorWrite:c,polygonOffset:m||h?null:n})}}function f(r){const o=e().vec3f("position").vec3f("normal");return r.screenSizeEnabled&&o.vec3f("offset"),o}export{p as ShadedColorMaterialTechnique,f as getLayout};
