/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{isColorOrColorEmission as e}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as r}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as t}from"../core/shaderTechnique/ShaderTechnique.js";import{getDrawBuffers as i}from"../lib/OrderIndependentTransparency.js";import{stencilToolMaskBaseParams as s,stencilBaseAllZerosParams as l,stencilWriteMaskOn as o,depthCompareLess as n}from"../lib/StencilUtils.js";import{PositionColorLayout as a,PositionLayout as p}from"../materials/DefaultLayouts.js";import{N as u}from"../../../../chunks/NativeLine.glsl.js";import{PrimitiveType as c}from"../../../webgl/enums.js";import{makePipelineState as m,defaultColorWrite as d,defaultDepthWrite as h,unpremultipliedAlphaToPremultipliedAlpha as f}from"../../../webgl/renderState.js";class j extends t{constructor(e,t){super(e,t,new r(u,()=>import("./NativeLine.glsl.js")),t.hasVertexColors?a.locations:p.locations),this.primitiveType=c.LINES}initializePipeline(r){const{hasOccludees:t,output:a,transparent:p,oitPass:u}=r,c=(e,r=null,p=null)=>m({blending:r,depthTest:n,depthWrite:p,colorWrite:d,stencilWrite:t?o:null,stencilTest:t?e?s:l:null,drawBuffers:i(u,a)});return e(a)?(this._occludeePipeline=c(!0,p?f:null,h),c(!1,p?f:null,h)):c(!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}export{j as NativeLineTechnique};
