/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{create as t}from"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js";import{create as e}from"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js";import{A as s,c as i,q as r,y as a}from"../../../../../chunks/sphere.js";import{maxScale as n}from"../../../support/mathUtils.js";import{Octree as o}from"../Octree.js";class h extends o{constructor(e,r){super(t=>s(this._instanceData.view.boundingSphere.getVec(t,m)),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=i(),this._tmpMat4=t()}addInstance(t){const e=this._instanceData.view.boundingSphere,s=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);r(this._tmpSphere,this._boundingSphere.center,s),this._tmpSphere[3]=this._boundingSphere.radius*n(s),e.setVec(t,a(this._tmpSphere)),this.add([t])}removeInstance(t){this.remove([t])}}const m=e();export{h as InstanceOctree};
