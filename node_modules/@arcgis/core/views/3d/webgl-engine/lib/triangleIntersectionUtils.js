/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{f as n,a as t,i as r,n as o,c,F as s,H as u}from"../../../../chunks/vec32.js";import{create as i}from"../../../../core/libs/gl-matrix-2/factories/vec3f64.js";function e(t,r,o){const c=n(t,r)-o;return Math.abs(c)<=1e-5}function a(n,c,s){const u=i(),e=i();t(e,c,n);const a=i();return t(a,s,n),r(u,e,a),o(u,u),u}function f(r,s,u,f){const m=[s,u,f],h=a(s,u,f);if(!e(r,h,n(m[0],h)))return!1;for(let e=0;e<3;++e){const r=m[e],s=m[(e+1)%3],u=m[(e+2)%3],a=i();t(a,s,r),o(a,a);const f=i();t(f,u,r);const h=n(f,a),l=i();c(l,r,a,h);const M=i();t(M,u,l),o(M,M);const x=n(r,M);if(!(n(M,l)-x>=-1e-4))return!1}return!0}function m(n){const c=i();t(c,n[1],n[0]),o(c,c);const s=i();t(s,n[2],n[0]),o(s,s);const u=i();return r(u,c,s),o(u,u),u}function h(r,s,u){const e=i();t(e,u,s),o(e,e);const a=i();t(a,r,s);const f=n(a,e),m=i();return c(m,s,e,f),m}function l(n,t,r){const o=h(n,t,r);return s(o,n)}function M(r,e,a){const f=i();t(f,a,e);const m=u(f);o(f,f);const h=i();t(h,r,e);const l=n(h,f);if(l<0)return s(e,r);if(l>m)return s(a,r);const M=i();c(M,e,f,l);return s(M,r)}function x(t,r,o){return n(t,r)-o}function y(c,s,u){const e=i(),a=i();t(a,s,c);const f=i();t(f,u,c),r(e,a,f),o(e,e);return{normal:e,d:n(e,c)}}function A(n,t,r,o){const{normal:s,d:u}=y(t,r,o),e=x(n,s,u),a=i();return c(a,n,s,-e),f(a,t,r,o)?e:Math.min(M(n,t,r),M(n,r,o),M(n,o,t))}function p(r,o,s){const u=i();t(u,o,r);const e=m(s),a=n(e,s[0]),h=n(e,r)-a,l=n(e,o)-a;if(h*l>0)return 1/0;const M=i();return c(M,r,u,(0-h)/(l-h)),f(M,s[0],s[1],s[2])?0:A(M,s[0],s[1],s[2])}function w(n,t){const r=n.length;if(0===r)return 0;if(t<n[0])return-1;if(t>=n[r-1])return r;let o=0,c=r-1;for(;c-o>1;){const r=Math.floor(.5*(c+o));t>=n[r]?o=r:c=r}return o}function F(n,t,r,o,c,s,u){const i=s-u,e=t-n,a=new Float64Array(4*e);for(let f=0;f<e;++f){const t=3*(f+n),s=c*r[t+0],e=o[s+0],m=o[s+1],h=i/(o[s+2]-u),l=e*h,M=m*h,x=c*r[t+1],y=o[x+0],A=o[x+1],p=i/(o[x+2]-u),w=y*p,F=A*p,U=c*r[t+2],b=o[U+0],d=o[U+1],g=i/(o[U+2]-u),j=b*g,v=d*g,k=4*f;a[k+0]=Math.min(l,w,j),a[k+1]=Math.min(M,F,v),a[k+2]=Math.max(l,w,j),a[k+3]=Math.max(M,F,v)}return a}function U(n,t,r,o,c){const s=t-n,u=new Float64Array(4*s);for(let i=0;i<s;++i){const t=3*(i+n),s=c*r[t+0],e=o[s+0],a=o[s+1],f=c*r[t+1],m=o[f+0],h=o[f+1],l=c*r[t+2],M=o[l+0],x=o[l+1],y=4*i;u[y+0]=Math.min(e,m,M),u[y+1]=Math.min(a,h,x),u[y+2]=Math.max(e,m,M),u[y+3]=Math.max(a,h,x)}return u}function b(n,t){return new(d(n))(t)}function d(n){return n<128?Uint8Array:n<32768?Uint16Array:n<1<<31?Uint32Array:Array}function g(n,t){n[2]+=t}function j(n,t,r,o){const[c,s,u]=o??n,i=u-r,e=t/Math.sqrt(c*c+s*s+i*i);n[0]+=c*e,n[1]+=s*e,n[2]+=i*e}export{w as binarySearchSortedArray,m as calculateNormalFromVertices,b as createUintArray,l as distancePointLine,x as distancePointPlane,M as distancePointSegment,A as distancePointTriangle,j as elevationAlignVertexGlobal,g as elevationAlignVertexLocal,F as generateTriangleAabbsGlobal,U as generateTriangleAabbsLocal,d as getConstructorForValueCount,h as getNearestPointOnLine,p as getRayTriangleIntersectionDistance,a as getTriangleNormal,y as getTrianglePlane,e as isPointInPlane,f as isPointInTriangle};
