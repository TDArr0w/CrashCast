/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
class t{constructor(t,s){this._maxTotalSamples=t,this._maxDistance=s,this.count=0,this.numSamples=0}get done(){return 0===this.numRemainingSamples}get numRemainingSamples(){return Math.max(0,this._maxTotalSamples-this.numSamples)}get ratio(){return this.numSamples?this.count/this.numSamples:0}sampleGeometry(t,s,e){switch(t?.type){case"point":if("point"!==s?.type)return;this._withinDistance(t.x-s.x,t.y-s.y)&&this.count++,this.numSamples++;break;case"polyline":case"polygon":{const s="polyline"===t.type?t.paths:t.rings;for(let t=0;t<s.length;t++){const a=s[t],n=e/(s.length-t),i=Math.max(1,Math.ceil(a.length/n));for(let t=Math.floor(i/2);t<a.length-1;t+=i){const s=a[t],n=a[t+1],i=n[0]-s[0],h=n[1]-s[1];if(this._withinDistance(i,h)&&this.count++,this.numSamples++,--e<=0||this.numSamples>=this._maxTotalSamples)return}}}}}_withinDistance(t,s){return Math.abs(t)<=this._maxDistance||Math.abs(s)<=this._maxDistance}}export{t as SampledGeometryMaxDistanceRatio};
