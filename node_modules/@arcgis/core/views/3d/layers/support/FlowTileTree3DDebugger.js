/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{__decorate as e}from"tslib";import t from"../../../../Graphic.js";import{property as r}from"../../../../core/accessorSupport/decorators/property.js";import"../../../../core/has.js";import"../../../../core/Logger.js";import"../../../../core/RandomLCG.js";import{subclass as o}from"../../../../core/accessorSupport/decorators/subclass.js";import l from"../../../../geometry/Polygon.js";import{toExtent as i}from"../../../../geometry/support/aaBoundingRect.js";import s from"../../../../symbols/SimpleFillSymbol.js";import{tileToKey as a}from"../../support/flow/loadUtils.js";import{TileTreeDebugger as p}from"../../../support/TileTreeDebugger.js";let n=class extends p{get _flowSubView(){const{layerView:e}=this;return"imagery-3d"===e.type?e.test.subView:e.test.flowSubView}constructor(e,t=!0){super(e),this._fullExtentGraphic=null,this.enableLabels=t}clear(){super.clear(),this._fullExtentGraphic&&(this.view.graphics.remove(this._fullExtentGraphic),this._fullExtentGraphic=null)}update(){super.update();const e=this._flowSubView.layer.fullExtent;this._fullExtentGraphic=new t({geometry:e,symbol:new s({color:[0,0,0,0],outline:{color:"black",width:3}})}),this.view.graphics.add(this._fullExtentGraphic)}getTiles(){const e=null!=this.view.basemapTerrain.spatialReference?this.view.basemapTerrain.spatialReference:null,t=this._flowSubView.test.renderedTiles,r=this.view.basemapTerrain.renderedTiles;let o=null;if("imagery-tile"===this._flowSubView.layer.type){const e=this._flowSubView;o=e.test.loadedTiles}return r.map(r=>{const a=this._getColor(r,t,o),p=new s({color:a,outline:{color:"black",width:1}});return{...r,lij:r.lij,level:r.level,geometry:l.fromExtent(i(r.extent,e)),label:r.lij.toString(),polygonSymbol:p}})}_getColor(e,t,r){const o=.1;return null!=t&&t.has(e)?null==r||r.has(a(e))?[0,255,0,o]:[255,165,0,o]:[255,0,0,o]}};e([r()],n.prototype,"layerView",void 0),n=e([o("esri.views.3d.layers.support.FlowTileTree3DDebugger")],n);export{n as FlowTileTree3DDebugger};
