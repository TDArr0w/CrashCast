/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{createLength as n}from"../../core/quantityUtils.js";import{lengthUnitFromSpatialReference as t,verticalLengthUnitFromSpatialReference as e}from"../../core/unitUtils.js";import{k as r,j as l}from"../../chunks/vec32.js";import{create as i}from"../../core/libs/gl-matrix-2/factories/vec3f64.js";import{projectVectorToVector as u}from"../../geometry/projection/projectVectorToVector.js";import{equals as o}from"../../geometry/support/spatialReferenceUtils.js";import{computeEuclideanMeasurementSR as c}from"./measurementUtils.js";function s(n){return f(n,0)}function a(n){return f(n,1)}function f(e,r){const{hasZ:l,spatialReference:i}=e,u=c(i);let o=0;const s=t(u);if(null==s)return null;const a=0===r?x:Z;for(const n of e.paths){if(n.length<2)continue;const t=n.length-1;for(let e=0;e<t;++e){const t=n[e];U[0]=t[0],U[1]=t[1],U[2]=l?t[2]:0;const r=n[e+1];b[0]=r[0],b[1]=r[1],b[2]=l?r[2]:0;const u=a(U,b,i);if(null==u)return null;o+=u.value}}return n(o,s)}function p(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(U[0]=n.x,U[1]=n.y,U[2]=n.hasZ?n.z:0,b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,j(U,b,e)):null}function h(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(U[0]=n.x,U[1]=n.y,U[2]=n.hasZ?n.z:0,b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,x(U,b,e)):null}function m(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(U[0]=n.x,U[1]=n.y,U[2]=n.hasZ?n.z:0,b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,Z(U,b,e)):null}function z(n,t){const{spatialReference:e}=n;return o(e,t.spatialReference)?(U[0]=n.x,U[1]=n.y,U[2]=n.hasZ?n.z:0,b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,d(U,b,e)):null}function y(n){return null!=n?R(n.hasZ?n.z:0,n.spatialReference):null}function R(t,r){const l=e(r);return null!=l?n(t??0,l):null}function j(t,e,r){const l=g(t,e,r);return null!=l?{direct:n(l.direct,l.unit),horizontal:n(l.horizontal,l.unit),vertical:n(l.vertical,l.unit)}:null}function x(t,e,r){const l=g(t,e,r,0);return null!=l?n(l.direct,l.unit):null}function Z(t,e,r){const l=g(t,e,r,1);return null!=l?n(l.horizontal,l.unit):null}function v(t,e,r){const l=g(t,e,r,2);return null!=l?n(Math.abs(l.verticalSigned),l.unit):null}function d(t,e,r){const l=g(t,e,r,2);return null!=l?n(l.verticalSigned,l.unit):null}function g(n,e,i,o){const s=c(i),a=t(s);if(null==a)return null;const f=e[2]-n[2];if(2===o)return{verticalSigned:f,unit:a};if(!u(n,i,S,s)||!u(e,i,k,s))return null;if(0===o){return{direct:r(k,S),unit:a}}if(l(M,n[0],n[1],e[2]),!u(M,i,M,s))return null;const p=r(M,k);if(1===o)return{horizontal:p,unit:a};return{direct:r(k,S),horizontal:p,vertical:Math.abs(f),unit:a}}const U=i(),b=i(),S=i(),k=i(),M=i();export{y as elevationFromPoint,R as elevationFromZ,x as euclideanDirectDistance,h as euclideanDirectDistanceBetweenPoints,j as euclideanDistance,p as euclideanDistanceBetweenPoints,Z as euclideanHorizontalDistance,m as euclideanHorizontalDistanceBetweenPoints,a as euclideanHorizontalLength,s as euclideanLength,v as verticalDistance,d as verticalSignedDistance,z as verticalSignedDistanceBetweenPoints};
