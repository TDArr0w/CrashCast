"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[744,7136],{159:(e,t,n)=>{n.d(t,{A:()=>u});var i,r=n(31635),o=n(65008),s=n(10107),l=(n(44208),n(53966),n(87811),n(64108)),a=n(99157);let u=i=class extends o.A{constructor(e){super(e),this.steps=[]}getInverse(){const e=new i;for(let t=this.steps.length-1;t>=0;t--){const n=this.steps[t];e.steps.push(n.getInverse())}return e}};(0,r.Cg)([(0,s.MZ)({type:[a.A],nonNullable:!0})],u.prototype,"steps",void 0),u=i=(0,r.Cg)([(0,l.$)("esri.geometry.operators.support.GeographicTransformation")],u)},4197:(e,t,n)=>{n.d(t,{Vj:()=>u,cj:()=>a,jh:()=>o,l5:()=>l,xm:()=>s});var i=n(34275),r=n(9093);function o(e){return e<=i.y9?new Array(e).fill(0):new Float64Array(e)}function s(e){return((0,i.iu)(e)?e.byteLength/8:e.length)<=i.y9?Array.from(e):new Float64Array(e)}function l(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}function a(e){return[...e]}function u(e){const t=(0,r.vt)();for(let n=0;n<16;++n)t[n]=e[n];return t}},9093:(e,t,n)=>{function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}n.d(t,{o8:()=>r,vt:()=>i,zK:()=>o});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:i,fromValues:function(e,t,n,i,r,o,s,l,a,u,p,c,f,d,y,h){return[e,t,n,i,r,o,s,l,a,u,p,c,f,d,y,h]}},Symbol.toStringTag,{value:"Module"}))},9762:(e,t,n)=>{n.r(t),n.d(t,{projectBuffer:()=>r});var i=n(37539);function r(e,t,n,r,o,s,l=Math.floor(e.length/3)){const a=(0,i.jd)(t,o);if(null==a)return!1;if(a===i.pO){if(e===r&&n===s)return!0;const t=n+3*l;for(let i=n,o=s;i<t;i++,o++)r[o]=e[i];return!0}const u=n+3*l;for(let t=n,i=s;t<u;t+=3,i+=3)a(e,t,r,i);return!0}},16494:(e,t,n)=>{n.d(t,{Nd:()=>l,W5:()=>s});var i=n(37330);const r=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((e,t)=>(e[t]=[],e),{}),o=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],s=new i.I({whiteList:r,onTagAttr:(e,t,n)=>{const i=`${t}="${n}"`;if(o.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),l=new i.I({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:e=>e},!1)},17136:(e,t,n)=>{n.d(t,{Y_:()=>A,O7:()=>I,el:()=>S});var i=n(92602),r=n(69052),o=n(49186),s=n(53966),l=n(39829),a=n(82799),u=n(16930),p=n(80754),c=n(21325),f=n(28735),d=n(78888),y=n(65864),h=n(2272),m=n(84952),g=n(92300);const M=()=>s.A.getLogger("esri.geometry.support.normalizeUtils");function b(e){return"polygon"===e[0].type}function w(e){return"polyline"===e[0].type}function v(e,t,n){if(t){const t=function(e,t){if(!(e instanceof a.A||e instanceof l.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw M().error(e),new o.A("internal:geometry",e)}const n=(0,p.r8)(e),i=[];for(const e of n){const n=[];i.push(n),n.push([e[0][0],e[0][1]]);for(let i=0;i<e.length-1;i++){const r=e[i][0],o=e[i][1],s=e[i+1][0],l=e[i+1][1],a=Math.sqrt((s-r)*(s-r)+(l-o)*(l-o)),u=(l-o)/a,p=(s-r)/a,c=a/t;if(c>1){for(let e=1;e<=c-1;e++){const i=e*t,s=p*i+r,l=u*i+o;n.push([s,l])}const e=(a+Math.floor(c-1)*t)/2,i=p*e+r,s=u*e+o;n.push([i,s])}n.push([s,l])}}return function(e){return"polygon"===e.type}(e)?new l.A({rings:i,spatialReference:e.spatialReference}):new a.A({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=(0,f.ci)(t,!0)}return n&&(e=(0,p.kS)(e,n)),e}function x(e,t,n){if(Array.isArray(e)){const i=e[0];if(i>t){const n=(0,p.kd)(i,t);e[0]=i+n*(-2*t)}else if(i<n){const t=(0,p.kd)(i,n);e[0]=i+t*(-2*n)}}else{const i=e.x;if(i>t){const n=(0,p.kd)(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<n){const t=(0,p.kd)(i,n);e=e.clone().offset(t*(-2*n),0)}}return e}function T(e,t){let n=-1;for(let i=0;i<t.cutIndexes.length;i++){const r=t.cutIndexes[i],o=t.geometries[i],s=(0,p.r8)(o);for(let e=0;e<s.length;e++){const t=s[e];t.some(n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const i=t[e][0];n=i>n?i:n}n=Number(n.toFixed(9));const i=-360*(0,p.kd)(n,180);for(let n=0;n<t.length;n++){const t=o.getPoint(e,n);o.setPoint(e,n,t.clone().offset(i,0))}return!0}})}if(r===n){if(b(e))for(const t of(0,p.r8)(o))e[r]=e[r].addRing(t);else if(w(e))for(const t of(0,p.r8)(o))e[r]=e[r].addPath(t)}else n=r,e[r]=o}return e}async function S(e,t,n){if(!Array.isArray(e))return S([e],t);t&&"string"!=typeof t&&M().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r="string"==typeof t?t:t?.url??i.A.geometryServiceUrl;let o,s,u,b,w,I,C,A,O=0;const F=[],R=[];for(const t of e)if(null!=t)if(o||(o=t.spatialReference,s=(0,c.Vp)(o),u=o.isWebMercator,I=u?102100:4326,b=p.j7[I].maxX,w=p.j7[I].minX,C=p.j7[I].plus180Line,A=p.j7[I].minus180Line),s)if("mesh"===t.type)R.push(t);else if("point"===t.type)R.push(x(t.clone(),b,w));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map(e=>x(e,b,w)),R.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,s);R.push(e.rings?new l.A(e):e)}else if(t.extent){const e=t.extent,n=(0,p.kd)(e.xmin,w)*(2*b);let i=0===n?t.clone():(0,p.kS)(t.clone(),n);e.offset(n,0);let{xmin:r,xmax:o}=e;r=Number(r.toFixed(9)),o=Number(o.toFixed(9)),e.intersects(C)&&o!==b?(O=o>O?o:O,i=v(i,u),F.push(i),R.push("cut")):e.intersects(A)&&r!==w?(O=o*(2*b)>O?o*(2*b):O,i=v(i,u,360),F.push(i),R.push("cut")):R.push(i)}else R.push(t.clone());else R.push(t);else R.push(t);let N=(0,p.kd)(O,b),_=-90;const j=N,Z=new a.A;for(;N>0;){const e=360*N-180;Z.addPath([[e,_],[e,-1*_]]),_*=-1,N--}if(F.length>0&&j>0){const t=T(F,await async function(e,t,n,i){const r=(0,h.Dl)(e),o=t[0].spatialReference,s={...i,responseType:"json",query:{...r.query,f:"json",sr:(0,c.YX)(o),target:JSON.stringify({geometryType:(0,y.$B)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},l=await(0,d.A)(r.path+"/cut",s),{cutIndexes:a,geometries:u=[]}=l.data;return{cutIndexes:a,geometries:u.map(e=>{const t=(0,y.rS)(e);return t.spatialReference=o,t})}}(r,F,Z,n)),i=[],o=[];for(let n=0;n<R.length;n++){const r=R[n];if("cut"!==r)o.push(r);else{const r=t.shift(),s=e[n];null!=s&&"polygon"===s.type&&s.rings&&s.rings.length>1&&r.rings.length>=s.rings.length?(i.push(r),o.push("simplify")):o.push(u?(0,f.Gh)(r):r)}}if(!i.length)return o;const s=await async function(e,t,n){const i="string"==typeof e?(0,m.An)(e):e,r=t[0].spatialReference,o=(0,y.$B)(t[0]),s={...n,query:{...i.query,f:"json",sr:(0,c.YX)(r),geometries:JSON.stringify((0,g.X)(t))}},{data:l}=await(0,d.A)(i.path+"/simplify",s);return(0,g.V)(l.geometries,o,r)}(r,i,n),l=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?l.push(t):l.push(u?(0,f.Gh)(s.shift()):s.shift())}return l}const L=[];for(let e=0;e<R.length;e++){const t=R[e];if("cut"!==t)L.push(t);else{const e=F.shift();L.push(!0===u?(0,f.Gh)(e):e)}}return L}function I(e,t,n){const i=(0,c.Vp)(n);if(null==i)return e;const[r,o]=i.valid,s=2*o;let l=0,a=0;t>o?l=Math.ceil(Math.abs(t-o)/s):t<r&&(l=-Math.ceil(Math.abs(t-r)/s)),e>o?a=Math.ceil(Math.abs(e-o)/s):e<r&&(a=-Math.ceil(Math.abs(e-r)/s));let u=e+(l-a)*s;const p=u-t;return p>o?u-=s:p<r&&(u+=s),u}function C(e){const t=(0,c.Vp)(e);if(null==t)return null;const[n,i]=t.valid;return new r.hr(n,i)}const A=C(u.A.WGS84);C(u.A.WebMercator)},17311:(e,t,n)=>{n.d(t,{A:()=>y});var i=n(31635),r=n(65008),o=n(4576),s=n(60999),l=n(7762),a=n(16494),u=n(10107),p=(n(44208),n(53966),n(64108)),c=n(30524),f=n(43668);const d=/<br\s*\/*>/gi;let y=class extends r.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,s.UT)(()=>(0,f.l)()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??n.e(9926).then(n.bind(n,29926)).then(e=>this._featureUtils=e)}get calculatedExpressions(){const e=new l.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter(t=>e.includes(`{expression/${t.name.toLowerCase()}}`))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(e=>!0===e.invalid)}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const t of this.calculatedExpressions?.toArray()??[])try{const n=this._arcadeTask.value.arcade.extractFieldLiterals(t.syntax);for(const t of n){const n=t.split("."),i=this.fieldsIndex.get(n.at(-1)??"");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const n of t){const t=this.fieldsIndex.get(n);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,n){const i=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],n)).get(i)??""}async getTitles(e,t,n){const i=new Map,r=n?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:o}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);n?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:s,workingTitle:l}=this,u=l&&s;t.forEach(t=>{const p=t.getObjectId()??t.attributes[e.objectIdField];let c=u?o({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:s,globalAttributes:this._createFormattedAttributes(e,t,r).global,layer:e,text:l}):"";n?.removeHTML&&(c=a.Nd.sanitize(c).replaceAll(d," ")),i.set(p,c)})}catch{}return i}async _checkAndReQueryGraphics(e,t){const n=t.map(t=>t.getObjectId()??t.attributes[e.objectIdField]).filter(o.Ru);if(n.length!==t.length)return t;if(t.some(e=>!(0,c.Kl)(e,this.requiredFields))){const i=e.createQuery();i.where="1=1",i.outFields=[...this.requiredFields],i.objectIds=n;const r=await e.queryFeatures(i);if(r?.features.length===t.length)return r.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const n of e){if(!n.fieldName)continue;const e=this.fieldsIndex.get(n.fieldName),i=e?.name??n.fieldName;n.fieldName=i,t.set(i.toLowerCase(),n)}return t}_createFormattedAttributes(e,t,n="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],r={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const n=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{r[`expression/${e.name}`]=e.func({vars:{$feature:n}})}catch{}}const o={...t.attributes,...r};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:o,graphic:t,timeZone:n,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,c.nw)(e).filter(e=>!(e.startsWith("relationships/")||e.startsWith("expression/")))}};(0,i.Cg)([(0,u.MZ)({readOnly:!0})],y.prototype,"_arcadeTask",null),(0,i.Cg)([(0,u.MZ)()],y.prototype,"_featureUtils",void 0),(0,i.Cg)([(0,u.MZ)({readOnly:!0})],y.prototype,"featureUtilsPromise",null),(0,i.Cg)([(0,u.MZ)({readOnly:!0})],y.prototype,"calculatedExpressions",null),(0,i.Cg)([(0,u.MZ)()],y.prototype,"displayField",void 0),(0,i.Cg)([(0,u.MZ)()],y.prototype,"effectivePopupTemplate",void 0),(0,i.Cg)([(0,u.MZ)()],y.prototype,"expressionsUsedInTitle",null),(0,i.Cg)([(0,u.MZ)()],y.prototype,"fieldsIndex",void 0),(0,i.Cg)([(0,u.MZ)()],y.prototype,"fieldInfoMap",null),(0,i.Cg)([(0,u.MZ)()],y.prototype,"fields",void 0),(0,i.Cg)([(0,u.MZ)()],y.prototype,"objectIdField",void 0),(0,i.Cg)([(0,u.MZ)()],y.prototype,"requiredFields",null),y=(0,i.Cg)([(0,p.$)("esri.layers.support.TitleCreator")],y)},22671:(e,t,n)=>{n.d(t,{A:()=>M});var i,r=n(31635),o=n(52106),s=n(66552),l=n(25482),a=n(4718),u=n(10107),p=(n(44208),n(53966),n(36005)),c=n(64108),f=n(43937),d=n(16930),y=n(65864),h=n(50498),m=n(20437);const g=new s.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let M=i=class extends l.o{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,o.A)}writeGeometryType(e,t,n,i){if(e)return void g.write(e,t,n,i);const{features:r}=this;if(r)for(const e of r)if(null!=e?.geometry)return void g.write(e.geometry.type,t,n,i)}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,i=(0,y.rS)(e);return i&&!n&&t.spatialReference&&(i.spatialReference=d.A.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n)for(const e of n)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new i(this.cloneProperties())}cloneProperties(){return(0,a.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const i=t.features[n];if(i.geometry){const t=e?.[n];i.geometry=t?.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,n],translate:[i,r]}=e,o=this.features,s=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-i)/t),e=>Math.round((r-e)/n));for(let e=0,t=o.length;e<t;e++)s?.(o[e].geometry)||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[i,r],scale:[o,s]}=n;let l=null,a=null;if(this.hasZ&&null!=n?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=n;l=n=>n*t+e}if(this.hasM&&null!=n?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=n;a=n=>null==n?n:n*t+e}const u=this._getHydrationFunction(e,e=>e*o+i,e=>r-e*s,l,a);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}readFeaturesWithClass(e,t,n){const i=d.A.fromJSON(t.spatialReference),r=[];for(let t=0;t<e.length;t++){const o=e[t],s=n.fromJSON(o),l=o.geometry?.spatialReference;null==s.geometry||l||(s.geometry.spatialReference=i);const a=o.aggregateGeometries,u=s.aggregateGeometries;if(a&&null!=u)for(const e in u){const t=u[e],n=a[e],r=n?.spatialReference;null==t||r||(t.spatialReference=i)}r.push(s)}return r}_quantizePoints(e,t,n){let i,r;const o=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(s>0){const e=t(l[0]),s=n(l[1]);e===i&&s===r||(o.push([e-i,s-r]),i=e,r=s)}else i=t(l[0]),r=n(l[1]),o.push([i,r])}return o.length>0?o:null}_getQuantizationFunction(e,t,n){return"point"===e?e=>(e.x=t(e.x),e.y=n(e.y),e):"polyline"===e||"polygon"===e?e=>{const i=(0,y.Bi)(e)?e.rings:e.paths,r=[];for(let e=0,o=i.length;e<o;e++){const o=i[e],s=this._quantizePoints(o,t,n);s&&r.push(s)}return r.length>0?((0,y.Bi)(e)?e.rings=r:e.paths=r,e):null}:"multipoint"===e?e=>{const i=this._quantizePoints(e.points,t,n);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,n,i,r){return"point"===e?e=>{e.x=t(e.x),e.y=n(e.y),i&&(e.z=i(e.z))}:"polyline"===e||"polygon"===e?e=>{const o=(0,y.Bi)(e)?e.rings:e.paths;let s,l;for(let e=0,i=o.length;e<i;e++){const i=o[e];for(let e=0,r=i.length;e<r;e++){const r=i[e];e>0?(s+=r[0],l+=r[1]):(s=r[0],l=r[1]),r[0]=t(s),r[1]=n(l)}}if(i&&r)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=i(n[2]),n[3]=r(n[3])}}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=i(n[2])}}else if(r)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,n=t.length;e<n;e++){const n=t[e];n[2]=r(n[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax),i&&null!=e.zmax&&null!=e.zmin&&(e.zmax=i(e.zmax),e.zmin=i(e.zmin)),r&&null!=e.mmax&&null!=e.mmin&&(e.mmax=r(e.mmax),e.mmin=r(e.mmin))}:"multipoint"===e?e=>{const o=e.points;let s,l;for(let e=0,i=o.length;e<i;e++){const i=o[e];e>0?(s+=i[0],l+=i[1]):(s=i[0],l=i[1]),i[0]=t(s),i[1]=n(l)}if(i&&r)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2]),t[3]=r(t[3])}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2])}else if(r)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=r(t[2])}}:null}};(0,r.Cg)([(0,u.MZ)({type:String,json:{write:!0}})],M.prototype,"displayFieldName",void 0),(0,r.Cg)([(0,u.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],M.prototype,"exceededTransferLimit",void 0),(0,r.Cg)([(0,u.MZ)({type:[o.A],json:{write:!0}})],M.prototype,"features",void 0),(0,r.Cg)([(0,p.w)("features")],M.prototype,"readFeatures",null),(0,r.Cg)([(0,u.MZ)({type:[m.A],json:{write:!0}})],M.prototype,"fields",void 0),(0,r.Cg)([(0,u.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],M.prototype,"geometryType",void 0),(0,r.Cg)([(0,f.K)("geometryType")],M.prototype,"writeGeometryType",null),(0,r.Cg)([(0,u.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],M.prototype,"hasM",void 0),(0,r.Cg)([(0,u.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],M.prototype,"hasZ",void 0),(0,r.Cg)([(0,u.MZ)({types:h.yR,json:{write:!0}})],M.prototype,"queryGeometry",void 0),(0,r.Cg)([(0,p.w)("queryGeometry")],M.prototype,"readQueryGeometry",null),(0,r.Cg)([(0,u.MZ)({type:d.A,json:{write:!0}})],M.prototype,"spatialReference",void 0),(0,r.Cg)([(0,f.K)("spatialReference")],M.prototype,"writeSpatialReference",null),(0,r.Cg)([(0,u.MZ)({json:{write:!0}})],M.prototype,"transform",void 0),M=i=(0,r.Cg)([(0,c.$)("esri.rest.support.FeatureSet")],M),M.prototype.toJSON.isDefaultToJSON=!0},33032:(e,t,n)=>{n.d(t,{H:()=>r,L:()=>i});const i=1;function r(e,t){let n=0;for(const i of t){const t=i.attributes?.[e];"number"==typeof t&&isFinite(t)&&(n=Math.max(n,t))}return n}},33143:(e,t,n)=>{n.d(t,{A:()=>f});var i=n(31635),r=n(69540),o=n(25482),s=n(10107),l=(n(44208),n(53966),n(87811),n(36005)),a=n(64108),u=n(43937),p=n(80451),c=n(29005);let f=class extends((0,r.OU)(o.o)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const n of Object.keys(e))t[n]=(0,p.rS)(e[n]);return t}writeDomains(e,t){const n={};for(const t of Object.keys(e))e[t]&&(n[t]=e[t]?.toJSON());t.domains=n}};(0,i.Cg)([(0,s.MZ)({json:{write:!0}})],f.prototype,"id",void 0),(0,i.Cg)([(0,s.MZ)({json:{write:!0}})],f.prototype,"name",void 0),(0,i.Cg)([(0,s.MZ)({json:{write:!0}})],f.prototype,"domains",void 0),(0,i.Cg)([(0,l.w)("domains")],f.prototype,"readDomains",null),(0,i.Cg)([(0,u.K)("domains")],f.prototype,"writeDomains",null),(0,i.Cg)([(0,s.MZ)({type:[c.A],json:{write:!0}})],f.prototype,"templates",void 0),f=(0,i.Cg)([(0,a.$)("esri.layers.support.FeatureType")],f)},37352:(e,t,n)=>{n.d(t,{A:()=>u});var i,r=n(31635),o=n(7762),s=n(25482),l=n(10107),a=(n(44208),n(53966),n(87811),n(64108));let u=i=class extends s.o{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new o.A}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,r.Cg)([(0,l.MZ)({type:String,json:{write:{isRequired:!0}}})],u.prototype,"floorField",void 0),(0,r.Cg)([(0,l.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllMode",void 0),(0,r.Cg)([(0,l.MZ)({json:{read:!1,write:!1}})],u.prototype,"viewAllLevelIds",void 0),u=i=(0,r.Cg)([(0,a.$)("esri.layers.support.LayerFloorInfo")],u)},37539:(e,t,n)=>{n.d(t,{pO:()=>h,jd:()=>f,Tp:()=>d,w5:()=>c});var i=n(34727),r=n(83047),o=n(73941),s=n(79258);Math.PI;const l=s.$O.radius,a=s.$O.eccentricitySquared,u={a1:l*a,a2:l*a*l*a,a3:l*a*a/2,a4:l*a*l*a*2.5,a5:l*a+l*a*a/2,a6:1-a};s.$O.radius,s.$O.flattening,s.Sw.radius,s.Sw.flattening,s.sH.radius,s.sH.flattening,s.sH.radius;var p=n(21325);const c={2:{5:h,7:null,9:null,10:h,1:T,6:null,8:null,0:null,3:g,11:M,2:h,4:O},5:{5:h,7:null,9:null,10:h,1:T,6:null,8:null,0:null,3:g,11:M,2:h,4:O},7:{5:null,7:h,9:null,10:h,1:null,6:x,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:h,10:h,1:null,6:null,8:v,0:null,3:null,11:null,2:null,4:null},3:{5:m,7:null,9:null,10:m,1:function(e,t,n,i){const r=e[t]/Z,o=j-2*Math.atan(Math.exp(-e[t+1]/Z)),s=Z+e[t+2],l=Math.cos(o)*s;n[i]=Math.cos(r)*l,n[i+1]=Math.sin(r)*l,n[i+2]=Math.sin(o)*s},6:null,8:null,0:null,3:h,11:function(e,t,n,i){m(e,t,n,i),M(n,i,n,i)},2:m,4:function(e,t,n,i){m(e,t,n,i),O(n,i,n,i)}},4:{5:F,7:null,9:null,10:F,1:function(e,t,n,i){F(e,t,n,i),T(n,i,n,i)},6:null,8:null,0:null,3:function(e,t,n,i){F(e,t,n,i),g(n,i,n,i)},11:function(e,t,n,i){F(e,t,n,i),M(n,i,n,i)},2:F,4:h},1:{5:A,7:null,9:null,10:A,1:h,6:null,8:null,0:null,3:function(e,t,n,i){A(e,t,n,i),g(n,i,n,i)},11:function(e,t,n,i){A(e,t,n,i),M(n,i,n,i)},2:A,4:function(e,t,n,i){A(e,t,n,i),O(n,i,n,i)}},6:{5:null,7:C,9:null,10:C,1:null,6:h,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:I,10:I,1:null,6:null,8:h,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:h,3:null,11:null,2:null,4:null},10:{5:h,7:h,9:h,10:h,1:T,6:x,8:v,0:null,3:g,11:M,2:h,4:O},11:{5:b,7:null,9:null,10:b,1:function(e,t,n,i){b(e,t,n,i),T(n,i,n,i)},6:null,8:null,0:null,3:function(e,t,n,i){b(e,t,n,i),g(n,i,n,i)},11:h,2:b,4:function(e,t,n,i){b(e,t,n,i),O(n,i,n,i)}}};function f(e,t){return d(e,t)?.projector}function d(e,t){if(null==e||null==t)return null;if(R.source.spatialReference===e&&R.dest.spatialReference===t)return R;const n=y(e,R.source),i=y(t,R.dest);return 0===n&&0===i?(0,p.aI)(e,t)?R.projector=h:R.projector=null:R.projector=c[n][i],R}function y(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,r.GA)(e,1)),(0,o.jA)(e)?t.spatialReferenceId=1:(0,p.oT)(e)?t.spatialReferenceId=2:(0,p.K8)(e)?t.spatialReferenceId=3:(0,p.r1)(e)?t.spatialReferenceId=11:e.wkt===o.Ro.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===o.FY.wkt?t.spatialReferenceId=6:e.wkt===o.LJ.wkt?t.spatialReferenceId=8:(0,p.q8)(e)?t.spatialReferenceId=7:(0,p.KQ)(e)?t.spatialReferenceId=9:t.spatialReferenceId=0):0}function h(e,t,n,i){e!==n&&(n[i++]=e[t++],n[i++]=e[t++],n[i]=e[t])}function m(e,t,n,i){n[i]=_*(e[t]/Z),n[i+1]=_*(j-2*Math.atan(Math.exp(-e[t+1]/Z))),n[i+2]=e[t+2]}function g(e,t,n,r){!function(e,t,n,r,o){const s=.4999999*Math.PI,l=(0,i.qE)(N*e[t+1],-s,s),a=Math.sin(l);n[r++]=N*e[t]*o.radius,n[r++]=o.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=e[t+2]}(e,t,n,r,s.$O)}function M(e,t,n,i){n[i]=e[t]*L,n[i+1]=e[t+1]*L,n[i+2]=e[t+2]}function b(e,t,n,i){n[i]=e[t]*P,n[i+1]=e[t+1]*P,n[i+2]=e[t+2]}function w(e,t,n,i,r){const o=r+e[t+2],s=N*e[t+1],l=N*e[t],a=Math.cos(s)*o;n[i]=Math.cos(l)*a,n[i+1]=Math.sin(l)*a,n[i+2]=Math.sin(s)*o}function v(e,t,n,i){w(e,t,n,i,s.Sw.radius)}function x(e,t,n,i){w(e,t,n,i,s.sH.radius)}function T(e,t,n,i){w(e,t,n,i,s.$O.radius)}function S(e,t,n,r,o){const s=e[t],l=e[t+1],a=e[t+2],u=Math.sqrt(s*s+l*l+a*a),p=(0,i.YN)(a/(0===u?1:u)),c=Math.atan2(l,s);n[r++]=_*c,n[r++]=_*p,n[r]=u-o}function I(e,t,n,i){S(e,t,n,i,s.Sw.radius)}function C(e,t,n,i){S(e,t,n,i,s.sH.radius)}function A(e,t,n,i){S(e,t,n,i,s.$O.radius)}function O(e,t,n,i){!function(e,t,n,i,r){const o=N*e[t],s=N*e[t+1],l=e[t+2],a=Math.sin(s),u=Math.cos(s),p=r.radius/Math.sqrt(1-r.eccentricitySquared*a*a);n[i++]=(p+l)*u*Math.cos(o),n[i++]=(p+l)*u*Math.sin(o),n[i++]=(p*(1-r.eccentricitySquared)+l)*a}(e,t,n,i,s.$O)}function F(e,t,n,i){const r=u,o=e[t],l=e[t+1],a=e[t+2];let p,c,f,d,y,h,m,g,M,b,w,v,x,T,S,I,C,A,O,F,R;p=Math.abs(a),c=o*o+l*l,f=Math.sqrt(c),d=c+a*a,y=Math.sqrt(d),F=Math.atan2(l,o),h=a*a/d,m=c/d,T=r.a2/y,S=r.a3-r.a4/y,m>.3?(g=p/y*(1+m*(r.a1+T+h*S)/y),O=Math.asin(g),b=g*g,M=Math.sqrt(1-b)):(M=f/y*(1-h*(r.a5-T-m*S)/y),O=Math.acos(M),b=1-M*M,g=Math.sqrt(b)),w=1-s.$O.eccentricitySquared*b,v=s.$O.radius/Math.sqrt(w),x=r.a6*v,T=f-v*M,S=p-x*g,C=M*T+g*S,I=M*S-g*T,A=I/(x/w+C),O+=A,R=C+I*A/2,a<0&&(O=-O),n[i++]=_*F,n[i++]=_*O,n[i]=R}const R={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:h},N=(0,i.kU)(1),_=(0,i.KJ)(1),j=.5*Math.PI,Z=s.$O.radius,L=Z*Math.PI/180,P=180/(Z*Math.PI)},41366:(e,t,n)=>{n.d(t,{K:()=>f,Q:()=>u});var i=n(31635),r=n(66552),o=n(53966),s=n(10107),l=(n(44208),n(87811),n(93223)),a=n(64108);const u=(0,r.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),p="percent-of-total",c="field",f=e=>{const t=e;let n=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&c||n&&p||null,t&&n&&o.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==c&&e!==p||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}};return(0,i.Cg)([(0,s.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],n.prototype,"normalizationField",void 0),(0,i.Cg)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],n.prototype,"normalizationMaxValue",void 0),(0,i.Cg)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],n.prototype,"normalizationMinValue",void 0),(0,i.Cg)([(0,s.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],n.prototype,"normalizationTotal",void 0),(0,i.Cg)([(0,l.e)(u,{name:"parameters.normalizationType"})],n.prototype,"normalizationType",null),n=(0,i.Cg)([(0,a.$)("esri.rest.support.NormalizationBinParametersMixin")],n),n}},45067:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(31635),r=n(69540),o=n(66552),s=n(25482),l=n(10107),a=(n(44208),n(53966),n(87811),n(64108));const u=new o.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),p=new o.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let c=class extends((0,r.OU)(s.o)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,i.Cg)([(0,l.MZ)({json:{read:u.read,write:u.write}})],c.prototype,"cardinality",void 0),(0,i.Cg)([(0,l.MZ)({json:{name:"catalogID"}})],c.prototype,"catalogId",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"composite",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"id",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyField",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"keyFieldInRelationshipTable",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"name",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"relatedTableId",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:!0,write:!0}})],c.prototype,"relationshipTableId",void 0),(0,i.Cg)([(0,l.MZ)({json:{read:p.read,write:p.write}})],c.prototype,"role",void 0),c=(0,i.Cg)([(0,a.$)("esri.layers.support.Relationship")],c)},50498:(e,t,n)=>{n.d(t,{Ye:()=>c,gy:()=>p,yR:()=>f});var i=n(66552),r=n(5443),o=n(91075),s=n(48526),l=n(86738),a=n(39829),u=n(82799);const p=(0,i.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),c=(0,i.O)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),f={base:o.A,key:"type",typeMap:{extent:r.A,multipoint:s.A,point:l.A,polyline:u.A,polygon:a.A}}},52106:(e,t,n)=>{n.d(t,{A:()=>x});var i,r=n(31635),o=n(37838),s=n(69540),l=n(51447),a=n(25482),u=n(53966),p=n(36708),c=n(24326),f=n(10107),d=(n(44208),n(87811),n(64108)),y=n(12195),h=n(65864),m=n(50498),g=n(55156),M=n(60950),b=n(54339),w=n(33910);function v(e){if(null==e)return null;const t={};for(const n in e){const i=e[n];i&&(t[n]=i.toJSON())}return 0!==Object.keys(t).length?t:null}let x=class extends((0,s.OU)(a.o)){static{i=this}constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:(0,c.c)(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&(0,l.eF)(u.A.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),"mesh"!==e?.type&&this._notifyLayer("geometry",t,e))}set popupTemplate(e){const t=this._get("popupTemplate");t!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new i({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=(0,M.E_)(this.origin);if(t)return t.popupTemplate??(e?t.defaultPopupTemplate:null)??null;const n=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const t of[n,this.sourceLayer,this.layer])if(t&&"object"==typeof t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&null!=t.defaultPopupTemplate)return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes={[e]:t}}getObjectId(){const e=(0,g.I)(this.origin);if(e)return(0,b.r)(this,e);const t=this.sourceLayer??this.layer;return t?(0,b.r)(this,t):null}getGlobalId(){const e=(0,g.I)(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const t=this.sourceLayer??this.layer;return t&&"globalIdField"in t&&t.globalIdField?this.getAttribute(t.globalIdField):null}toJSON(){return{aggregateGeometries:v(this.aggregateGeometries),geometry:null!=this.geometry?this.geometry.toJSON():null,symbol:null!=this.symbol?this.symbol.toJSON():null,attributes:(0,y.W)(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if("mesh"===t?.type){const n={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",n,n,e.action)}}_notifyLayer(e,t,n,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const r={graphic:this,property:e,oldValue:t,newValue:n};"origin-transform"===e&&(r.action=i),"attributes"===e&&(r.attributeName=i),this.layer.graphicChanged(r)}_watchMeshGeometryChanges(){this.addHandles([(0,p.z7)(()=>"mesh"===this.geometry?.type&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),(0,p.z7)(()=>"mesh"===this.geometry?.type?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;"mesh"===e?.type&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};(0,r.Cg)([(0,f.MZ)({value:null,json:{read:function(e){if(!e)return null;const t={};for(const n in e){const i=(0,h.rS)(e[n]);i&&(t[n]=i)}return 0!==Object.keys(t).length?t:null}}})],x.prototype,"aggregateGeometries",null),(0,r.Cg)([(0,f.MZ)({value:null})],x.prototype,"attributes",null),(0,r.Cg)([(0,f.MZ)({value:null,types:m.yR,json:{read:h.rS}})],x.prototype,"geometry",null),(0,r.Cg)([(0,f.MZ)({type:Boolean})],x.prototype,"isAggregate",void 0),(0,r.Cg)([(0,f.MZ)({clonable:!1})],x.prototype,"layer",void 0),(0,r.Cg)([(0,f.MZ)({clonable:"reference"})],x.prototype,"origin",void 0),(0,r.Cg)([(0,f.MZ)({type:o.A,value:null})],x.prototype,"popupTemplate",null),(0,r.Cg)([(0,f.MZ)({clonable:"reference"})],x.prototype,"sourceLayer",void 0),(0,r.Cg)([(0,f.MZ)({value:null,types:w.Es})],x.prototype,"symbol",null),(0,r.Cg)([(0,f.MZ)({clonable:!1,json:{read:!1,write:!1}})],x.prototype,"_version",void 0),(0,r.Cg)([(0,f.MZ)({type:Boolean,value:!0})],x.prototype,"visible",null),x=i=(0,r.Cg)([(0,d.$)("esri.Graphic")],x)},52136:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(31635),r=n(10107),o=(n(44208),n(53966),n(87811),n(64108));const s=e=>{const t=e;let n=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i.Cg)([(0,r.MZ)({type:String})],n.prototype,"apiKey",null),n=(0,i.Cg)([(0,o.$)("esri.layers.mixins.APIKeyMixin")],n),n}},54339:(e,t,n)=>{function i(e,t){switch(t.type){case"object-id":case"unique-id-simple":return e.attributes[t.fieldName];case"unique-id-composite":{const n=[];for(const i of t.fieldNames)n.push(e.attributes[i]??null);return JSON.stringify(n)}}}function r(e,t){if("uniqueIdFields"in t&&t.uniqueIdFields?.length){if(1===t.uniqueIdFields.length)return e.attributes?.[t.uniqueIdFields[0]];const n=t.uniqueIdFields.map(t=>e.attributes?.[t]);return JSON.stringify(n)}return"objectIdField"in t&&t.objectIdField?e.attributes?.[t.objectIdField]:null}n.d(t,{W:()=>i,r:()=>r})},55156:(e,t,n)=>{n.d(t,{I:()=>r,e:()=>i});const i=Symbol("idFieldsProviderSymbol");function r(e){return(t=e)&&i in t?e[i]:void 0;var t}},58501:(e,t,n)=>{n.d(t,{q:()=>r});var i=n(62815);function r(e,t,n){if(!n?.features||!n.hasZ)return;const r=(0,i.N)(n.geometryType,t,e.outSpatialReference);if(null!=r)for(const e of n.features)r(e.geometry)}},62815:(e,t,n)=>{n.d(t,{N:()=>s});var i=n(83047),r=n(73941),o=n(21325);function s(e,t,n){if(null==t||null==n||n.vcsWkid||(0,o.aI)(t,n)||(0,r.xP)(t)||(0,r.xP)(n))return null;const s=(0,i.G9)(t)/(0,i.G9)(n);if(1===s)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){null!=e?.z&&(e.z*=t)}(e,s);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const n of e.paths)for(const e of n)e.length>2&&(e[2]*=t)}(e,s);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const n of e.rings)for(const e of n)e.length>2&&(e[2]*=t)}(e,s);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}(e,s);case"extent":case"esriGeometryEnvelope":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,s);default:return null}}},69052:(e,t,n)=>{n.d(t,{hr:()=>r,ie:()=>a,uC:()=>l});var i=n(34727);class r{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e,t=0,n=!1){return o(this.range,this.min,this.max,e,t,n)}clamp(e,t=0){return(0,i.qE)(e-t,this.min,this.max)+t}monotonic(e,t,n){return e<t?t:t+s(this.range,e-t,n)}minimalMonotonic(e,t,n){return o(this.range,e,e+this.range,t,n)}center(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}diff(e,t,n){return this.monotonic(e,t,n)-e}shortestSignedDiff(e,t){e=this.normalize(e);const n=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(i)?n:i}contains(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}function o(e,t,n,i,r=0,o=!1){return(i-=r)<t?i+=s(e,t-i):i>n&&(i-=s(e,i-n)),o&&i===n&&(i=t),i+r}function s(e,t,n=0){return Math.ceil((t-n)/e)*e+n}const l=new r(0,2*Math.PI),a=(new r(-Math.PI,Math.PI),new r(0,360))},70328:(e,t,n)=>{n.d(t,{BI:()=>b,DC:()=>c,Ej:()=>d,Ie:()=>g,Jt:()=>M,Ne:()=>y,RF:()=>p,aI:()=>v,fA:()=>s,gE:()=>a,hZ:()=>m,iT:()=>f,is:()=>w,qv:()=>x,vI:()=>h,vY:()=>l,v_:()=>T,vt:()=>o,w1:()=>u});var i=n(5443),r=(n(19419),n(4197));function o(e=T){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function s(e,t,n,i,r,s,l=o()){return l[0]=e,l[1]=t,l[2]=n,l[3]=i,l[4]=r,l[5]=s,l}function l(e,t=o()){return function(e,t,n,i=o()){return m(i,x),function(e,t,n=0,i=t.length/3){let r=e[0],o=e[1],s=e[2],l=e[3],a=e[4],u=e[5];for(let e=0;e<i;e++)r=Math.min(r,t[n+3*e]),o=Math.min(o,t[n+3*e+1]),s=Math.min(s,t[n+3*e+2]),l=Math.max(l,t[n+3*e]),a=Math.max(a,t[n+3*e+1]),u=Math.max(u,t[n+3*e+2]);e[0]=r,e[1]=o,e[2]=s,e[3]=l,e[4]=a,e[5]=u}(i,e,t,n),i}(e,0,e.length/3,t)}function a(e,t=(0,r.jh)(24)){const[n,i,o,s,l,a]=e;return t[0]=n,t[1]=i,t[2]=o,t[3]=n,t[4]=i,t[5]=a,t[6]=n,t[7]=l,t[8]=o,t[9]=n,t[10]=l,t[11]=a,t[12]=s,t[13]=i,t[14]=o,t[15]=s,t[16]=i,t[17]=a,t[18]=s,t[19]=l,t[20]=o,t[21]=s,t[22]=l,t[23]=a,t}function u(e,t){const n=isFinite(e[2])||isFinite(e[5]);return new i.A(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function p(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function c(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function f(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function d(e,t=[0,0,0]){return t[0]=function(e){return e[0]>=e[3]?0:e[3]-e[0]}(e),t[1]=function(e){return e[1]>=e[4]?0:e[4]-e[1]}(e),t[2]=function(e){return e[2]>=e[5]?0:e[5]-e[2]}(e),t}function y(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function h(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function g(e){return e?m(e,x):o(x)}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function b(e,t,n,i,r){return e[0]=t,e[1]=n,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=r,e[5]=Number.POSITIVE_INFINITY,e}function w(e){return 6===e.length}function v(e,t,n){if(null==e||null==t)return e===t;if(!w(e)||!w(t))return!1;if(n){for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const x=[1/0,1/0,1/0,-1/0,-1/0,-1/0],T=[0,0,0,0,0,0];o()},80754:(e,t,n)=>{n.d(t,{j7:()=>s,kS:()=>a,kd:()=>l,r8:()=>u});var i=n(82799),r=n(16930),o=n(65864);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.A.WebMercator}),minus180Line:new i.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.A({paths:[[[180,-180],[180,180]]],spatialReference:r.A.WGS84}),minus180Line:new i.A({paths:[[[-180,-180],[-180,180]]],spatialReference:r.A.WGS84})}};function l(e,t){return Math.ceil((e-t)/(2*t))}function a(e,t){const n=u(e);for(const e of n)for(const n of e)n[0]+=t;return e}function u(e){return(0,o.Bi)(e)?e.rings:e.paths}},91218:(e,t,n)=>{n.r(t),n.d(t,{canProjectWithoutEngine:()=>B,initializeProjection:()=>U,isEqualBaseGCS:()=>D,isLoaded:()=>R,isLoadedOrLoad:()=>N,isLoadedOrLoadFor:()=>_,load:()=>Z,project:()=>L,projectExtent:()=>ne,projectMany:()=>P,projectMultipoint:()=>H,projectOrLoad:()=>z,projectOrLoadMany:()=>k,projectPoint:()=>K,projectPolygon:()=>ee,projectPolyline:()=>Y,projectWithZConversion:()=>$,projectWithoutEngine:()=>W,requiresLoad:()=>j,test:()=>q,tryProjectWithZConversion:()=>E,unload:()=>J});var i=n(49186),r=n(74887),o=n(62788),s=n(95488),l=n(51850),a=n(21276),u=n(73941),p=n(5443),c=n(91075),f=n(48526),d=n(86738),y=n(39829),h=n(82799),m=n(16930),g=n(159),M=n(9762),b=n(37539);function w(e,t,n,i,r,o){return v[0]=e,v[1]=t,v[2]=n,(0,M.projectBuffer)(v,i,0,r,o,0)}const v=(0,l.vt)();var x=n(21325),T=n(62815);let S=null,I=null,C=null,A=null,O={};const F=new s.I;function R(){return!!(I?.isLoaded()&&C?.isLoaded()&&A?.isLoaded())}function N(){return!!R()||((0,o.gc)(F),Z(),!1)}function _(e,t){return!e||!t||B(e,t)||N()}function j(e,t){return!B(e,t)&&!R()}async function Z(e){null==S&&(S=Promise.all([n.e(3276).then(n.bind(n,83276)).then(e=>(I=e,I.load())),n.e(8377).then(n.bind(n,8377)).then(e=>(C=e,C.load())),n.e(2158).then(n.bind(n,12158)).then(e=>(A=e,A.load()))])),await S,(0,r.Te)(e),F.notify()}function L(e,t,n){return Array.isArray(e)?0===e.length?[]:((0,a.H)(e),P(e,e[0].spatialReference,t,n)):((0,a.f)(e),P([e],e.spatialReference,t,n)[0])}function P(e,t,n,i){if(null==t||null==n)return e;if(B(t,n,i))return e.map(e=>W(e,t,n));if(null==i?.geographicTransformation&&(0,u.jA)(t))return e.map(e=>W(e,t,m.A.WGS84)).map(e=>E(e,n));if(null==i?.geographicTransformation&&(0,u.jA)(n))return e.map(e=>E(e,m.A.WGS84)).map(e=>W(e,m.A.WGS84,n));if(!R())throw new G;if(!i?.geographicTransformation)if(i?.extendedParams)i={...i,geographicTransformation:A.getTransformation(t,n,i.areaOfInterestExtent)||new g.A};else if(!i?.areaOfInterestExtent){const e=function(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}(t,n);let r=O[e];r||(r=A.getTransformation(t,n)||new g.A,O[e]=r),i={geographicTransformation:r}}return e[0].spatialReference||(e[0].spatialReference=t),e[0]instanceof c.A?I.executeMany(e,n,i):C.executeMany(e,n,i)}function z(e,t){const n=k([e],t);return null!=n.pending?{pending:n.pending,geometry:null}:null!=n.geometries?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function k(e,t){if(!R())for(const n of e)if(null!=n&&!(0,x.aI)(n.spatialReference,t)&&(0,x.fn)(n.spatialReference)&&(0,x.fn)(t)&&!B(n.spatialReference,t))return(0,o.gc)(F),{pending:Z(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:(0,x.aI)(e.spatialReference,t)?e:(0,x.fn)(e.spatialReference)&&(0,x.fn)(t)?E(e,t):null)}}class G extends i.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function J(){S=null,I=null,C=null,A=null,O={}}const q={get loadPromise(){return S}};function E(e,t){try{const n=L(e,t);if(null==n)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const i=(0,T.N)(n.type,e.spatialReference,t);return null!=i&&i(n),n}catch(e){if(!(e instanceof G))throw e;return null}}async function $(e,t,n){const i=e.spatialReference;return null!=i&&null!=t&&await U(i,t,null,n),E(e,t)}function B(e,t,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!(0,x.aI)(e,t)||(0,x.fn)(e)&&(0,x.fn)(t)&&!!(0,b.jd)(e,t))}function D(e,t){if((0,x.aI)(e,t))return!0;if(!(0,x.fn)(e)||!(0,x.fn)(t))return!1;const n=(0,x.oT)(e)||(0,x.K8)(e)||(0,x.x1)(e),i=(0,x.oT)(t)||(0,x.K8)(t)||(0,x.x1)(t);return n&&i}async function U(e,t,n,i){if(R())return(0,r.NO)(i);if(Array.isArray(e)){for(const{source:t,dest:n,options:r}of e)if(t&&n&&!B(t,n,r))return Z(i)}else if(e&&t&&!B(e,t,n))return Z(i);return(0,r.NO)(i)}function W(e,t,n){return e?"x"in e?V(e,t,new d.A,n,0):"xmin"in e?ie(e,t,new p.A,n,0):"rings"in e?te(e,t,new y.A,n,0):"paths"in e?Q(e,t,new h.A,n,0):"points"in e?X(e,t,new f.A,n,0):null:null}function K(e,t,n=t.spatialReference,i=0){return null!=n&&null!=e.spatialReference&&null!=V(e,e.spatialReference,t,n,i)}function V(e,t,n,i,r){oe[0]=e.x,oe[1]=e.y;const o=e.z;return oe[2]=void 0!==o?o:r,(0,M.projectBuffer)(oe,t,0,oe,i,0)?(n.x=oe[0],n.y=oe[1],n.spatialReference=i,void 0!==o||(0,u.xP)(i)?(n.z=oe[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),void 0===e.m?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function H(e,t,n=t.spatialReference,i=0){return null!=e.spatialReference&&null!=n&&null!=X(e,e.spatialReference,t,n,i)}function X(e,t,n,i,r){const{points:o,hasZ:s,hasM:l}=e,a=[],p=o.length,c=[];for(const e of o)c.push(e[0],e[1],s?e[2]:r);if(!(0,M.projectBuffer)(c,t,0,c,i,0,p))return null;const f=s||(0,u.xP)(i);for(let e=0;e<p;++e){const t=3*e,n=c[t],i=c[t+1];f&&l?a.push([n,i,c[t+2],o[e][3]]):f?a.push([n,i,c[t+2]]):l?a.push([n,i,o[e][2]]):a.push([n,i])}return n.points=a,n.spatialReference=i,n.hasZ=s,n.hasM=l,n}function Y(e,t,n=t.spatialReference,i=0){return null!=e.spatialReference&&null!=n&&null!=Q(e,e.spatialReference,t,n,i)}function Q(e,t,n,i,r){const{paths:o,hasZ:s,hasM:l}=e,a=[];if(!re(o,s??!1,l??!1,t,a,i,r))return null;const p=s||(0,u.xP)(i);return n.paths=a,n.spatialReference=i,n.hasZ=p,n.hasM=l,n}function ee(e,t,n=t.spatialReference,i=0){return null!=e.spatialReference&&null!=n&&null!=te(e,e.spatialReference,t,n,i)}function te(e,t,n,i,r){const{rings:o,hasZ:s,hasM:l}=e,a=[];if(!re(o,s??!1,l??!1,t,a,i,r))return null;const p=s||(0,u.xP)(i);return n.rings=a,n.spatialReference=i,n.hasZ=p,n.hasM=l,n}function ne(e,t,n=t.spatialReference,i=0){return null!=e.spatialReference&&null!=n&&null!=ie(e,e.spatialReference,t,n,i)}function ie(e,t,n,i,r){const{xmin:o,ymin:s,xmax:l,ymax:a,hasZ:p,hasM:c}=e;if(!w(o,s,p?e.zmin:r,t,oe,i))return null;const f=p||(0,u.xP)(i);return n.xmin=oe[0],n.ymin=oe[1],f&&(n.zmin=oe[2]),w(l,a,p?e.zmax:r,t,oe,i)?(n.xmax=oe[0],n.ymax=oe[1],f&&(n.zmax=oe[2]),c&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=i,n):null}function re(e,t,n,i,r,o,s=0){const l=new Array;for(const n of e)for(const e of n)l.push(e[0],e[1],t?e[2]:s);if(!(0,M.projectBuffer)(l,i,0,l,o,0))return!1;let a=0;r.length=0;const p=t||(0,u.xP)(o);for(const t of e){const e=new Array;for(const i of t)p&&n?e.push([l[a++],l[a++],l[a++],i[3]]):p?e.push([l[a++],l[a++],l[a++]]):n?(e.push([l[a++],l[a++],i[2]]),a++):(e.push([l[a++],l[a++]]),a++);r.push(e)}return!0}const oe=(0,l.vt)()},92300:(e,t,n)=>{n.d(t,{V:()=>o,X:()=>r});var i=n(65864);function r(e){return{geometryType:(0,i.$B)(e[0]),geometries:e.map(e=>e.toJSON())}}function o(e,t,n){const r=(0,i.xD)(t);return e.map(e=>{const t=r.fromJSON(e);return t.spatialReference=n,t})}},95466:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(49186),r=n(53966),o=n(91869),s=n(3330),l=n(12195),a=n(30524),u=n(98623),p=n(56400),c=n(28097);const f=new Map;class d{static fromJSON(e){return new d(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new d(e.fields??[],g(e))}static fromLayerJSON(e){return new d(e.fields??[],g(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const n=[];for(const e of this.fields){const t=e?.name,i=h(t);if(t&&i){const r=y(t);this._fieldsMap.set(t,e),this._fieldsMap.set(r,e),this._normalizedFieldsMap.set(i,e),n.push(`${r}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,a.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,a.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,a.te)(e)||(0,a.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,a.te)(e)||(0,a.Xz)(e)||e.nullable||void 0!==(0,a.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(h(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(r.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):m.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?s.GB.instance:t===u.n$?c.mQ.utcInstance:(0,o.tE)(f,t,()=>c.oh.create(t)):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map(e=>(0,l.W)(e)?e.toJSON():e),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function h(e){return(0,a.rS)(e)?.toLowerCase()??""}const m=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function g(e){const t=new Map;if(!e.fields)return t;const n=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:r}=e,o=(i?"startField"in i?i.startField:i.startTimeField:"")??"",s=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,p.ZS)(e.dateFieldsTimeReference):null,a=r?function(e){return"timeZone"in e}(r)?r.timeZone??l:r.dateFieldsTimeReference?(0,p.ZS)(r.dateFieldsTimeReference):l??u.n$:null,c=i?function(e){return"timeZone"in e}(i)?i.timeZone??l:i.timeReference?(0,p.ZS)(i.timeReference):l:null,f=new Map([[y(r?.creationDateField??""),a],[y(r?.editDateField??""),a],[y(o),c],[y(s),c]]);for(const{name:i,type:r}of e.fields)if(m.has(r))t.set(i,u.L5);else if("date"!==r&&"esriFieldTypeDate"!==r)t.set(i,null);else if(n)t.set(i,u.L5);else{const e=f.get(y(i??""))??l;t.set(i,e)}return t}},96299:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var i=n(31635),r=n(52106),o=n(7762),s=n(49186),l=n(4718),a=n(92071),u=n(93637),p=n(67076),c=n(10107),f=(n(44208),n(53966),n(36005)),d=n(64108),y=n(43937),h=n(5443),m=n(91218),g=n(16930),M=n(19419),b=n(17136),w=n(21325),v=n(89808),x=n(99959);const T=Symbol("isMapNotesGraphicOriginSymbol");var S;class I extends x.A{get[(S=T,v.Q)](){return this.layer}constructor(e,t){super(),this[S]=!0,this.type="map-notes",this.layer=e,this.sublayer=t}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}}var C=n(68654),A=n(94194),O=n(4146),F=n(33032),R=n(63074),N=n(16131),_=n(8303),j=n(25036),Z=n(20437),L=n(94985),P=n(31593),z=n(53930),k=n(68249);function G(e){return"markup"===e.featureCollectionType||e.layers.some(e=>null!=e.layerDefinition.visibilityField||!J(e))}function J({layerDefinition:e,featureSet:t}){const n=e.geometryType??t.geometryType;return B.find(t=>n===t.geometryTypeJSON&&e.drawingInfo?.renderer?.symbol?.type===t.identifyingSymbol.type)}function q(){return new h.A({xmin:-180,ymin:-90,xmax:180,ymax:90})}const E=new Z.A({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),$=new Z.A({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0,length:255}),B=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",id:"polygonLayer",layerId:0,title:"Polygons",identifyingSymbol:(new L.A).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",id:"polylineLayer",layerId:1,title:"Polylines",identifyingSymbol:(new P.A).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",id:"multipointLayer",layerId:2,title:"Multipoints",identifyingSymbol:(new z.A).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"pointLayer",layerId:3,title:"Points",identifyingSymbol:(new z.A).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"textLayer",layerId:4,title:"Text",identifyingSymbol:(new k.A).toJSON()}];let D=class extends((0,R.dM)((0,j.j)((0,N.q)((0,_.A)((0,a.P)(O.A)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType="notes",this.legendEnabled=!1,this.listMode="hide-children",this.minScale=0,this.maxScale=0,this.spatialReference=g.A.WGS84,this.sublayers=new o.A(B.map(e=>new U({id:e.id,layerId:e.layerId,title:e.title,layer:this}))),this.title="Map Notes",this.type="map-notes",this.visibilityMode="inherited"}readCapabilities(e,t,n){return{operations:{supportsMapNotesEditing:!G(t)&&"portal-item"!==n?.origin}}}readFeatureCollections(e,t,n){if(!G(t))return null;const i=t.layers.map(e=>{const t=new C.default;return t.read(e,n),t});return new o.A({items:i})}readLegacyfeatureCollectionJSON(e,t){return G(t)?(0,l.o8)(t.featureCollection):null}get fullExtent(){const e=this.spatialReference,t=(0,M.Ie)();return null!=this.sublayers?this.sublayers.forEach(({fullBounds:e})=>null!=e?(0,M.fT)(t,e,t):t,t):this.featureCollectionJSON?.layers.some(e=>e.layerDefinition.extent)&&this.featureCollectionJSON.layers.forEach(n=>{const i=(0,m.projectOrLoad)(n.layerDefinition.extent,e).geometry;null!=i&&(0,M.fT)(t,i,t)}),(0,M.aI)(t,M.qv)?(0,m.projectOrLoad)(q(),e).geometry:(0,M.w1)(t,e)}readMinScale(e,t){for(const e of t.layers)if(null!=e.layerDefinition.minScale)return e.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const e of t.layers)if(null!=e.layerDefinition.maxScale)return e.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer("multipointLayer")}get pointLayer(){return this._findSublayer("pointLayer")}get polygonLayer(){return this._findSublayer("polygonLayer")}get polylineLayer(){return this._findSublayer("polylineLayer")}readSpatialReference(e,t){return t.layers.length?g.A.fromJSON(t.layers[0].layerDefinition.spatialReference):g.A.WGS84}readSublayers(e,t,n){if(G(t))return null;const i=[];let s=t.layers.reduce((e,t)=>Math.max(e,t.layerDefinition.id??-1),-1)+1;for(const e of t.layers){const{layerDefinition:t,featureSet:n}=e,o=t.id??s++,l=J(e);if(null!=l){const e=new U({id:l.id,title:t.name,layerId:o,layer:this,graphics:n.features.map(({geometry:e,symbol:t,attributes:n,popupInfo:i})=>r.A.fromJSON({attributes:n,geometry:e,symbol:t,popupTemplate:i}))});i.push(e)}}return new o.A(i)}writeSublayers(e,t,n,i){const{minScale:r,maxScale:o}=this;if(null==e)return;const l=e.some(e=>e.graphics.length>0);if(!this.capabilities.operations.supportsMapNotesEditing)return void(l&&i?.messages?.push(new s.A("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")));const a=[];let p=this.spatialReference.toJSON();e:for(const t of e)for(const e of t.graphics)if(null!=e.geometry){p=e.geometry.spatialReference.toJSON();break e}for(const t of B){const n=e.find(e=>t.id===e.id);this._writeMapNoteSublayer(a,n,t,r,o,p,i)}(0,u.sM)("featureCollection.layers",a,t)}get textLayer(){return this._findSublayer("textLayer")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}read(e,t){"featureCollection"in e&&(e=(0,l.o8)(e),Object.assign(e,e.featureCollection)),super.read(e,t)}async beforeSave(){if(null==this.sublayers)return;let e=null;const t=[];for(const n of this.sublayers)for(const i of n.graphics)if(null!=i.geometry){const n=i.geometry;e?(0,w.aI)(n.spatialReference,e)||((0,m.canProjectWithoutEngine)(n.spatialReference,e)||(0,m.isLoaded)()||await(0,m.load)(),i.geometry=(0,m.project)(n,e)):e=n.spatialReference,t.push(i)}const n=await(0,b.el)(t.map(e=>e.geometry));t.forEach((e,t)=>e.geometry=n[t])}_findSublayer(e){return null==this.sublayers?null:this.sublayers?.find(t=>t.id===e)??null}_writeMapNoteSublayer(e,t,n,i,r,o,s){const a=[];if(null!=t){for(const e of t.graphics)this._writeMapNote(a,e,n.geometryType,s);this._normalizeObjectIds(a,E),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:(0,l.o8)(n.identifyingSymbol)}},id:t.layerId,geometryType:n.geometryTypeJSON,minScale:i,maxScale:r,objectIdField:"OBJECTID",fields:[E.toJSON(),$.toJSON()],spatialReference:o},featureSet:{features:a,geometryType:n.geometryTypeJSON}})}}_writeMapNote(e,t,n,i){if(null==t)return;const{geometry:r,symbol:o,popupTemplate:s}=t;if(null==r)return;if(r.type!==n)return void i?.messages?.push(new p.A("map-notes-layer:invalid-geometry-type",`Geometry "${r.type}" cannot be saved in "${n}" layer`,{graphic:t}));if(null==o)return void i?.messages?.push(new p.A("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));const l={attributes:{...t.attributes},geometry:r.toJSON(),symbol:o.toJSON()};null!=s&&(l.popupInfo=s.toJSON()),e.push(l)}_normalizeObjectIds(e,t){const n=t.name;let i=(0,F.H)(n,e)+1;const r=new Set;for(const t of e){t.attributes||(t.attributes={});const{attributes:e}=t;(null==e[n]||r.has(e[n]))&&(e[n]=i++),r.add(e[n])}}};(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"capabilities",void 0),(0,i.Cg)([(0,f.w)(["portal-item","web-map"],"capabilities",["layers"])],D.prototype,"readCapabilities",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"featureCollections",void 0),(0,i.Cg)([(0,f.w)(["web-map","portal-item"],"featureCollections",["layers"])],D.prototype,"readFeatureCollections",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],D.prototype,"featureCollectionJSON",void 0),(0,i.Cg)([(0,f.w)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],D.prototype,"readLegacyfeatureCollectionJSON",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0,json:{read:!0,write:{enabled:!0,ignoreOrigin:!0}}})],D.prototype,"featureCollectionType",void 0),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"fullExtent",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],D.prototype,"legendEnabled",void 0),(0,i.Cg)([(0,c.MZ)({type:["show","hide","hide-children"]})],D.prototype,"listMode",void 0),(0,i.Cg)([(0,c.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],D.prototype,"minScale",void 0),(0,i.Cg)([(0,f.w)(["web-map","portal-item"],"minScale",["layers"])],D.prototype,"readMinScale",null),(0,i.Cg)([(0,c.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],D.prototype,"maxScale",void 0),(0,i.Cg)([(0,f.w)(["web-map","portal-item"],"maxScale",["layers"])],D.prototype,"readMaxScale",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"multipointLayer",null),(0,i.Cg)([(0,c.MZ)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],D.prototype,"operationalLayerType",void 0),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"pointLayer",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"polygonLayer",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"polylineLayer",null),(0,i.Cg)([(0,c.MZ)({type:g.A})],D.prototype,"spatialReference",void 0),(0,i.Cg)([(0,f.w)(["web-map","portal-item"],"spatialReference",["layers"])],D.prototype,"readSpatialReference",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],D.prototype,"sublayers",void 0),(0,i.Cg)([(0,f.w)("web-map","sublayers",["layers"])],D.prototype,"readSublayers",null),(0,i.Cg)([(0,y.K)("web-map","sublayers")],D.prototype,"writeSublayers",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],D.prototype,"textLayer",null),(0,i.Cg)([(0,c.MZ)()],D.prototype,"title",void 0),(0,i.Cg)([(0,c.MZ)({readOnly:!0,json:{read:!1}})],D.prototype,"type",void 0),D=(0,i.Cg)([(0,d.$)("esri.layers.MapNotesLayer")],D);let U=class extends A.A{constructor(e){super(e),this.visibilityMode="inherited"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on("after-add",e=>{e.item.sourceLayer=this.layer,e.item.origin=this.graphicOrigin}),this.graphics.on("after-remove",e=>{e.item.sourceLayer=null,e.item.origin=null})}get fullExtent(){const e=this.layer?.spatialReference,t=this.fullBounds;return e?null==t?(0,m.projectOrLoad)(q(),e).geometry:(0,M.w1)(t,e):null}get fullBounds(){const e=this.layer?.spatialReference;if(!e)return null;const t=(0,M.Ie)();return this.graphics.forEach(n=>{const i=null!=n.geometry?(0,m.projectOrLoad)(n.geometry,e).geometry:null;null!=i&&(0,M.fT)(t,"point"===i.type?i:i.extent,t)}),(0,M.aI)(t,M.qv)?null:t}get graphicOrigin(){return new I(this.layer,this)}get sublayers(){return this.graphics}};(0,i.Cg)([(0,c.MZ)({readOnly:!0})],U.prototype,"fullExtent",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],U.prototype,"fullBounds",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],U.prototype,"graphicOrigin",null),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],U.prototype,"sublayers",null),(0,i.Cg)([(0,c.MZ)()],U.prototype,"layer",void 0),(0,i.Cg)([(0,c.MZ)()],U.prototype,"layerId",void 0),(0,i.Cg)([(0,c.MZ)({readOnly:!0})],U.prototype,"visibilityMode",void 0),U=(0,i.Cg)([(0,d.$)("esri.layers.MapNotesLayer.MapNotesSublayer")],U);const W=D},99157:(e,t,n)=>{n.d(t,{A:()=>a});var i,r=n(31635),o=n(65008),s=n(10107),l=(n(44208),n(53966),n(87811),n(64108));let a=i=class extends o.A{constructor(e){super(e),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new i({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};(0,r.Cg)([(0,s.MZ)()],a.prototype,"isInverse",void 0),(0,r.Cg)([(0,s.MZ)()],a.prototype,"wkt",void 0),(0,r.Cg)([(0,s.MZ)()],a.prototype,"wkid",void 0),a=i=(0,r.Cg)([(0,l.$)("esri.geometry.operators.support.GeographicTransformationStep")],a)}}]);