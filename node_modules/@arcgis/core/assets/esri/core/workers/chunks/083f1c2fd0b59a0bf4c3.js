"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[146],{146:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(31635),i=n(49186),s=n(92071),l=n(96211),o=n(10107),a=(n(44208),n(53966),n(87811),n(64108)),u=n(4146),c=n(8303);let p=class extends((0,c.A)((0,s.P)(u.A))){constructor(e){super(e),this.resourceInfo=null,this.type="unknown"}initialize(){this.addResolvingPromise(new Promise((e,t)=>{(0,l._)(()=>{const e=this.resourceInfo&&(this.resourceInfo.layerType||this.resourceInfo.type);let n="Unknown layer type";e&&(n+=" "+e),t(new i.A("layer:unknown-layer-type",n,{layerType:e}))})}))}read(e,t){super.read({resourceInfo:e},t)}write(e,t){return null}};(0,r.Cg)([(0,o.MZ)({readOnly:!0})],p.prototype,"resourceInfo",void 0),(0,r.Cg)([(0,o.MZ)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,r.Cg)([(0,o.MZ)({json:{read:!1},readOnly:!0,value:"unknown"})],p.prototype,"type",void 0),p=(0,r.Cg)([(0,a.$)("esri.layers.UnknownLayer")],p);const f=p},159:(e,t,n)=>{n.d(t,{A:()=>u});var r,i=n(31635),s=n(65008),l=n(10107),o=(n(44208),n(53966),n(87811),n(64108)),a=n(99157);let u=r=class extends s.A{constructor(e){super(e),this.steps=[]}getInverse(){const e=new r;for(let t=this.steps.length-1;t>=0;t--){const n=this.steps[t];e.steps.push(n.getInverse())}return e}};(0,i.Cg)([(0,l.MZ)({type:[a.A],nonNullable:!0})],u.prototype,"steps",void 0),u=r=(0,i.Cg)([(0,o.$)("esri.geometry.operators.support.GeographicTransformation")],u)},8303:(e,t,n)=>{n.d(t,{A:()=>_});var r=n(31635),i=n(92602),s=n(70333),l=n(78888),o=n(60999),a=n(49186),u=n(53966),c=n(97768),p=n(74887),f=n(84952),h=n(10107),d=(n(44208),n(87811),n(36005)),g=n(64108),y=n(43937),m=n(77548),v=n(20655),w=n(80812),M=n(41318),I=n(10407);const _=e=>{const t=e;let _=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,n){if(t.itemId)return new w.default({id:t.itemId,portal:n?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:r}=await n.e(1204).then(n.bind(n,41204));return(0,p.Te)(t),await r({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(e){throw(0,p.zf)(e)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(e=>((0,p.QP)(e),!0)))}async setUserPrivileges(e,t){if(!i.A.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:n,fullEdit:r},content:{updateItem:i}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",i)}catch(e){(0,p.QP)(e)}}async _fetchUserPrivileges(e,t){let n=this.portalItem;if(!e||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(t);const r=!s.id?.findCredential(this.url),i=e===n.id;if(i&&n.portal.user)return this._getUserPrivileges(n,r);let l,o;if(i)l=n.portal.url;else try{l=await(0,m.wI)(this.url,t)}catch(e){(0,p.QP)(e)}if(!l||!(0,f.b8)(l,n.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;o=await(s.id?.getCredential(`${l}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,p.QP)(e)}const a=!0,u=!1,c=!1;if(!o)return{features:{edit:a,fullEdit:u},content:{updateItem:c}};try{if(i?await n.reload():(n=new w.default({id:e,portal:{url:l}}),await n.load(t)),n.portal.user)return this._getUserPrivileges(n,r)}catch(e){(0,p.QP)(e)}return{features:{edit:a,fullEdit:u},content:{updateItem:c}}}_getUserPrivileges(e,t){const n=(0,I.It)(e);return t&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,p.QP)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?s.id?.findCredential(this.url):null;if(!t)return!0;const n=P.credential===t?P.user:await this._fetchEditingUser(e);return P.credential=t,P.user=n,null==n?.privileges||n.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const n=s.id?.findServerInfo(this.url??"");if(!n?.owningSystemUrl)return null;const r=`${n.owningSystemUrl}/sharing/rest`,i=v.A.getDefault();if(i&&i.loaded&&(0,f.S8)(i.restUrl)===(0,f.S8)(r))return i.user;const a=`${r}/community/self`,u=null!=e?e.signal:null,c=await(0,o.Ke)((0,l.A)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?M.A.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const n=t?.portal,r=this.portalItem?.id&&(this.portalItem.portal||v.A.getDefault());return n&&r&&!(0,f.ut)(r.restUrl,n.restUrl)?(t.messages&&t.messages.push(new a.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r.Cg)([(0,h.MZ)({type:w.default})],_.prototype,"portalItem",null),(0,r.Cg)([(0,d.w)("web-document","portalItem",["itemId"])],_.prototype,"readPortalItem",null),(0,r.Cg)([(0,y.K)("web-document","portalItem",{itemId:{type:String}})],_.prototype,"writePortalItem",null),(0,r.Cg)([(0,h.MZ)({clonable:!1})],_.prototype,"resourceReferences",void 0),(0,r.Cg)([(0,h.MZ)({type:Boolean,readOnly:!0})],_.prototype,"userHasEditingPrivileges",void 0),(0,r.Cg)([(0,h.MZ)({type:Boolean,readOnly:!0})],_.prototype,"userHasFullEditingPrivileges",void 0),(0,r.Cg)([(0,h.MZ)({type:Boolean,readOnly:!0})],_.prototype,"userHasUpdateItemPrivileges",void 0),_=(0,r.Cg)([(0,g.$)("esri.layers.mixins.PortalLayer")],_),_},P={credential:null,user:null}},9762:(e,t,n)=>{n.r(t),n.d(t,{projectBuffer:()=>i});var r=n(37539);function i(e,t,n,i,s,l,o=Math.floor(e.length/3)){const a=(0,r.jd)(t,s);if(null==a)return!1;if(a===r.pO){if(e===i&&n===l)return!0;const t=n+3*o;for(let r=n,s=l;r<t;r++,s++)i[s]=e[r];return!0}const u=n+3*o;for(let t=n,r=l;t<u;t+=3,r+=3)a(e,t,i,r);return!0}},10407:(e,t,n)=>{n.d(t,{It:()=>h,LG:()=>l,OM:()=>u,Sm:()=>c,Y:()=>o,bK:()=>a,mm:()=>f,sQ:()=>p});var r=n(91218),i=n(16930),s=n(28735);function l(e,t){if(!o(e,t)){const n=e.typeKeywords;n?n.push(t):e.typeKeywords=[t]}}function o(e,t){return!!e.typeKeywords?.includes(t)}function a(e){return o(e,f.HOSTED_SERVICE)}function u(e,t){const n=e.typeKeywords;if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}function c(e,t,n){n?l(e,t):u(e,t)}async function p(e){const t=e.clone().normalize();let n;if(t.length>1)for(const e of t)n?e.width>n.width&&(n=e):n=e;else n=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,s.ci)(e);const n=i.A.WGS84;return await(0,r.initializeProjection)(t,n),(0,r.project)(e,n)}(n)}const f={CHARTS:"Charts",DYNAMIC:"Dynamic",DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function h(e){const{portal:t,isOrgItem:n,itemControl:r}=e,i=t.user?.privileges;let s=!i||i.includes("features:user:edit"),l=!!n&&!!i?.includes("features:user:fullEdit");const o="update"===r||"admin"===r;return o?l=s=!0:l&&(s=!0),{features:{edit:s,fullEdit:l},content:{updateItem:o}}}},37539:(e,t,n)=>{n.d(t,{pO:()=>g,jd:()=>f,Tp:()=>h,w5:()=>p});var r=n(34727),i=n(83047),s=n(73941),l=n(79258);Math.PI;const o=l.$O.radius,a=l.$O.eccentricitySquared,u={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a};l.$O.radius,l.$O.flattening,l.Sw.radius,l.Sw.flattening,l.sH.radius,l.sH.flattening,l.sH.radius;var c=n(21325);const p={2:{5:g,7:null,9:null,10:g,1:P,6:null,8:null,0:null,3:m,11:v,2:g,4:E},5:{5:g,7:null,9:null,10:g,1:P,6:null,8:null,0:null,3:m,11:v,2:g,4:E},7:{5:null,7:g,9:null,10:g,1:null,6:_,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:g,10:g,1:null,6:null,8:I,0:null,3:null,11:null,2:null,4:null},3:{5:y,7:null,9:null,10:y,1:function(e,t,n,r){const i=e[t]/b,s=T-2*Math.atan(Math.exp(-e[t+1]/b)),l=b+e[t+2],o=Math.cos(s)*l;n[r]=Math.cos(i)*o,n[r+1]=Math.sin(i)*o,n[r+2]=Math.sin(s)*l},6:null,8:null,0:null,3:g,11:function(e,t,n,r){y(e,t,n,r),v(n,r,n,r)},2:y,4:function(e,t,n,r){y(e,t,n,r),E(n,r,n,r)}},4:{5:x,7:null,9:null,10:x,1:function(e,t,n,r){x(e,t,n,r),P(n,r,n,r)},6:null,8:null,0:null,3:function(e,t,n,r){x(e,t,n,r),m(n,r,n,r)},11:function(e,t,n,r){x(e,t,n,r),v(n,r,n,r)},2:x,4:g},1:{5:S,7:null,9:null,10:S,1:g,6:null,8:null,0:null,3:function(e,t,n,r){S(e,t,n,r),m(n,r,n,r)},11:function(e,t,n,r){S(e,t,n,r),v(n,r,n,r)},2:S,4:function(e,t,n,r){S(e,t,n,r),E(n,r,n,r)}},6:{5:null,7:A,9:null,10:A,1:null,6:g,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:R,10:R,1:null,6:null,8:g,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:g,3:null,11:null,2:null,4:null},10:{5:g,7:g,9:g,10:g,1:P,6:_,8:I,0:null,3:m,11:v,2:g,4:E},11:{5:w,7:null,9:null,10:w,1:function(e,t,n,r){w(e,t,n,r),P(n,r,n,r)},6:null,8:null,0:null,3:function(e,t,n,r){w(e,t,n,r),m(n,r,n,r)},11:g,2:w,4:function(e,t,n,r){w(e,t,n,r),E(n,r,n,r)}}};function f(e,t){return h(e,t)?.projector}function h(e,t){if(null==e||null==t)return null;if(C.source.spatialReference===e&&C.dest.spatialReference===t)return C;const n=d(e,C.source),r=d(t,C.dest);return 0===n&&0===r?(0,c.aI)(e,t)?C.projector=g:C.projector=null:C.projector=p[n][r],C}function d(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,i.GA)(e,1)),(0,s.jA)(e)?t.spatialReferenceId=1:(0,c.oT)(e)?t.spatialReferenceId=2:(0,c.K8)(e)?t.spatialReferenceId=3:(0,c.r1)(e)?t.spatialReferenceId=11:e.wkt===s.Ro.wkt?t.spatialReferenceId=4:4490===e.wkid?t.spatialReferenceId=5:e.wkt===s.FY.wkt?t.spatialReferenceId=6:e.wkt===s.LJ.wkt?t.spatialReferenceId=8:(0,c.q8)(e)?t.spatialReferenceId=7:(0,c.KQ)(e)?t.spatialReferenceId=9:t.spatialReferenceId=0):0}function g(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function y(e,t,n,r){n[r]=L*(e[t]/b),n[r+1]=L*(T-2*Math.atan(Math.exp(-e[t+1]/b))),n[r+2]=e[t+2]}function m(e,t,n,i){!function(e,t,n,i,s){const l=.4999999*Math.PI,o=(0,r.qE)(k*e[t+1],-l,l),a=Math.sin(o);n[i++]=k*e[t]*s.radius,n[i++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[i]=e[t+2]}(e,t,n,i,l.$O)}function v(e,t,n,r){n[r]=e[t]*U,n[r+1]=e[t+1]*U,n[r+2]=e[t+2]}function w(e,t,n,r){n[r]=e[t]*j,n[r+1]=e[t+1]*j,n[r+2]=e[t+2]}function M(e,t,n,r,i){const s=i+e[t+2],l=k*e[t+1],o=k*e[t],a=Math.cos(l)*s;n[r]=Math.cos(o)*a,n[r+1]=Math.sin(o)*a,n[r+2]=Math.sin(l)*s}function I(e,t,n,r){M(e,t,n,r,l.Sw.radius)}function _(e,t,n,r){M(e,t,n,r,l.sH.radius)}function P(e,t,n,r){M(e,t,n,r,l.$O.radius)}function O(e,t,n,i,s){const l=e[t],o=e[t+1],a=e[t+2],u=Math.sqrt(l*l+o*o+a*a),c=(0,r.YN)(a/(0===u?1:u)),p=Math.atan2(o,l);n[i++]=L*p,n[i++]=L*c,n[i]=u-s}function R(e,t,n,r){O(e,t,n,r,l.Sw.radius)}function A(e,t,n,r){O(e,t,n,r,l.sH.radius)}function S(e,t,n,r){O(e,t,n,r,l.$O.radius)}function E(e,t,n,r){!function(e,t,n,r,i){const s=k*e[t],l=k*e[t+1],o=e[t+2],a=Math.sin(l),u=Math.cos(l),c=i.radius/Math.sqrt(1-i.eccentricitySquared*a*a);n[r++]=(c+o)*u*Math.cos(s),n[r++]=(c+o)*u*Math.sin(s),n[r++]=(c*(1-i.eccentricitySquared)+o)*a}(e,t,n,r,l.$O)}function x(e,t,n,r){const i=u,s=e[t],o=e[t+1],a=e[t+2];let c,p,f,h,d,g,y,m,v,w,M,I,_,P,O,R,A,S,E,x,C;c=Math.abs(a),p=s*s+o*o,f=Math.sqrt(p),h=p+a*a,d=Math.sqrt(h),x=Math.atan2(o,s),g=a*a/h,y=p/h,P=i.a2/d,O=i.a3-i.a4/d,y>.3?(m=c/d*(1+y*(i.a1+P+g*O)/d),E=Math.asin(m),w=m*m,v=Math.sqrt(1-w)):(v=f/d*(1-g*(i.a5-P-y*O)/d),E=Math.acos(v),w=1-v*v,m=Math.sqrt(w)),M=1-l.$O.eccentricitySquared*w,I=l.$O.radius/Math.sqrt(M),_=i.a6*I,P=f-I*v,O=c-_*m,A=v*P+m*O,R=v*O-m*P,S=R/(_/M+A),E+=S,C=A+R*S/2,a<0&&(E=-E),n[r++]=L*x,n[r++]=L*E,n[r]=C}const C={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:g},k=(0,r.kU)(1),L=(0,r.KJ)(1),T=.5*Math.PI,b=l.$O.radius,U=b*Math.PI/180,j=180/(b*Math.PI)},60999:(e,t,n)=>{n.d(t,{DZ:()=>d,Ke:()=>h,Tj:()=>c,UT:()=>g,jJ:()=>u});var r=n(31635),i=n(65008),s=n(97768),l=n(74887),o=n(10107),a=n(64108);function u(e,t,n){return(0,l.Lx)(e.map((e,r)=>t.apply(n,[e,r])))}async function c(e,t,n){return(await(0,l.Lx)(e.map((e,r)=>t.apply(n,[e,r])))).map(e=>e.value)}function p(e){return{ok:!0,value:e}}function f(e){return{ok:!1,error:e}}async function h(e){if(null==e)return{ok:!1,error:new Error("no promise provided")};try{return p(await e)}catch(e){return f(e)}}async function d(e){try{return p(await e)}catch(e){return(0,l.QP)(e),f(e)}}function g(e,t){return new y(e,t)}let y=class extends i.A{get value(){return null!=(e=this._result)&&!0===e.ok?e.value:null;var e}get error(){return null!=(e=this._result)&&!1===e.ok?e.error:null;var e}get finished(){return null!=this._result}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,s.DC)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then(e=>{this._result=p(e),this._cleanup()},e=>{this._result=f(e),this._cleanup()}),this._abortHandle=(0,l.u7)(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,s.xt)(this._abortHandle),this._abortController=null}};(0,r.Cg)([(0,o.MZ)()],y.prototype,"value",null),(0,r.Cg)([(0,o.MZ)()],y.prototype,"error",null),(0,r.Cg)([(0,o.MZ)()],y.prototype,"finished",null),(0,r.Cg)([(0,o.MZ)()],y.prototype,"promise",void 0),(0,r.Cg)([(0,o.MZ)()],y.prototype,"_result",void 0),y=(0,r.Cg)([(0,a.$)("esri.core.asyncUtils.ReactiveTask")],y)},62815:(e,t,n)=>{n.d(t,{N:()=>l});var r=n(83047),i=n(73941),s=n(21325);function l(e,t,n){if(null==t||null==n||n.vcsWkid||(0,s.aI)(t,n)||(0,i.xP)(t)||(0,i.xP)(n))return null;const l=(0,r.G9)(t)/(0,r.G9)(n);if(1===l)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,t){null!=e?.z&&(e.z*=t)}(e,l);case"polyline":case"esriGeometryPolyline":return e=>function(e,t){if(e)for(const n of e.paths)for(const e of n)e.length>2&&(e[2]*=t)}(e,l);case"polygon":case"esriGeometryPolygon":return e=>function(e,t){if(e)for(const n of e.rings)for(const e of n)e.length>2&&(e[2]*=t)}(e,l);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}(e,l);case"extent":case"esriGeometryEnvelope":return e=>function(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}(e,l);default:return null}}},91218:(e,t,n)=>{n.r(t),n.d(t,{canProjectWithoutEngine:()=>N,initializeProjection:()=>D,isEqualBaseGCS:()=>q,isLoaded:()=>C,isLoadedOrLoad:()=>k,isLoadedOrLoadFor:()=>L,load:()=>b,project:()=>U,projectExtent:()=>ne,projectMany:()=>j,projectMultipoint:()=>F,projectOrLoad:()=>Z,projectOrLoadMany:()=>G,projectPoint:()=>K,projectPolygon:()=>ee,projectPolyline:()=>V,projectWithZConversion:()=>Y,projectWithoutEngine:()=>J,requiresLoad:()=>T,test:()=>z,tryProjectWithZConversion:()=>B,unload:()=>H});var r=n(49186),i=n(74887),s=n(62788),l=n(95488),o=n(51850),a=n(21276),u=n(73941),c=n(5443),p=n(91075),f=n(48526),h=n(86738),d=n(39829),g=n(82799),y=n(16930),m=n(159),v=n(9762),w=n(37539);function M(e,t,n,r,i,s){return I[0]=e,I[1]=t,I[2]=n,(0,v.projectBuffer)(I,r,0,i,s,0)}const I=(0,o.vt)();var _=n(21325),P=n(62815);let O=null,R=null,A=null,S=null,E={};const x=new l.I;function C(){return!!(R?.isLoaded()&&A?.isLoaded()&&S?.isLoaded())}function k(){return!!C()||((0,s.gc)(x),b(),!1)}function L(e,t){return!e||!t||N(e,t)||k()}function T(e,t){return!N(e,t)&&!C()}async function b(e){null==O&&(O=Promise.all([n.e(3276).then(n.bind(n,83276)).then(e=>(R=e,R.load())),n.e(8377).then(n.bind(n,8377)).then(e=>(A=e,A.load())),n.e(2158).then(n.bind(n,12158)).then(e=>(S=e,S.load()))])),await O,(0,i.Te)(e),x.notify()}function U(e,t,n){return Array.isArray(e)?0===e.length?[]:((0,a.H)(e),j(e,e[0].spatialReference,t,n)):((0,a.f)(e),j([e],e.spatialReference,t,n)[0])}function j(e,t,n,r){if(null==t||null==n)return e;if(N(t,n,r))return e.map(e=>J(e,t,n));if(null==r?.geographicTransformation&&(0,u.jA)(t))return e.map(e=>J(e,t,y.A.WGS84)).map(e=>B(e,n));if(null==r?.geographicTransformation&&(0,u.jA)(n))return e.map(e=>B(e,y.A.WGS84)).map(e=>J(e,y.A.WGS84,n));if(!C())throw new $;if(!r?.geographicTransformation)if(r?.extendedParams)r={...r,geographicTransformation:S.getTransformation(t,n,r.areaOfInterestExtent)||new m.A};else if(!r?.areaOfInterestExtent){const e=function(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}(t,n);let i=E[e];i||(i=S.getTransformation(t,n)||new m.A,E[e]=i),r={geographicTransformation:i}}return e[0].spatialReference||(e[0].spatialReference=t),e[0]instanceof p.A?R.executeMany(e,n,r):A.executeMany(e,n,r)}function Z(e,t){const n=G([e],t);return null!=n.pending?{pending:n.pending,geometry:null}:null!=n.geometries?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function G(e,t){if(!C())for(const n of e)if(null!=n&&!(0,_.aI)(n.spatialReference,t)&&(0,_.fn)(n.spatialReference)&&(0,_.fn)(t)&&!N(n.spatialReference,t))return(0,s.gc)(x),{pending:b(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:(0,_.aI)(e.spatialReference,t)?e:(0,_.fn)(e.spatialReference)&&(0,_.fn)(t)?B(e,t):null)}}class $ extends r.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function H(){O=null,R=null,A=null,S=null,E={}}const z={get loadPromise(){return O}};function B(e,t){try{const n=U(e,t);if(null==n)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const r=(0,P.N)(n.type,e.spatialReference,t);return null!=r&&r(n),n}catch(e){if(!(e instanceof $))throw e;return null}}async function Y(e,t,n){const r=e.spatialReference;return null!=r&&null!=t&&await D(r,t,null,n),B(e,t)}function N(e,t,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!(0,_.aI)(e,t)||(0,_.fn)(e)&&(0,_.fn)(t)&&!!(0,w.jd)(e,t))}function q(e,t){if((0,_.aI)(e,t))return!0;if(!(0,_.fn)(e)||!(0,_.fn)(t))return!1;const n=(0,_.oT)(e)||(0,_.K8)(e)||(0,_.x1)(e),r=(0,_.oT)(t)||(0,_.K8)(t)||(0,_.x1)(t);return n&&r}async function D(e,t,n,r){if(C())return(0,i.NO)(r);if(Array.isArray(e)){for(const{source:t,dest:n,options:i}of e)if(t&&n&&!N(t,n,i))return b(r)}else if(e&&t&&!N(e,t,n))return b(r);return(0,i.NO)(r)}function J(e,t,n){return e?"x"in e?W(e,t,new h.A,n,0):"xmin"in e?re(e,t,new c.A,n,0):"rings"in e?te(e,t,new d.A,n,0):"paths"in e?X(e,t,new g.A,n,0):"points"in e?Q(e,t,new f.A,n,0):null:null}function K(e,t,n=t.spatialReference,r=0){return null!=n&&null!=e.spatialReference&&null!=W(e,e.spatialReference,t,n,r)}function W(e,t,n,r,i){se[0]=e.x,se[1]=e.y;const s=e.z;return se[2]=void 0!==s?s:i,(0,v.projectBuffer)(se,t,0,se,r,0)?(n.x=se[0],n.y=se[1],n.spatialReference=r,void 0!==s||(0,u.xP)(r)?(n.z=se[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),void 0===e.m?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function F(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=Q(e,e.spatialReference,t,n,r)}function Q(e,t,n,r,i){const{points:s,hasZ:l,hasM:o}=e,a=[],c=s.length,p=[];for(const e of s)p.push(e[0],e[1],l?e[2]:i);if(!(0,v.projectBuffer)(p,t,0,p,r,0,c))return null;const f=l||(0,u.xP)(r);for(let e=0;e<c;++e){const t=3*e,n=p[t],r=p[t+1];f&&o?a.push([n,r,p[t+2],s[e][3]]):f?a.push([n,r,p[t+2]]):o?a.push([n,r,s[e][2]]):a.push([n,r])}return n.points=a,n.spatialReference=r,n.hasZ=l,n.hasM=o,n}function V(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=X(e,e.spatialReference,t,n,r)}function X(e,t,n,r,i){const{paths:s,hasZ:l,hasM:o}=e,a=[];if(!ie(s,l??!1,o??!1,t,a,r,i))return null;const c=l||(0,u.xP)(r);return n.paths=a,n.spatialReference=r,n.hasZ=c,n.hasM=o,n}function ee(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=te(e,e.spatialReference,t,n,r)}function te(e,t,n,r,i){const{rings:s,hasZ:l,hasM:o}=e,a=[];if(!ie(s,l??!1,o??!1,t,a,r,i))return null;const c=l||(0,u.xP)(r);return n.rings=a,n.spatialReference=r,n.hasZ=c,n.hasM=o,n}function ne(e,t,n=t.spatialReference,r=0){return null!=e.spatialReference&&null!=n&&null!=re(e,e.spatialReference,t,n,r)}function re(e,t,n,r,i){const{xmin:s,ymin:l,xmax:o,ymax:a,hasZ:c,hasM:p}=e;if(!M(s,l,c?e.zmin:i,t,se,r))return null;const f=c||(0,u.xP)(r);return n.xmin=se[0],n.ymin=se[1],f&&(n.zmin=se[2]),M(o,a,c?e.zmax:i,t,se,r)?(n.xmax=se[0],n.ymax=se[1],f&&(n.zmax=se[2]),p&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,n):null}function ie(e,t,n,r,i,s,l=0){const o=new Array;for(const n of e)for(const e of n)o.push(e[0],e[1],t?e[2]:l);if(!(0,v.projectBuffer)(o,r,0,o,s,0))return!1;let a=0;i.length=0;const c=t||(0,u.xP)(s);for(const t of e){const e=new Array;for(const r of t)c&&n?e.push([o[a++],o[a++],o[a++],r[3]]):c?e.push([o[a++],o[a++],o[a++]]):n?(e.push([o[a++],o[a++],r[2]]),a++):(e.push([o[a++],o[a++]]),a++);i.push(e)}return!0}const se=(0,o.vt)()},92071:(e,t,n)=>{n.d(t,{P:()=>v,L:()=>w});var r=n(31635),i=n(65008),s=n(76953),l=n(4718),o=n(35666);class a{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(o.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new a,n=this._originStores[0];n&&n.forEach((e,n)=>{t.set(n,(0,l.o8)(e),0)});for(let n=2;n<o.AU;n++){const r=this._originStores[n];r&&r.forEach((r,i)=>{e&&e.has(i)||t.set(i,(0,l.o8)(r),n)})}return t}get(e,t){const n=void 0===t?this._values:this._originStores[t];return n?n.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,n=7){let r=this._originStores[n];if(r||(r=new Map,this._originStores[n]=r),r.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=n){const r=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,n),r!==t}return!1}delete(e,t=7){const n=this._originStores[t];if(!n)return;const r=n.get(e);if(n.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let n=t-1;n>=0;n--){const t=this._originStores[n];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,n);break}}}return r}has(e,t){const n=void 0===t?this._values:this._originStores[t];return!!n&&n.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const n=this._originStores[t],r=n?.get(e),i=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),i!==r}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,t){return this.has(e,t)&&this.originOf(e)===t}isBelowOrigin(e,t){return!this.has(e)||this.originOf(e)<t}forEach(e){this._values.forEach(e)}}var u=n(45917),c=n(88620),p=n(64108);const f=e=>{const t=e;let n=class extends t{constructor(...e){super(...e);const t=(0,c.oY)(this),n=t.store,r=new a;t.store=r,(0,s.k)(t,n,r)}read(e,t){(0,u.L)(this,e,t)}getAtOrigin(e,t){const n=h(this),r=(0,o.aB)(t);if("string"==typeof e)return n.get(e,r);const i={};return e.forEach(e=>{i[e]=n.get(e,r)}),i}originOf(e){return(0,o.OL)(this.originIdOf(e))}originIdOf(e){return h(this).originOf(e)}revert(e,t){const n=h(this),r=(0,o.aB)(t),i=(0,c.oY)(this);let s;s="string"==typeof e?"*"===e?n.keys(r):[e]:e,s.forEach(e=>{i.invalidate(e),n.revert(e,r),i.commit(e)})}};return n=(0,r.Cg)([(0,p.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],n),n};function h(e){return(0,c.oY)(e).store}f(i.A);var d=n(16649),g=n(49422);const y=e=>{const t=e;let n=class extends t{constructor(...e){super(...e)}clear(e,t="user"){(0,c.oY)(this).clearOrigin(e,(0,o.aB)(t))}write(e,t){return(0,g.M)(this,e=e||{},t),e}setAtOrigin(e,t,n){(0,c.oY)(this).setAtOrigin(e,t,(0,o.aB)(n))}removeOrigin(e){const t=m(this),n=(0,o.aB)(e),r=t.keys(n);for(const e of r)t.originOf(e)===n&&t.set(e,t.get(e,n),7)}updateOrigin(e,t){const n=m(this),r=(0,o.aB)(t),i=(0,d.Jt)(this,e);for(let t=r+1;t<o.AU;++t)n.delete(e,t);n.set(e,i,r)}toJSON(e){return this.write({},e)}};return n=(0,r.Cg)([(0,p.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function m(e){return(0,c.oY)(e).store}const v=e=>{const t=y(f(e));let n=class extends t{};return n=(0,r.Cg)([(0,p.$)("esri.core.MultiOriginJSONSupport")],n),n},w=v(i.A)},99157:(e,t,n)=>{n.d(t,{A:()=>a});var r,i=n(31635),s=n(65008),l=n(10107),o=(n(44208),n(53966),n(87811),n(64108));let a=r=class extends s.A{constructor(e){super(e),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new r({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};(0,i.Cg)([(0,l.MZ)()],a.prototype,"isInverse",void 0),(0,i.Cg)([(0,l.MZ)()],a.prototype,"wkt",void 0),(0,i.Cg)([(0,l.MZ)()],a.prototype,"wkid",void 0),a=r=(0,i.Cg)([(0,o.$)("esri.geometry.operators.support.GeographicTransformationStep")],a)}}]);