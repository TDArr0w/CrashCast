"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6554],{25036:(e,t,n)=>{n.d(t,{j:()=>s});var r=n(31635),a=n(10107),o=(n(44208),n(53966),n(87811),n(64108));const s=e=>{const t=e;let n=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;void 0!==t?.effectiveScaleRange&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}};return(0,r.Cg)([(0,a.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],n.prototype,"minScale",void 0),(0,r.Cg)([(0,a.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],n.prototype,"maxScale",void 0),(0,r.Cg)([(0,a.MZ)({readOnly:!0})],n.prototype,"effectiveScaleRange",null),n=(0,r.Cg)([(0,o.$)("esri.layers.mixins.ScaleRangeLayer")],n),n}},54310:(e,t,n)=>{n.d(t,{J:()=>w});var r=n(31635),a=(n(44208),n(53966)),o=n(74887),s=n(10107),c=n(79901),i=(n(87811),n(64108)),u=n(89317),l=n(7762),f=n(36708),p=n(80559);const h=new l.A,m=new WeakMap;function g(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:g(t,e%t):0}let d=0,y=0;function v(){const e=Date.now();let t=!1;for(const n of h){const r=n.deref();r?r.refreshInterval&&e-(m.get(r)??0)+5>=6e4*r.refreshInterval&&(m.set(r,e),r.refresh(e)):t=!0}if(t)for(let e=h.length-1;e>=0;e--)h.at(e).deref()||h.removeAt(e)}(0,p.fm)(()=>{const e=Date.now();let t=0;for(const n of h){const r=n.deref();r&&(t=g(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?m.get(r)||m.set(r,e):m.delete(r))}if(t!==y){if(y=t,clearInterval(d),0===y)return void(d=0);d=setInterval(v,y)}},f.OH);const w=e=>{const t=e;let n=class extends t{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function(e){(function(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e})(e)&&h.push(new WeakRef(e))}(this)},()=>{})}destroy(){!function(e){const t=h.find(t=>t.deref()===e);t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,o.QZ)(this._debounceHasDataChanged()).then(t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})},e=>{a.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})})}async hasDataChanged(){return!0}get test(){}};return(0,r.Cg)([(0,s.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],n.prototype,"refreshInterval",void 0),(0,r.Cg)([(0,c.w)("refreshInterval")],n.prototype,"castRefreshInterval",null),(0,r.Cg)([(0,s.MZ)({readOnly:!0})],n.prototype,"refreshTimestamp",void 0),(0,r.Cg)([(0,s.MZ)({readOnly:!0})],n.prototype,"refreshParameters",null),n=(0,r.Cg)([(0,i.$)("esri.layers.mixins.RefreshableLayer")],n),n}},63074:(e,t,n)=>{n.d(t,{LF:()=>l,dM:()=>f,sU:()=>i});var r=n(31635),a=n(10107),o=(n(44208),n(53966),n(87811),n(64108)),s=n(89317),c=n(76369);const i={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:s.K}},"portal-item":{read:!0,write:{layerContainerTypes:s.K}}}}},u={read:{reader:c.LF},write:{allowNull:!0,writer:c.M9,layerContainerTypes:s.K}},l={json:{read:!1,write:!1,origins:{"web-map":u,"portal-item":u}}},f=e=>{const t=e;let n=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,r.Cg)([(0,a.MZ)(i)],n.prototype,"blendMode",void 0),(0,r.Cg)([(0,a.MZ)(l)],n.prototype,"effect",void 0),n=(0,r.Cg)([(0,o.$)("esri.layers.mixins.BlendLayer")],n),n}},76369:(e,t,n)=>{n.d(t,{LF:()=>A,M9:()=>C});var r=n(49186),a=n(93637),o=n(40876),s=n(59247),c=n(27865);class i extends SyntaxError{constructor(e,t,n,r){super(e),this.expected=t,this.found=n,this.location=r,this.name="SyntaxError"}format(e){let t="Error: "+this.message;if(this.location){let n=null;const r=e.find(e=>e.source===this.location.source);r&&(n=r.text.split(/\r\n|\n|\r/g));const a=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,s=this.location.source+":"+o.line+":"+o.column;if(n){const e=this.location.end,r="".padEnd(o.line.toString().length," "),c=n[a.line-1],i=(a.line===e.line?e.column:c.length+1)-a.column||1;t+="\n --\x3e "+s+"\n"+r+" |\n"+o.line+" | "+c+"\n"+r+" | "+"".padEnd(a.column-1," ")+"".padEnd(i,"^")}else t+="\n at "+s}return t}static buildMessage(e,t){function n(e){return e.codePointAt(0).toString(16).toUpperCase()}const r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function a(e){return r?e.replace(r,e=>"\\u{"+n(e)+"}"):e}function o(e){return a(e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+n(e)))}function s(e){return a(e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+n(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+n(e)))}const c={literal:e=>'"'+o(e.text)+'"',class(e){const t=e.parts.map(e=>Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e));return"["+(e.inverted?"^":"")+t.join("")+"]"+(e.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function i(e){return c[e.type](e)}return"Expected "+function(e){const t=e.map(i);if(t.sort(),t.length>0){let e=1;for(let n=1;n<t.length;n++)t[n-1]!==t[n]&&(t[e]=t[n],e++);t.length=e}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."}}function u(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=l(e);return t&&0!==t.length?t:null}const t=e.map(e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new r.A("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:l(e.value)}});t.sort((e,t)=>t.effects.length-e.effects.length);for(let e=0;e<t.length-1;e++){if(!(0,c.mj)(t[e].effects,t[e+1].effects))throw new r.A("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[e].effects,b:t[e+1].effects});(0,c.O9)(t[e].effects,t[e+1].effects)}return t.sort((e,t)=>t.scale-e.scale),t}function l(e){let t;if(!e)return[];try{t=function(e,t){const n={},r=(t=void 0!==t?t:{}).grammarSource,a={start:be};let o=be;const s="none",c=")",u=",",l="(",f="%",p="px",h="cm",m="mm",g="in",d="pt",y="pc",v="deg",w="rad",x="grad",b="turn",A="#",C=".",S="e",$=/^[ \t\n\r]/,F=/^[a-z\-]/,M=/^[0-9a-fA-F]/,E=/^[+\-]/,R=/^[0-9]/,j=ye("none"),I=ge("none",!1),k=ge(")",!1),N=ge(",",!1),O=de([" ","\t","\n","\r"],!1,!1,!1),P=ye("function"),T=ge("(",!1),Z=ye("identifier"),D=de([["a","z"],"-"],!1,!1,!1),L=ye("percentage"),q=ge("%",!1),_=ye("length"),z=ge("px",!1),K=ge("cm",!1),H=ge("mm",!1),J=ge("in",!1),B=ge("pt",!1),U=ge("pc",!1),W=ye("angle"),G=ge("deg",!1),Q=ge("rad",!1),V=ge("grad",!1),X=ge("turn",!1),Y=ye("number"),ee=ye("color"),te=ge("#",!1),ne=de([["0","9"],["a","f"],["A","F"]],!1,!1,!1),re=de(["+","-"],!1,!1,!1),ae=de([["0","9"]],!1,!1,!1),oe=ge(".",!1),se=ge("e",!1);let ce=0|t.peg$currPos,ie=ce;const ue=[{line:1,column:1}];let le,fe=ce,pe=t.peg$maxFailExpected||[],he=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=a[t.startRule]}function me(){return e.substring(ie,ce)}function ge(e,t){return{type:"literal",text:e,ignoreCase:t}}function de(e,t,n,r){return{type:"class",parts:e,inverted:t,ignoreCase:n,unicode:r}}function ye(e){return{type:"other",description:e}}function ve(t){let n,r=ue[t];if(r)return r;if(t>=ue.length)n=ue.length-1;else for(n=t;!ue[--n];);for(r=ue[n],r={line:r.line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ue[t]=r,r}function we(e,t,n){const a=ve(e),o=ve(t);return{source:r,start:{offset:e,line:a.line,column:a.column},end:{offset:t,line:o.line,column:o.column}}}function xe(e){ce<fe||(ce>fe&&(fe=ce,pe=[]),pe.push(e))}function be(){let e;return e=Ae(),e===n&&(e=function(){let e,t;if(e=[],t=Ce(),t!==n)for(;t!==n;)e.push(t),t=Ce();else e=n;return e}()),e}function Ae(){let t,r;return he++,t=ce,$e(),e.substr(ce,4)===s?(r=s,ce+=4):(r=n,0===he&&xe(I)),r!==n?($e(),ie=t,t=[]):(ce=t,t=n),he--,t===n&&0===he&&xe(j),t}function Ce(){let t,r,a,o;return t=ce,$e(),r=function(){let t,r,a;return he++,t=ce,r=Fe(),r!==n?(40===e.charCodeAt(ce)?(a=l,ce++):(a=n,0===he&&xe(T)),a!==n?(ie=t,t=r):(ce=t,t=n)):(ce=t,t=n),he--,t===n&&(r=n,0===he&&xe(P)),t}(),r!==n?($e(),a=function(){let t,r,a,o,s,c,i,l;if(t=ce,r=Se(),r!==n){for(a=[],o=ce,s=$e(),44===e.charCodeAt(ce)?(c=u,ce++):(c=n,0===he&&xe(N)),c===n&&(c=null),i=$e(),l=Se(),l!==n?(s=[s,c,i,l],o=s):(ce=o,o=n);o!==n;)a.push(o),o=ce,s=$e(),44===e.charCodeAt(ce)?(c=u,ce++):(c=n,0===he&&xe(N)),c===n&&(c=null),i=$e(),l=Se(),l!==n?(s=[s,c,i,l],o=s):(ce=o,o=n);ie=t,t=function(e,t){return t.length>0?function(e,t){return[e].concat(function(e){return e.map(function(e){return e[3]})}(t))}(e,t):[e]}(r,a)}else ce=t,t=n;return t}(),a===n&&(a=null),$e(),41===e.charCodeAt(ce)?(o=c,ce++):(o=n,0===he&&xe(k)),o!==n?($e(),ie=t,t=function(e,t){return{type:"function",name:e,parameters:t||[]}}(r,a)):(ce=t,t=n)):(ce=t,t=n),t}function Se(){let e,t;return e=ce,t=Me(),t===n&&(t=Ee(),t===n&&(t=Re(),t===n&&(t=function(){let e,t;return he++,e=ce,$e(),t=Ie(),t!==n?(ie=e,e=function(e){return{value:e,unit:null}}(t)):(ce=e,e=n),he--,e===n&&0===he&&xe(Y),e}()))),t!==n&&(ie=e,t=function(e){return{type:"quantity",value:e.value,unit:e.unit}}(t)),e=t,e===n&&(e=ce,t=je(),t!==n&&(ie=e,t=function(e){return{type:"color",colorType:e.type,value:e.value}}(t)),e=t),e}function $e(){let t,r;for(he++,t=[],r=e.charAt(ce),$.test(r)?ce++:(r=n,0===he&&xe(O));r!==n;)t.push(r),r=e.charAt(ce),$.test(r)?ce++:(r=n,0===he&&xe(O));return he--,t}function Fe(){let t,r,a;if(he++,t=ce,r=[],a=e.charAt(ce),F.test(a)?ce++:(a=n,0===he&&xe(D)),a!==n)for(;a!==n;)r.push(a),a=e.charAt(ce),F.test(a)?ce++:(a=n,0===he&&xe(D));else r=n;return r!==n&&(ie=t,r=me()),t=r,he--,t===n&&(r=n,0===he&&xe(Z)),t}function Me(){let t,r,a;return he++,t=ce,$e(),r=Ie(),r!==n?(37===e.charCodeAt(ce)?(a=f,ce++):(a=n,0===he&&xe(q)),a!==n?(ie=t,t=function(e){return{value:e,unit:"%"}}(r)):(ce=t,t=n)):(ce=t,t=n),he--,t===n&&0===he&&xe(L),t}function Ee(){let t,r,a;return he++,t=ce,$e(),r=Ie(),r!==n?(e.substr(ce,2)===p?(a=p,ce+=2):(a=n,0===he&&xe(z)),a!==n?(ie=t,t=function(e){return{value:e,unit:"px"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,$e(),r=Ie(),r!==n?(e.substr(ce,2)===h?(a=h,ce+=2):(a=n,0===he&&xe(K)),a!==n?(ie=t,t=function(e){return{value:e,unit:"cm"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,$e(),r=Ie(),r!==n?(e.substr(ce,2)===m?(a=m,ce+=2):(a=n,0===he&&xe(H)),a!==n?(ie=t,t=function(e){return{value:e,unit:"mm"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,$e(),r=Ie(),r!==n?(e.substr(ce,2)===g?(a=g,ce+=2):(a=n,0===he&&xe(J)),a!==n?(ie=t,t=function(e){return{value:e,unit:"in"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,$e(),r=Ie(),r!==n?(e.substr(ce,2)===d?(a=d,ce+=2):(a=n,0===he&&xe(B)),a!==n?(ie=t,t=function(e){return{value:e,unit:"pt"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,$e(),r=Ie(),r!==n?(e.substr(ce,2)===y?(a=y,ce+=2):(a=n,0===he&&xe(U)),a!==n?(ie=t,t=function(e){return{value:e,unit:"pc"}}(r)):(ce=t,t=n)):(ce=t,t=n)))))),he--,t===n&&0===he&&xe(_),t}function Re(){let t,r,a;return he++,t=ce,r=Ie(),r!==n?(e.substr(ce,3)===v?(a=v,ce+=3):(a=n,0===he&&xe(G)),a!==n?(ie=t,t=function(e){return{value:e,unit:"deg"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,r=Ie(),r!==n?(e.substr(ce,3)===w?(a=w,ce+=3):(a=n,0===he&&xe(Q)),a!==n?(ie=t,t=function(e){return{value:e,unit:"rad"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,r=Ie(),r!==n?(e.substr(ce,4)===x?(a=x,ce+=4):(a=n,0===he&&xe(V)),a!==n?(ie=t,t=function(e){return{value:e,unit:"grad"}}(r)):(ce=t,t=n)):(ce=t,t=n),t===n&&(t=ce,r=Ie(),r!==n?(e.substr(ce,4)===b?(a=b,ce+=4):(a=n,0===he&&xe(X)),a!==n?(ie=t,t=function(e){return{value:e,unit:"turn"}}(r)):(ce=t,t=n)):(ce=t,t=n)))),he--,t===n&&(r=n,0===he&&xe(W)),t}function je(){let t,r,a,o;if(he++,t=ce,35===e.charCodeAt(ce)?(r=A,ce++):(r=n,0===he&&xe(te)),r!==n){if(a=[],o=e.charAt(ce),M.test(o)?ce++:(o=n,0===he&&xe(ne)),o!==n)for(;o!==n;)a.push(o),o=e.charAt(ce),M.test(o)?ce++:(o=n,0===he&&xe(ne));else a=n;a!==n?(ie=t,t={type:"hex",value:me()}):(ce=t,t=n)}else ce=t,t=n;return t===n&&(t=ce,r=Ce(),r!==n&&(ie=t,r=function(e){return{type:"function",value:e}}(r)),t=r,t===n&&(t=ce,r=Fe(),r!==n&&(ie=t,r={type:"named",value:me()}),t=r)),he--,t===n&&(r=n,0===he&&xe(ee)),t}function Ie(){let t,r,a,o,s,c,i,u;for(t=ce,r=e.charAt(ce),E.test(r)?ce++:(r=n,0===he&&xe(re)),r===n&&(r=null),a=ce,o=[],s=e.charAt(ce),R.test(s)?ce++:(s=n,0===he&&xe(ae));s!==n;)o.push(s),s=e.charAt(ce),R.test(s)?ce++:(s=n,0===he&&xe(ae));if(46===e.charCodeAt(ce)?(s=C,ce++):(s=n,0===he&&xe(oe)),s!==n){if(c=[],i=e.charAt(ce),R.test(i)?ce++:(i=n,0===he&&xe(ae)),i!==n)for(;i!==n;)c.push(i),i=e.charAt(ce),R.test(i)?ce++:(i=n,0===he&&xe(ae));else c=n;c!==n?(o=[o,s,c],a=o):(ce=a,a=n)}else ce=a,a=n;if(a===n)if(a=[],o=e.charAt(ce),R.test(o)?ce++:(o=n,0===he&&xe(ae)),o!==n)for(;o!==n;)a.push(o),o=e.charAt(ce),R.test(o)?ce++:(o=n,0===he&&xe(ae));else a=n;if(a!==n){if(o=ce,101===e.charCodeAt(ce)?(s=S,ce++):(s=n,0===he&&xe(se)),s!==n){if(c=e.charAt(ce),E.test(c)?ce++:(c=n,0===he&&xe(re)),c===n&&(c=null),i=[],u=e.charAt(ce),R.test(u)?ce++:(u=n,0===he&&xe(ae)),u!==n)for(;u!==n;)i.push(u),u=e.charAt(ce),R.test(u)?ce++:(u=n,0===he&&xe(ae));else i=n;i!==n?(s=[s,c,i],o=s):(ce=o,o=n)}else ce=o,o=n;o===n&&(o=null),ie=t,t=parseFloat(me())}else ce=t,t=n;return t}le=o();const ke=le!==n&&ce===e.length;function Ne(){throw le!==n&&ce<e.length&&xe({type:"end"}),function(e,t,n){return new i(i.buildMessage(e,t),e,t,n)}(pe,fe<e.length?function(t=ce){const n=e.codePointAt(t);return void 0===n?"":String.fromCodePoint(n)}(fe):null,fe<e.length?we(fe,fe+1):we(fe,fe))}return t.peg$library?{peg$result:le,peg$currPos:ce,peg$FAILED:n,peg$maxFailExpected:pe,peg$maxFailPos:fe,peg$success:ke,peg$throw:ke?void 0:Ne}:ke?le:void Ne()}(e)}catch(t){throw new r.A("effect:invalid-syntax","Invalid effect syntax",{value:e,error:t})}return t.map(e=>function(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=d(e.parameters[0])),new s.yG(e.name,t)}(e);case"opacity":return function(e){let t=1;return f(e.parameters,1),1===e.parameters.length&&(t=d(e.parameters[0])),new s.jm(t)}(e);case"hue-rotate":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=function(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=m[e.unit]))throw new r.A("effect:type-error",`Expected <angle>, Actual: ${p(e)}`,{term:e})}(e),e.value*m[e.unit]||0}(e.parameters[0])),new s.Nd(t)}(e);case"blur":return function(e){let t=0;return f(e.parameters,1),1===e.parameters.length&&(t=y(e.parameters[0]),h(t,e.parameters[0])),new s.Fk(t)}(e);case"drop-shadow":return function(e){const t=[];let n=null;for(const a of e.parameters)if("color"===a.type){if(t.length&&Object.freeze(t),n)throw new r.A("effect:type-error","Accepts only one color",{});n=v(a)}else{const e=y(a);if(Object.isFrozen(t))throw new r.A("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&h(e,a)}if(t.length<2||t.length>3)throw new r.A("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new s.$b(t[0],t[1],t[2]||0,n||w("black"))}(e);case"bloom":return function(e){let t=1,n=0,r=0;return f(e.parameters,3),e.parameters[0]&&(t=d(e.parameters[0])),e.parameters[1]&&(n=y(e.parameters[1]),h(n,e.parameters[1])),e.parameters[2]&&(r=d(e.parameters[2])),new s.bv(t,n,r)}(e)}}catch(t){throw t.details.filter=e,t}throw new r.A("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}(e))}function f(e,t){if(e.length>t)throw new r.A("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function p(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in g)return"<length>";if(e.unit in m)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function h(e,t){if(e<0)throw new r.A("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}const m={deg:1,grad:.9,rad:180/Math.PI,turn:360},g={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function d(e){!function(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new r.A("effect:type-error",`Expected <double> or <percentage>, Actual: ${p(e)}`,{term:e})}(e);const t=e.value;return h(t,e),"%"===e.unit?.01*t:t}function y(e){return function(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=g[e.unit]))throw new r.A("effect:type-error",`Expected <length>, Actual: ${p(e)}`,{term:e})}(e),e.value*g[e.unit]||0}function v(e){switch(e.colorType){case"hex":return(0,o.j5)(e.value);case"named":return w(e.value);case"function":return function(e){if(f(e.parameters,4),x.test(e.name))return[d(e.parameters[0]),d(e.parameters[1]),d(e.parameters[2]),e.parameters[3]?d(e.parameters[3]):1];if(b.test(e.name))return(0,o.ay)(function(e){return function(e){if("quantity"!==e.type||null!==e.unit)throw new r.A("effect:type-error",`Expected <double>, Actual: ${p(e)}`,{term:e})}(e),h(e.value,e),e.value}(e.parameters[0]),d(e.parameters[1]),d(e.parameters[2]),e.parameters[3]?d(e.parameters[3]):1);throw new r.A("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}(e.value)}}function w(e){if(!(0,o.V6)(e))throw new r.A("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,o.c4)(e)}const x=/^rgba?/i,b=/^hsla?/i;function A(e,t,n){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];return!!t&&"scale"in t}(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:S(n.value)});return t}return S(e)}(e)}catch(e){n?.messages?.push(e)}return null}function C(e,t,n,r){try{const r=function(e){const t=u(e);return t?(0,c.dw)(t)?t.map(e=>e.toJSON()):t.map(({scale:e,effects:t})=>({scale:e,value:t.map(e=>e.toJSON())})):null}(e);(0,a.sM)(n,r,t)}catch(e){r.messages&&r.messages.push(e)}}function S(e){if(!e?.length)return"";const t=[];for(const n of e){let e=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[$(n,"amount")];break;case"blur":e=[$(n,"radius","pt")];break;case"hue-rotate":e=[$(n,"angle","deg")];break;case"drop-shadow":e=[$(n,"xoffset","pt"),$(n,"yoffset","pt"),$(n,"blurRadius","pt"),F(n,"color")];break;case"bloom":e=[$(n,"strength"),$(n,"radius","pt"),$(n,"threshold")]}const r=`${n.type}(${e.filter(Boolean).join(" ")})`;u(r),t.push(r)}return t.join(" ")}function $(e,t,n){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function F(e,t){if(null==e[t])throw new r.A("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}}}]);