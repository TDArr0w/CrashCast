"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6650],{159:(e,n,t)=>{t.d(n,{A:()=>u});var r,i=t(31635),l=t(65008),s=t(10107),o=(t(44208),t(53966),t(87811),t(64108)),a=t(99157);let u=r=class extends l.A{constructor(e){super(e),this.steps=[]}getInverse(){const e=new r;for(let n=this.steps.length-1;n>=0;n--){const t=this.steps[n];e.steps.push(t.getInverse())}return e}};(0,i.Cg)([(0,s.MZ)({type:[a.A],nonNullable:!0})],u.prototype,"steps",void 0),u=r=(0,i.Cg)([(0,o.$)("esri.geometry.operators.support.GeographicTransformation")],u)},9762:(e,n,t)=>{t.r(n),t.d(n,{projectBuffer:()=>i});var r=t(37539);function i(e,n,t,i,l,s,o=Math.floor(e.length/3)){const a=(0,r.jd)(n,l);if(null==a)return!1;if(a===r.pO){if(e===i&&t===s)return!0;const n=t+3*o;for(let r=t,l=s;r<n;r++,l++)i[l]=e[r];return!0}const u=t+3*o;for(let n=t,r=s;n<u;n+=3,r+=3)a(e,n,i,r);return!0}},37539:(e,n,t)=>{t.d(n,{pO:()=>m,jd:()=>p,Tp:()=>h,w5:()=>f});var r=t(34727),i=t(83047),l=t(73941),s=t(79258);Math.PI;const o=s.$O.radius,a=s.$O.eccentricitySquared,u={a1:o*a,a2:o*a*o*a,a3:o*a*a/2,a4:o*a*o*a*2.5,a5:o*a+o*a*a/2,a6:1-a};s.$O.radius,s.$O.flattening,s.Sw.radius,s.Sw.flattening,s.sH.radius,s.sH.flattening,s.sH.radius;var c=t(21325);const f={2:{5:m,7:null,9:null,10:m,1:j,6:null,8:null,0:null,3:y,11:w,2:m,4:P},5:{5:m,7:null,9:null,10:m,1:j,6:null,8:null,0:null,3:y,11:w,2:m,4:P},7:{5:null,7:m,9:null,10:m,1:null,6:R,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:m,10:m,1:null,6:null,8:x,0:null,3:null,11:null,2:null,4:null},3:{5:g,7:null,9:null,10:g,1:function(e,n,t,r){const i=e[n]/S,l=q-2*Math.atan(Math.exp(-e[n+1]/S)),s=S+e[n+2],o=Math.cos(l)*s;t[r]=Math.cos(i)*o,t[r+1]=Math.sin(i)*o,t[r+2]=Math.sin(l)*s},6:null,8:null,0:null,3:m,11:function(e,n,t,r){g(e,n,t,r),w(t,r,t,r)},2:g,4:function(e,n,t,r){g(e,n,t,r),P(t,r,t,r)}},4:{5:Z,7:null,9:null,10:Z,1:function(e,n,t,r){Z(e,n,t,r),j(t,r,t,r)},6:null,8:null,0:null,3:function(e,n,t,r){Z(e,n,t,r),y(t,r,t,r)},11:function(e,n,t,r){Z(e,n,t,r),w(t,r,t,r)},2:Z,4:m},1:{5:I,7:null,9:null,10:I,1:m,6:null,8:null,0:null,3:function(e,n,t,r){I(e,n,t,r),y(t,r,t,r)},11:function(e,n,t,r){I(e,n,t,r),w(t,r,t,r)},2:I,4:function(e,n,t,r){I(e,n,t,r),P(t,r,t,r)}},6:{5:null,7:A,9:null,10:A,1:null,6:m,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:O,10:O,1:null,6:null,8:m,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:m,3:null,11:null,2:null,4:null},10:{5:m,7:m,9:m,10:m,1:j,6:R,8:x,0:null,3:y,11:w,2:m,4:P},11:{5:M,7:null,9:null,10:M,1:function(e,n,t,r){M(e,n,t,r),j(t,r,t,r)},6:null,8:null,0:null,3:function(e,n,t,r){M(e,n,t,r),y(t,r,t,r)},11:m,2:M,4:function(e,n,t,r){M(e,n,t,r),P(t,r,t,r)}}};function p(e,n){return h(e,n)?.projector}function h(e,n){if(null==e||null==n)return null;if(z.source.spatialReference===e&&z.dest.spatialReference===n)return z;const t=d(e,z.source),r=d(n,z.dest);return 0===t&&0===r?(0,c.aI)(e,n)?z.projector=m:z.projector=null:z.projector=f[t][r],z}function d(e,n){return e?n.spatialReference===e?n.spatialReferenceId:(n.spatialReference=e,"metersPerUnit"in n&&(n.metersPerUnit=(0,i.GA)(e,1)),(0,l.jA)(e)?n.spatialReferenceId=1:(0,c.oT)(e)?n.spatialReferenceId=2:(0,c.K8)(e)?n.spatialReferenceId=3:(0,c.r1)(e)?n.spatialReferenceId=11:e.wkt===l.Ro.wkt?n.spatialReferenceId=4:4490===e.wkid?n.spatialReferenceId=5:e.wkt===l.FY.wkt?n.spatialReferenceId=6:e.wkt===l.LJ.wkt?n.spatialReferenceId=8:(0,c.q8)(e)?n.spatialReferenceId=7:(0,c.KQ)(e)?n.spatialReferenceId=9:n.spatialReferenceId=0):0}function m(e,n,t,r){e!==t&&(t[r++]=e[n++],t[r++]=e[n++],t[r]=e[n])}function g(e,n,t,r){t[r]=k*(e[n]/S),t[r+1]=k*(q-2*Math.atan(Math.exp(-e[n+1]/S))),t[r+2]=e[n+2]}function y(e,n,t,i){!function(e,n,t,i,l){const s=.4999999*Math.PI,o=(0,r.qE)(b*e[n+1],-s,s),a=Math.sin(o);t[i++]=b*e[n]*l.radius,t[i++]=l.halfSemiMajorAxis*Math.log((1+a)/(1-a)),t[i]=e[n+2]}(e,n,t,i,s.$O)}function w(e,n,t,r){t[r]=e[n]*E,t[r+1]=e[n+1]*E,t[r+2]=e[n+2]}function M(e,n,t,r){t[r]=e[n]*N,t[r+1]=e[n+1]*N,t[r+2]=e[n+2]}function v(e,n,t,r,i){const l=i+e[n+2],s=b*e[n+1],o=b*e[n],a=Math.cos(s)*l;t[r]=Math.cos(o)*a,t[r+1]=Math.sin(o)*a,t[r+2]=Math.sin(s)*l}function x(e,n,t,r){v(e,n,t,r,s.Sw.radius)}function R(e,n,t,r){v(e,n,t,r,s.sH.radius)}function j(e,n,t,r){v(e,n,t,r,s.$O.radius)}function C(e,n,t,i,l){const s=e[n],o=e[n+1],a=e[n+2],u=Math.sqrt(s*s+o*o+a*a),c=(0,r.YN)(a/(0===u?1:u)),f=Math.atan2(o,s);t[i++]=k*f,t[i++]=k*c,t[i]=u-l}function O(e,n,t,r){C(e,n,t,r,s.Sw.radius)}function A(e,n,t,r){C(e,n,t,r,s.sH.radius)}function I(e,n,t,r){C(e,n,t,r,s.$O.radius)}function P(e,n,t,r){!function(e,n,t,r,i){const l=b*e[n],s=b*e[n+1],o=e[n+2],a=Math.sin(s),u=Math.cos(s),c=i.radius/Math.sqrt(1-i.eccentricitySquared*a*a);t[r++]=(c+o)*u*Math.cos(l),t[r++]=(c+o)*u*Math.sin(l),t[r++]=(c*(1-i.eccentricitySquared)+o)*a}(e,n,t,r,s.$O)}function Z(e,n,t,r){const i=u,l=e[n],o=e[n+1],a=e[n+2];let c,f,p,h,d,m,g,y,w,M,v,x,R,j,C,O,A,I,P,Z,z;c=Math.abs(a),f=l*l+o*o,p=Math.sqrt(f),h=f+a*a,d=Math.sqrt(h),Z=Math.atan2(o,l),m=a*a/h,g=f/h,j=i.a2/d,C=i.a3-i.a4/d,g>.3?(y=c/d*(1+g*(i.a1+j+m*C)/d),P=Math.asin(y),M=y*y,w=Math.sqrt(1-M)):(w=p/d*(1-m*(i.a5-j-g*C)/d),P=Math.acos(w),M=1-w*w,y=Math.sqrt(M)),v=1-s.$O.eccentricitySquared*M,x=s.$O.radius/Math.sqrt(v),R=i.a6*x,j=p-x*w,C=c-R*y,A=w*j+y*C,O=w*C-y*j,I=O/(R/v+A),P+=I,z=A+O*I/2,a<0&&(P=-P),t[r++]=k*Z,t[r++]=k*P,t[r]=z}const z={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:m},b=(0,r.kU)(1),k=(0,r.KJ)(1),q=.5*Math.PI,S=s.$O.radius,E=S*Math.PI/180,N=180/(S*Math.PI)},62815:(e,n,t)=>{t.d(n,{N:()=>s});var r=t(83047),i=t(73941),l=t(21325);function s(e,n,t){if(null==n||null==t||t.vcsWkid||(0,l.aI)(n,t)||(0,i.xP)(n)||(0,i.xP)(t))return null;const s=(0,r.G9)(n)/(0,r.G9)(t);if(1===s)return null;switch(e){case"point":case"esriGeometryPoint":return e=>function(e,n){null!=e?.z&&(e.z*=n)}(e,s);case"polyline":case"esriGeometryPolyline":return e=>function(e,n){if(e)for(const t of e.paths)for(const e of t)e.length>2&&(e[2]*=n)}(e,s);case"polygon":case"esriGeometryPolygon":return e=>function(e,n){if(e)for(const t of e.rings)for(const e of t)e.length>2&&(e[2]*=n)}(e,s);case"multipoint":case"esriGeometryMultipoint":return e=>function(e,n){if(e)for(const t of e.points)t.length>2&&(t[2]*=n)}(e,s);case"extent":case"esriGeometryEnvelope":return e=>function(e,n){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=n,e.zmax*=n)}(e,s);default:return null}}},69052:(e,n,t)=>{t.d(n,{hr:()=>i,ie:()=>a,uC:()=>o});var r=t(34727);class i{constructor(e,n){this.min=e,this.max=n,this.range=n-e}normalize(e,n=0,t=!1){return l(this.range,this.min,this.max,e,n,t)}clamp(e,n=0){return(0,r.qE)(e-n,this.min,this.max)+n}monotonic(e,n,t){return e<n?n:n+s(this.range,e-n,t)}minimalMonotonic(e,n,t){return l(this.range,e,e+this.range,n,t)}center(e,n,t){return n=this.monotonic(e,n,t),this.normalize((e+n)/2,t)}diff(e,n,t){return this.monotonic(e,n,t)-e}shortestSignedDiff(e,n){e=this.normalize(e);const t=(n=this.normalize(n))-e,r=n<e?this.minimalMonotonic(e,n)-e:n-this.minimalMonotonic(n,e);return Math.abs(t)<Math.abs(r)?t:r}contains(e,n,t){return n=this.minimalMonotonic(e,n),(t=this.minimalMonotonic(e,t))>e&&t<n}}function l(e,n,t,r,i=0,l=!1){return(r-=i)<n?r+=s(e,n-r):r>t&&(r-=s(e,r-t)),l&&r===t&&(r=n),r+i}function s(e,n,t=0){return Math.ceil((n-t)/e)*e+t}const o=new i(0,2*Math.PI),a=(new i(-Math.PI,Math.PI),new i(0,360))},91218:(e,n,t)=>{t.r(n),t.d(n,{canProjectWithoutEngine:()=>H,initializeProjection:()=>U,isEqualBaseGCS:()=>B,isLoaded:()=>z,isLoadedOrLoad:()=>b,isLoadedOrLoadFor:()=>k,load:()=>S,project:()=>E,projectExtent:()=>te,projectMany:()=>N,projectMultipoint:()=>J,projectOrLoad:()=>T,projectOrLoadMany:()=>V,projectPoint:()=>D,projectPolygon:()=>ee,projectPolyline:()=>Q,projectWithZConversion:()=>_,projectWithoutEngine:()=>W,requiresLoad:()=>q,test:()=>$,tryProjectWithZConversion:()=>F,unload:()=>G});var r=t(49186),i=t(74887),l=t(62788),s=t(95488),o=t(51850),a=t(21276),u=t(73941),c=t(5443),f=t(91075),p=t(48526),h=t(86738),d=t(39829),m=t(82799),g=t(16930),y=t(159),w=t(9762),M=t(37539);function v(e,n,t,r,i,l){return x[0]=e,x[1]=n,x[2]=t,(0,w.projectBuffer)(x,r,0,i,l,0)}const x=(0,o.vt)();var R=t(21325),j=t(62815);let C=null,O=null,A=null,I=null,P={};const Z=new s.I;function z(){return!!(O?.isLoaded()&&A?.isLoaded()&&I?.isLoaded())}function b(){return!!z()||((0,l.gc)(Z),S(),!1)}function k(e,n){return!e||!n||H(e,n)||b()}function q(e,n){return!H(e,n)&&!z()}async function S(e){null==C&&(C=Promise.all([t.e(3276).then(t.bind(t,83276)).then(e=>(O=e,O.load())),t.e(8377).then(t.bind(t,8377)).then(e=>(A=e,A.load())),t.e(2158).then(t.bind(t,12158)).then(e=>(I=e,I.load()))])),await C,(0,i.Te)(e),Z.notify()}function E(e,n,t){return Array.isArray(e)?0===e.length?[]:((0,a.H)(e),N(e,e[0].spatialReference,n,t)):((0,a.f)(e),N([e],e.spatialReference,n,t)[0])}function N(e,n,t,r){if(null==n||null==t)return e;if(H(n,t,r))return e.map(e=>W(e,n,t));if(null==r?.geographicTransformation&&(0,u.jA)(n))return e.map(e=>W(e,n,g.A.WGS84)).map(e=>F(e,t));if(null==r?.geographicTransformation&&(0,u.jA)(t))return e.map(e=>F(e,g.A.WGS84)).map(e=>W(e,g.A.WGS84,t));if(!z())throw new L;if(!r?.geographicTransformation)if(r?.extendedParams)r={...r,geographicTransformation:I.getTransformation(n,t,r.areaOfInterestExtent)||new y.A};else if(!r?.areaOfInterestExtent){const e=function(e,n){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",n.wkid?.toString()??"-1",n.wkt?.toString()??"",n.wkt2?.toString()??""].join()}(n,t);let i=P[e];i||(i=I.getTransformation(n,t)||new y.A,P[e]=i),r={geographicTransformation:i}}return e[0].spatialReference||(e[0].spatialReference=n),e[0]instanceof f.A?O.executeMany(e,t,r):A.executeMany(e,t,r)}function T(e,n){const t=V([e],n);return null!=t.pending?{pending:t.pending,geometry:null}:null!=t.geometries?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function V(e,n){if(!z())for(const t of e)if(null!=t&&!(0,R.aI)(t.spatialReference,n)&&(0,R.fn)(t.spatialReference)&&(0,R.fn)(n)&&!H(t.spatialReference,n))return(0,l.gc)(Z),{pending:S(),geometries:null};return{pending:null,geometries:e.map(e=>null==e?null:(0,R.aI)(e.spatialReference,n)?e:(0,R.fn)(e.spatialReference)&&(0,R.fn)(n)?F(e,n):null)}}class L extends r.A{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function G(){C=null,O=null,A=null,I=null,P={}}const $={get loadPromise(){return C}};function F(e,n){try{const t=E(e,n);if(null==t)return null;"xmin"in e&&"xmin"in t&&(t.zmin=e.zmin,t.zmax=e.zmax);const r=(0,j.N)(t.type,e.spatialReference,n);return null!=r&&r(t),t}catch(e){if(!(e instanceof L))throw e;return null}}async function _(e,n,t){const r=e.spatialReference;return null!=r&&null!=n&&await U(r,n,null,t),F(e,n)}function H(e,n,t){return!(t?.areaOfInterestExtent||t?.extendedParams||t?.geographicTransformation)&&(!!(0,R.aI)(e,n)||(0,R.fn)(e)&&(0,R.fn)(n)&&!!(0,M.jd)(e,n))}function B(e,n){if((0,R.aI)(e,n))return!0;if(!(0,R.fn)(e)||!(0,R.fn)(n))return!1;const t=(0,R.oT)(e)||(0,R.K8)(e)||(0,R.x1)(e),r=(0,R.oT)(n)||(0,R.K8)(n)||(0,R.x1)(n);return t&&r}async function U(e,n,t,r){if(z())return(0,i.NO)(r);if(Array.isArray(e)){for(const{source:n,dest:t,options:i}of e)if(n&&t&&!H(n,t,i))return S(r)}else if(e&&n&&!H(e,n,t))return S(r);return(0,i.NO)(r)}function W(e,n,t){return e?"x"in e?K(e,n,new h.A,t,0):"xmin"in e?re(e,n,new c.A,t,0):"rings"in e?ne(e,n,new d.A,t,0):"paths"in e?X(e,n,new m.A,t,0):"points"in e?Y(e,n,new p.A,t,0):null:null}function D(e,n,t=n.spatialReference,r=0){return null!=t&&null!=e.spatialReference&&null!=K(e,e.spatialReference,n,t,r)}function K(e,n,t,r,i){le[0]=e.x,le[1]=e.y;const l=e.z;return le[2]=void 0!==l?l:i,(0,w.projectBuffer)(le,n,0,le,r,0)?(t.x=le[0],t.y=le[1],t.spatialReference=r,void 0!==l||(0,u.xP)(r)?(t.z=le[2],t.hasZ=!0):(t.z=void 0,t.hasZ=!1),void 0===e.m?(t.m=void 0,t.hasM=!1):(t.m=e.m,t.hasM=!0),t):null}function J(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=Y(e,e.spatialReference,n,t,r)}function Y(e,n,t,r,i){const{points:l,hasZ:s,hasM:o}=e,a=[],c=l.length,f=[];for(const e of l)f.push(e[0],e[1],s?e[2]:i);if(!(0,w.projectBuffer)(f,n,0,f,r,0,c))return null;const p=s||(0,u.xP)(r);for(let e=0;e<c;++e){const n=3*e,t=f[n],r=f[n+1];p&&o?a.push([t,r,f[n+2],l[e][3]]):p?a.push([t,r,f[n+2]]):o?a.push([t,r,l[e][2]]):a.push([t,r])}return t.points=a,t.spatialReference=r,t.hasZ=s,t.hasM=o,t}function Q(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=X(e,e.spatialReference,n,t,r)}function X(e,n,t,r,i){const{paths:l,hasZ:s,hasM:o}=e,a=[];if(!ie(l,s??!1,o??!1,n,a,r,i))return null;const c=s||(0,u.xP)(r);return t.paths=a,t.spatialReference=r,t.hasZ=c,t.hasM=o,t}function ee(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=ne(e,e.spatialReference,n,t,r)}function ne(e,n,t,r,i){const{rings:l,hasZ:s,hasM:o}=e,a=[];if(!ie(l,s??!1,o??!1,n,a,r,i))return null;const c=s||(0,u.xP)(r);return t.rings=a,t.spatialReference=r,t.hasZ=c,t.hasM=o,t}function te(e,n,t=n.spatialReference,r=0){return null!=e.spatialReference&&null!=t&&null!=re(e,e.spatialReference,n,t,r)}function re(e,n,t,r,i){const{xmin:l,ymin:s,xmax:o,ymax:a,hasZ:c,hasM:f}=e;if(!v(l,s,c?e.zmin:i,n,le,r))return null;const p=c||(0,u.xP)(r);return t.xmin=le[0],t.ymin=le[1],p&&(t.zmin=le[2]),v(o,a,c?e.zmax:i,n,le,r)?(t.xmax=le[0],t.ymax=le[1],p&&(t.zmax=le[2]),f&&(t.mmin=e.mmin,t.mmax=e.mmax),t.spatialReference=r,t):null}function ie(e,n,t,r,i,l,s=0){const o=new Array;for(const t of e)for(const e of t)o.push(e[0],e[1],n?e[2]:s);if(!(0,w.projectBuffer)(o,r,0,o,l,0))return!1;let a=0;i.length=0;const c=n||(0,u.xP)(l);for(const n of e){const e=new Array;for(const r of n)c&&t?e.push([o[a++],o[a++],o[a++],r[3]]):c?e.push([o[a++],o[a++],o[a++]]):t?(e.push([o[a++],o[a++],r[2]]),a++):(e.push([o[a++],o[a++]]),a++);i.push(e)}return!0}const le=(0,o.vt)()},96650:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var r=t(31635),i=t(29133),l=t(69540),s=t(69052),o=t(25482),a=t(97768),u=t(10107),c=t(79901),f=(t(44208),t(87811),t(64108)),p=t(56507),h=t(86738);let d=class extends((0,o.T)(l.Pw)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}get valid(){return null!=this.observer&&this.farDistance>0}equals(e){return(0,a.CM)(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&(0,i.xH)(this.feature,e.feature)}};(0,r.Cg)([(0,u.MZ)({type:h.A,json:{write:{isRequired:!0}}})],d.prototype,"observer",void 0),(0,r.Cg)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],d.prototype,"farDistance",void 0),(0,r.Cg)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,c.w)(e=>s.ie.normalize((0,p.GB)(e),void 0,!0))],d.prototype,"heading",void 0),(0,r.Cg)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],d.prototype,"tilt",void 0),(0,r.Cg)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],d.prototype,"horizontalFieldOfView",void 0),(0,r.Cg)([(0,u.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],d.prototype,"verticalFieldOfView",void 0),(0,r.Cg)([(0,u.MZ)(i.N1)],d.prototype,"feature",void 0),(0,r.Cg)([(0,u.MZ)({readOnly:!0,json:{read:!1}})],d.prototype,"valid",null),d=(0,r.Cg)([(0,f.$)("esri.analysis.Viewshed")],d);var m=t(79608),g=t(4576),y=t(7762),w=t(62885),M=t(34727),v=t(36708),x=(t(53966),t(5443)),R=t(91218);const j=y.A.ofType(d);let C=class extends m.A{constructor(e){super(e),this.type="viewshed",this._extent=null}initialize(){this.addHandles((0,v.wB)(()=>this._computeExtent(),e=>{null==e.pending&&(this._extent=e.extent)},v.pc))}get viewsheds(){return this._get("viewsheds")||new j}set viewsheds(e){this._set("viewsheds",(0,w.V)(e,this.viewsheds,j))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get valid(){return this.viewsheds.every(e=>e.valid)}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const n=this.viewsheds.filter(e=>null!=e.observer),t=n.map(e=>e.observer).toArray(),r=(0,R.projectOrLoadMany)(t,e);return null!=r.pending?{pending:r.pending,extent:null}:{pending:null,extent:r.geometries.map((e,t)=>{const r=n.at(t);return null!=e&&null!=r?this._computeViewshedExtent(this.viewsheds.at(t),e):null}).filter(e=>null!=e).reduce((e,n)=>function(e,n){return null==e?n:null==n?e:e.union(n)}(e,n),null)}}_computeViewshedExtent(e,n){const{farDistance:t,heading:r,tilt:i,horizontalFieldOfView:l,verticalFieldOfView:o}=e,{spatialReference:a}=n,u=l/2,c=o/2,f=t/a.metersPerUnit,p=[s.ie.normalize(r-u),r,s.ie.normalize(r+u)],h=x.A.fromPoint(n),d=e=>{const n=p.map(n=>s.ie.normalize(n-e));if(n[0]>n[2]||360===l)return f;const t=n.map(e=>Math.abs(e>180?360-e:e)).reduce((e,n)=>e>n?n:e);return t>90?0:f*Math.cos((0,M.kU)(t))};h.xmax+=d(90),h.xmin-=d(-90),h.ymax+=d(0),h.ymin-=d(180);const m=n.z;if(null!=m){let e=m,n=m;const r=i-90,l=(0,M.qE)(r+c,-90,90),s=(0,M.qE)(r-c,-90,90),o=a?.isGeographic?t:f;e+=o*A(l),n+=o*A(s);const p=O(c)*o,d=A(r)*p*(1-O(u));i<90&&(e-=d),i>90&&(n-=d),h.zmax=Math.max(e,m),h.zmin=Math.min(n,m)}return h}equals(e){return this===e||super.equals(e)&&(0,g.aI)(this.viewsheds.toArray(),e.viewsheds.toArray(),(e,n)=>e.equals(n))}clear(){this.viewsheds.removeAll()}};function O(e){return Math.cos((0,M.kU)(e))}function A(e){return Math.sin((0,M.kU)(e))}(0,r.Cg)([(0,u.MZ)({type:["viewshed"]})],C.prototype,"type",void 0),(0,r.Cg)([(0,u.MZ)({cast:w.H,type:j,nonNullable:!0})],C.prototype,"viewsheds",null),(0,r.Cg)([(0,u.MZ)({readOnly:!0})],C.prototype,"spatialReference",null),(0,r.Cg)([(0,u.MZ)()],C.prototype,"_extent",void 0),(0,r.Cg)([(0,u.MZ)()],C.prototype,"extent",null),(0,r.Cg)([(0,u.MZ)({readOnly:!0})],C.prototype,"valid",null),C=(0,r.Cg)([(0,f.$)("esri.analysis.ViewshedAnalysis")],C);var I=t(92071),P=t(43937),Z=t(4146),z=t(16131);let b=class extends((0,z.q)((0,I.P)(Z.A))){constructor(e){super(e),this.type="viewshed",this.operationalLayerType="ViewshedLayer",this.source=new C,this.opacity=1}initialize(){this.addHandles((0,v.wB)(()=>this.source,(e,n)=>{null!=n&&n.parent===this&&(n.parent=null),null!=e&&(e.parent=this)},v.pc))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new C)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,n,t,r){n.viewsheds=e.filter(e=>e.valid).toJSON(r)}};(0,r.Cg)([(0,u.MZ)({json:{read:!1},readOnly:!0})],b.prototype,"type",void 0),(0,r.Cg)([(0,u.MZ)({type:["ViewshedLayer"]})],b.prototype,"operationalLayerType",void 0),(0,r.Cg)([(0,u.MZ)({type:C,nonNullable:!0})],b.prototype,"source",void 0),(0,r.Cg)([(0,u.MZ)({readOnly:!0})],b.prototype,"spatialReference",null),(0,r.Cg)([(0,u.MZ)({readOnly:!0})],b.prototype,"fullExtent",null),(0,r.Cg)([(0,u.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],b.prototype,"opacity",void 0),(0,r.Cg)([(0,u.MZ)({type:["show","hide"]})],b.prototype,"listMode",void 0),(0,r.Cg)([(0,u.MZ)({type:y.A.ofType(d),json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{ignoreOrigin:!0}}}}})],b.prototype,"viewsheds",null),(0,r.Cg)([(0,P.K)("web-scene","viewsheds")],b.prototype,"writeViewsheds",null),b=(0,r.Cg)([(0,f.$)("esri.layers.ViewshedLayer")],b);const k=b},99157:(e,n,t)=>{t.d(n,{A:()=>a});var r,i=t(31635),l=t(65008),s=t(10107),o=(t(44208),t(53966),t(87811),t(64108));let a=r=class extends l.A{constructor(e){super(e),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new r({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};(0,i.Cg)([(0,s.MZ)()],a.prototype,"isInverse",void 0),(0,i.Cg)([(0,s.MZ)()],a.prototype,"wkt",void 0),(0,i.Cg)([(0,s.MZ)()],a.prototype,"wkid",void 0),a=r=(0,i.Cg)([(0,o.$)("esri.geometry.operators.support.GeographicTransformationStep")],a)}}]);