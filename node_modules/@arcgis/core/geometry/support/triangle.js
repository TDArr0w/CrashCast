/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{ObjectStack as t}from"../../core/ObjectStack.js";import{e,b as n,i as r,h as o,g as s,d as c,f as p}from"../../chunks/vec32.js";import{create as i,clone as a}from"../../core/libs/gl-matrix-2/factories/vec3f64.js";import{create as f,distance2 as u,fromValues as g}from"./lineSegment.js";import{sv3d as m}from"./vectorStacks.js";function j(t){return t?{p0:a(t.p0),p1:a(t.p1),p2:a(t.p2)}:{p0:i(),p1:i(),p2:i()}}function b(t,e,n){const r=x.get();return r.p0=t,r.p1=e,r.p2=n,r}function h(t,e=j()){return l(t.p0,t.p1,t.p2,e)}function l(t,e,n,r=j()){return c(r.p0,t),c(r.p1,e),c(r.p2,n),r}function d(t,n){const o=t.p0,s=t.p1,c=t.p2,i=e(m.get(),s,o),a=e(m.get(),c,s),f=e(m.get(),o,c),j=e(m.get(),n,o),b=e(m.get(),n,s),h=e(m.get(),n,c),l=r(i,i,f),d=p(r(m.get(),i,l),j),k=p(r(m.get(),a,l),b),v=p(r(m.get(),f,l),h);if(d>0&&k>0&&v>0){const t=p(l,j);return t*t/p(l,l)}const S=u(g(o,i,w.get()),n),x=u(g(s,a,w.get()),n),M=u(g(c,f,w.get()),n);return Math.min(S,x,M)}function k(t,e,n){const r=1e-5,{direction:c,origin:p}=e,{p0:i,p1:a,p2:f}=t,u=a[0]-i[0],g=a[1]-i[1],m=a[2]-i[2],j=f[0]-i[0],b=f[1]-i[1],h=f[2]-i[2],l=c[1]*h-b*c[2],d=c[2]*j-h*c[0],k=c[0]*b-j*c[1],v=u*l+g*d+m*k;if(v>-r&&v<r)return!1;const S=1/v,w=p[0]-i[0],x=p[1]-i[1],M=p[2]-i[2],O=S*(w*l+x*d+M*k);if(O<0||O>1)return!1;const V=x*m-g*M,q=M*u-m*w,y=w*g-u*x,z=S*(c[0]*V+c[1]*q+c[2]*y);if(z<0||O+z>1)return!1;if(n){o(n,c,S*(j*V+b*q+h*y)),s(n,p,n)}return!0}function v(t,e,n){const r=e[0]-t[0],o=e[1]-t[1],s=n[0]-t[0],c=n[1]-t[1];return.5*Math.abs(r*c-o*s)}function S(t,o,s){return e(M,o,t),e(O,s,t),.5*n(r(M,M,O))}const w=new t(f),x=new t(()=>j()),M=i(),O=i();export{v as areaPoints2d,S as areaPoints3d,h as copy,j as create,d as distance2,l as fromValues,k as intersectRay,b as wrap};
