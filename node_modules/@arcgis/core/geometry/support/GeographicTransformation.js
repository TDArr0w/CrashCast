/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import{deprecatedModule as t}from"../../core/deprecate.js";import s from"../../core/Logger.js";import e from"./GeographicTransformationStep.js";t(s.getLogger("esri.geometry.support.GeographicTransformation"),"esri.geometry.support.GeographicTransformation",{replacement:"esri.geometry.operators.support.GeographicTransformation",version:"4.32",warnOnce:!0});class r{static cacheKey(t,s){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",s.wkid?.toString()??"-1",s.wkt?.toString()??"",s.wkt2?.toString()??""].join()}static fromGE(t){const s=new r;let i="";for(const r of t.steps){const t=e.fromGE(r);s.steps.push(t),i+=t.uid.toString()+","}return s._cachedProjection={},s._gtlistentry=null,s._chain=i,s}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const s of t.steps)s instanceof e?this.steps.push(s):this.steps.push(new e({wkid:s.wkid,wkt:s.wkt,isInverse:s.isInverse}))}getInverse(){const t=new r;t.steps=[];for(let s=this.steps.length-1;s>=0;s--){const e=this.steps[s];t.steps.push(e.getInverse())}return t}getGTListEntry(){let t="";for(const s of this.steps)t+=s.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,s,e){this._cachedProjection[r.cacheKey(t,s)]=e}getCachedGeTransformation(t,s){let e="";for(const r of this.steps)e+=r.uid.toString()+",";e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e);const i=this._cachedProjection[r.cacheKey(t,s)];return void 0===i?null:i}}export{r as default};
