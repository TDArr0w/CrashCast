/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.34/esri/copyright.txt for details.
*/
import r from"../../core/Collection.js";import e from"../../core/Error.js";import o from"../../core/Logger.js";import{isBuildingGraphicOrigin as t}from"../../graphic/isBuildingGraphicOrigin.js";import{isHostedAgolService as n}from"../../layers/support/arcgisLayerUrl.js";import{registerLoader as i}from"../../layers/support/schemaValidatorLoader.js";import{schemaValidationErrorName as a}from"../../support/webSceneUtils.js";import{renderSVG as s}from"../../symbols/support/svgUtils.js";import{viewingModeFromString as p}from"../../views/ViewingMode.js";import{ZoomControllerGlobal as u}from"../../views/3d/state/controllers/ZoomControllerGlobal.js";import{ZoomControllerLocal as c}from"../../views/3d/state/controllers/ZoomControllerLocal.js";import{TilingScheme as l}from"../../views/3d/terrain/TilingScheme.js";import{isSpatialReferenceSupported as f}from"../../views/support/spatialReferenceSupport.js";import{registerLoader as m}from"../../webscene/support/schemaValidatorLoader.js";function g(e,{defaultSpatialReference:o,isSpatialReferenceSupported:t,priorityLayers:n,required:i}){const a={...e.defaultsFromMapSettings};o&&(a.defaultSpatialReference=o),t&&(a.getSpatialReferenceSupport=(r,o)=>t(r,o)?e.getSpatialReferenceSupport(r,o):null),n&&(a.priorityCollection={layers:new r(n)}),i&&(a.required=i),e.defaultsFromMapSettings=a}function d(r){return r.back()}function h(r){return r.hasPendingEdits}function y(r,e){return o.getLogger("sceneViewer.appState.saveState").warn(r,e)}function S(r){return n(r)}function w(r,e,o,t){return s(r,e,o,t)}function j(r){return!r.canNotSaveAs()}function L(r,e){return f(r,p(e))}function F(r,e){return r.getCompatibleForVTL(e)}function b(r){return new l(r)}function v(r){return null==l.checkUnsupported(r)}function G(){i(()=>import("../../layers/support/schemaValidator.js")),m(()=>import("../../webscene/support/schemaValidator.js"))}function C(r){return r&&r.name===a}function P(r){const e=r.state.cameraController;return e instanceof u||e instanceof c?e.dragBeginPoint:null}function V(r){r.openedLayers.pop()}function R(r,o){return r&&"fetchPopupFeaturesFromGraphics"in r&&"function"==typeof r.fetchPopupFeaturesFromGraphics?r.fetchPopupFeaturesFromGraphics(o):Promise.reject(new e("layerview:fetchPopupFeaturesFromGraphics","The input layerview does not support fetchPopupFeaturesFromGraphics"))}function B(r){if(t(r?.origin))return r.origin.sublayer;if(!r?.sourceLayer)return null;if("building-component"===r.sourceLayer.type)return r.sourceLayer;throw new e("getSourceLayerFromBuildingComponentSublayerGraphic","The input graphic source layer is not of type BuildingComponentSublayer")}function T(r,e){r&&(r.origin=e.graphicOrigin,r.sourceLayer=e)}export{j as canSaveAs,V as closeCatalogLayer,b as createTilingScheme,h as editorHasPendingEdits,d as editorNavigateBack,R as fetchPopupFeaturesFromGraphics,F as getCompatibleTileInfoForVTL,B as getSourceLayerFromBuildingComponentSublayerGraphic,G as initializeSchemaValidators,S as isHostedAgolServiceUrl,C as isSchemaValidationError,L as isSpatialReferenceSupported,v as isSupportedTileInfo,w as renderSVG,y as saveStateWarning,g as setDefaultsFromMapSettings,T as setSourceLayerOfBuildingComponentSublayerGraphic,P as zoomDragBeginPoint};
