{"version":3,"file":"NumericStepper.js","sourceRoot":"","sources":["../../../../../src/.internal/core/render/NumericStepper.ts"],"names":[],"mappings":"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","sourcesContent":["import { Container, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\r\nimport { EditableLabel } from \"../../core/render/EditableLabel\";\r\nimport { Rectangle } from \"../../core/render/Rectangle\";\r\nimport { Triangle } from \"../../core/render/Triangle\";\r\nimport { color } from \"../../core/util/Color\";\r\n\r\nexport interface INumericStepperSettings extends IContainerSettings {\r\n\tvalue?: number;\r\n}\r\n\r\nexport interface INumericStepperPrivate extends IContainerPrivate {\r\n}\r\n\r\n/**\r\n * Draws an interactive NumericStepper.\r\n *\r\n * @important\r\n * @since 5.14.0\r\n */\r\nexport class NumericStepper extends Container {\r\n\r\n\tpublic label: EditableLabel = this.children.push(EditableLabel.new(this._root, {}));\r\n\tpublic buttonsContainer: Container = this.children.push(Container.new(this._root, { themeTags: [\"buttons\"] }));\r\n\tpublic upButton: Triangle = this.buttonsContainer.children.push(Triangle.new(this._root, { themeTags: [\"upbutton\"] }));\r\n\tpublic downButton: Triangle = this.buttonsContainer.children.push(Triangle.new(this._root, { themeTags: [\"downbutton\"] }));\r\n\r\n\tdeclare public _settings: INumericStepperSettings;\r\n\tdeclare public _privateSettings: INumericStepperPrivate;\r\n\r\n\tpublic static className: string = \"NumericStepper\";\r\n\tpublic static classNames: Array<string> = Container.classNames.concat([NumericStepper.className]);\r\n\r\n\r\n\tprotected _afterNew() {\r\n\t\tthis.addTag(\"numericstepper\");\r\n\r\n\t\tthis.set(\"layout\", this._root.horizontalLayout);\r\n\r\n\t\tthis.label.adapters.add(\"text\", (text) => {\r\n\t\t\tif (text) {\r\n\t\t\t\ttext.replace(/\\D/g, '');\r\n\t\t\t}\r\n\t\t\tif (text === \"\") {\r\n\t\t\t\ttext = \"0\";\r\n\t\t\t}\r\n\r\n\t\t\treturn text;\r\n\t\t})\r\n\r\n\t\tthis.set(\"background\", Rectangle.new(this._root, {\r\n\t\t\tfillOpacity: 0,\r\n\t\t\tfill: color(0xffffff)\r\n\t\t}));\r\n\r\n\t\tthis.buttonsContainer.states.create(\"hidden\", {\r\n\t\t\topacity: 0,\r\n\t\t\tvisible: true\r\n\t\t});\r\n\r\n\t\tthis.events.on(\"pointerover\", () => {\r\n\t\t\tthis.buttonsContainer.set(\"active\", true);\r\n\t\t})\r\n\t\tthis.events.on(\"pointerout\", () => {\r\n\t\t\tthis.buttonsContainer.set(\"active\", false);\r\n\t\t});\r\n\r\n\t\tthis.label.on(\"text\", (text) => {\r\n\t\t\tif (text) {\r\n\t\t\t\tconst value = parseFloat(text);\r\n\t\t\t\tif (!isNaN(value)) {\r\n\t\t\t\t\tthis.set(\"value\", value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.upButton.events.on(\"click\", () => {\r\n\t\t\tthis.set(\"value\", this.get(\"value\", 0) + 1);\r\n\t\t});\r\n\r\n\t\tthis.downButton.events.on(\"click\", () => {\r\n\t\t\tthis.set(\"value\", Math.max(0, this.get(\"value\", 0) - 1));\r\n\t\t});\r\n\r\n\t\tsuper._afterNew();\r\n\t}\r\n\r\n\tpublic _updateChildren(): void {\r\n\t\tsuper._updateChildren();\r\n\r\n\t\tconst value = this.get(\"value\", 0);\r\n\t\tconst label = this.label;\r\n\r\n\t\tif(this.isDirty(\"value\")) {\r\n\t\t\tlabel.set(\"text\", value.toString());\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"disabled\")) {\r\n\t\t\tconst disabled = this.get(\"disabled\", false);\r\n\r\n\t\t\tthis.set(\"interactive\", !disabled);\r\n\t\t\tthis.upButton.set(\"interactive\", !disabled);\r\n\t\t\tthis.downButton.set(\"interactive\", !disabled);\r\n\r\n\t\t\tif (disabled) {\r\n\t\t\t\tthis.label.set(\"editOn\", \"none\")\r\n\t\t\t\tthis.buttonsContainer.hide(0);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.label.set(\"editOn\", \"click\");\r\n\t\t\t\tthis.buttonsContainer.show(0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"]}