{"version":3,"file":"ConfirmButton.js","sourceRoot":"","sources":["../../../../../src/.internal/core/render/ConfirmButton.ts"],"names":[],"mappings":"AAAA,OAAO,EAAkD,MAAM,EAAE,MAAM,UAAU,CAAC;AAElF,OAAO,KAAK,MAAM,MAAM,eAAe,CAAC;AAcxC;;;;;;GAMG;AACH,MAAM,OAAO,aAAc,SAAQ,MAAM;IAAzC;;QASC;;;;;WAAiC;IA6DlC,CAAC;IA3DU,SAAS;QAClB,KAAK,CAAC,SAAS,EAAE,CAAC;QAElB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAEvB,IAAI,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;YACtC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,SAAS,EAAE,CAAC,EAAiB,EAAE,EAAE;gBACvF,MAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;gBACxC,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,QAAQ,IAAI,QAAQ,EAAE;oBAC/C,IAAI,CAAC,OAAO,EAAE,CAAC;iBACf;YACF,CAAC,CAAC,CAAC,CAAC;SACJ;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,OAAO,EAAE,GAAG,EAAE;YACpE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACvB,IAAI,CAAC,OAAO,EAAE,CAAC;aACf;YACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC3B,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,GAAG,EAAE;YAC5B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;gBACxB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;aACzB;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;IAEJ,CAAC;IAES,OAAO;QAChB,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YACvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE;gBACjC,IAAI,EAAE,WAAW;gBACjB,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;SAC1B;IACF,CAAC;IAES,QAAQ;QACjB,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YACvB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE;gBACjC,IAAI,EAAE,WAAW;gBACjB,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YAC1B,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;gBACnB,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE;oBACpB,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;oBAC1B,MAAM,CAAC,IAAI,EAAE,CAAC;gBACf,CAAC,EAAE,EAAE,CAAC,CAAC;aACP;SACD;IACF,CAAC;IAEM,gBAAgB;QACtB,KAAK,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;;AAnED;;;;WAAkC,eAAe;GAAC;AAClD;;;;WAA0C,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;GAAC","sourcesContent":["import { IButtonSettings, IButtonPrivate, IButtonEvents, Button } from \"./Button\";\n\nimport * as $utils from \"../util/Utils\";\n\nexport interface IConfirmButtonSettings extends IButtonSettings {\n}\n\nexport interface IConfirmButtonPrivate extends IButtonPrivate {\n\tConfirmButton?: Button;\n}\n\nexport interface IConfirmButtonEvents extends IButtonEvents {\n\tconfirmed: {};\n\tcancelled: {};\n}\n\n/**\n * Draws an interactive button, which displays a confirmation when clicked.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/buttons/} for more info\n * @important\n * @since 5.14.0\n */\nexport class ConfirmButton extends Button {\n\n\tpublic static className: string = \"ConfirmButton\";\n\tpublic static classNames: Array<string> = Button.classNames.concat([ConfirmButton.className]);\n\n\tdeclare public _settings: IConfirmButtonSettings;\n\tdeclare public _privateSettings: IConfirmButtonPrivate;\n\tdeclare public _events: IConfirmButtonEvents;\n\n\tprotected _ignoreClick?: boolean;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis.addTag(\"confirm\");\n\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(document, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tconst eventKey = $utils.getEventKey(ev);\n\t\t\t\tif (this.get(\"active\") && eventKey == \"Escape\") {\n\t\t\t\t\tthis._cancel();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tthis._disposers.push($utils.addEventListener(document, \"click\", () => {\n\t\t\tif (!this._ignoreClick) {\n\t\t\t\tthis._cancel();\n\t\t\t}\n\t\t\tthis._ignoreClick = false;\n\t\t}));\n\n\t\tthis.events.on(\"click\", () => {\n\t\t\tif (!this.get(\"active\")) {\n\t\t\t\tthis._ignoreClick = true;\n\t\t\t}\n\t\t\tthis._confirm();\n\t\t});\n\n\t}\n\n\tprotected _cancel() {\n\t\tif (this.get(\"active\")) {\n\t\t\tthis.events.dispatch(\"cancelled\", {\n\t\t\t\ttype: \"cancelled\",\n\t\t\t\ttarget: this\n\t\t\t});\n\t\t\tthis.set(\"active\", false);\n\t\t}\n\t}\n\n\tprotected _confirm() {\n\t\tif (this.get(\"active\")) {\n\t\t\tthis.events.dispatch(\"confirmed\", {\n\t\t\t\ttype: \"confirmed\",\n\t\t\t\ttarget: this\n\t\t\t});\n\t\t\tthis.set(\"active\", false);\n\t\t\tif (this.isFocus()) {\n\t\t\t\tthis.setTimeout(() => {\n\t\t\t\t\tthis.set(\"active\", false);\n\t\t\t\t\t$utils.blur();\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\t}\n}\n"]}