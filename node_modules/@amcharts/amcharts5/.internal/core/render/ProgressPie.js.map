{"version":3,"file":"ProgressPie.js","sourceRoot":"","sources":["../../../../../src/.internal/core/render/ProgressPie.ts"],"names":[],"mappings":"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","sourcesContent":["import { Label } from \"../../core/render/Label\";\r\nimport { Container, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\r\nimport { Slice } from \"../../core/render/Slice\";\r\nimport { p100, percent, Percent } from \"../../core/util/Percent\";\r\nimport { Circle } from \"./Circle\";\r\n\r\nimport * as $utils from \"../../core/util/Utils\";\r\n\r\nexport interface IProgressPieSettings extends IContainerSettings {\r\n\tvalue?: number; // 0 - 1\r\n\tradius?: number | Percent;\r\n\tinnerRadius?: number | Percent;\r\n\tnumberFormat?: string;\r\n}\r\n\r\nexport interface IProgressPiePrivate extends IContainerPrivate {\r\n}\r\n\r\n/**\r\n * Draws an interactive progress pie.\r\n *\r\n * @important\r\n * @since 5.14.0\r\n */\r\nexport class ProgressPie extends Container {\r\n\r\n\tpublic circle: Circle = this.children.push(Circle.new(this._root, {\r\n\t\tthemeTags: [\"background\"]\r\n\t}));\r\n\r\n\tpublic label: Label = this.children.push(Label.new(this._root, {}));\r\n\r\n\tpublic slice: Slice = this.children.push(Slice.new(this._root, { isMeasured: false }));\r\n\r\n\tpublic backgroundSlice: Slice = this.children.push(Slice.new(this._root, { themeTags: [\"background\"] }));\r\n\r\n\tprotected _afterNew() {\r\n\t\tthis.addTag(\"progresspie\");\r\n\r\n\t\tsuper._afterNew();\r\n\t}\r\n\r\n\tdeclare public _settings: IProgressPieSettings;\r\n\tdeclare public _privateSettings: IProgressPiePrivate;\r\n\r\n\tpublic static className: string = \"ProgressPie\";\r\n\tpublic static classNames: Array<string> = Container.classNames.concat([ProgressPie.className]);\r\n\r\n\r\n\tpublic _updateChildren(): void {\r\n\t\tsuper._updateChildren();\r\n\r\n\t\tif (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"radius\") || this.isDirty(\"innerRadius\")) {\r\n\t\t\tconst width = this.innerWidth();\r\n\t\t\tconst height = this.innerHeight();\r\n\r\n\t\t\tconst radius = $utils.relativeToValue(this.get(\"radius\", p100), Math.min(width, height) / 2);\r\n\t\t\tconst innerRadius = $utils.relativeToValue(this.get(\"innerRadius\", percent(80)), radius);\r\n\r\n\t\t\tthis.slice.setAll({\r\n\t\t\t\tradius: radius,\r\n\t\t\t\tinnerRadius: innerRadius,\r\n\t\t\t});\r\n\r\n\t\t\tthis.backgroundSlice.setAll({\r\n\t\t\t\tradius: radius,\r\n\t\t\t\tinnerRadius: innerRadius,\r\n\t\t\t});\r\n\r\n\t\t\tthis.circle.set(\"radius\", radius);\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"value\")) {\r\n\t\t\tconst value = this.get(\"value\", 0);\r\n\t\t\tthis.slice.set(\"arc\", value * 360);\r\n\t\t\tthis.backgroundSlice.set(\"arc\", 360);\r\n\r\n\t\t\tthis.label.setAll({\r\n\t\t\t\ttext: this.getNumberFormatter().format(value * 100, this.get(\"numberFormat\", \"#'\"))\r\n\t\t\t});\r\n\r\n\t\t\tthis.root.events.once(\"frameended\", () => {\r\n\t\t\t\tthis.label.markDirtyKey(\"text\");\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n"]}