{"version":3,"file":"ColorPickerButton.js","sourceRoot":"","sources":["../../../../../src/.internal/plugins/colorPicker/ColorPickerButton.ts"],"names":[],"mappings":"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","sourcesContent":["import { ColorPickerDefaultTheme } from \"./ColorPickerDefaultTheme\";\nimport { Color, color } from \"../../core/util/Color\";\nimport { Container, IContainerEvents, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\n\nexport interface IColorPickerButtonSettings extends IContainerSettings {\n\tcolor?: Color;\n\tbackgroundColor?: Color;\n\tcolorOpacity?: number;\n\tdisableOpacity?: boolean;\n}\n\nexport interface IColorPickerButtonPrivate extends IContainerPrivate {\n\tcolor?: Color;\n}\n\nexport interface IColorPickerButtonEvents extends IContainerEvents { }\n\nexport class ColorPickerButton extends Container {\n\tpublic static className: string = \"ColorPickerButton\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([ColorPickerButton.className]);\n\n\tdeclare public _settings: IColorPickerButtonSettings;\n\tdeclare public _privateSettings: IColorPickerButtonPrivate;\n\tdeclare public _events: IColorPickerButtonEvents;\n\n\tprotected _currentRectangle: RoundedRectangle | undefined;\n\n\tpublic noColorGraphics: Graphics = this.children.push(Graphics.new(this._root, {\n\t\tthemeTags: [\"nocolor\"]\n\t}));\n\n\tpublic icon:Graphics = this.children.push(Graphics.new(this._root, {\n\t\tthemeTags: [\"icon\"]\n\t}));\n\n\tprotected _afterNew(): void {\n\t\tthis._defaultThemes.push(ColorPickerDefaultTheme.new(this._root));\n\t\tthis.addTag(\"colorpickerbutton\");\n\t\tsuper._afterNew();\n\n\t\tthis.set(\"background\", RoundedRectangle.new(this._root, {\n\t\t\tthemeTags: [\"background\"]\n\t\t}))\n\t}\n\n\tpublic _changed(): void {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"color\") || this.isPrivateDirty(\"color\") || this.isDirty(\"colorOpacity\") || this.isDirty(\"backgroundColor\")) {\n\t\t\tlet fill = this.get(\"color\", this.getPrivate(\"color\"));\n\t\t\tlet opacity = this.get(\"colorOpacity\", 1);\n\n\t\t\tif (!fill) {\n\t\t\t\tthis.noColorGraphics.show();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.noColorGraphics.hide();\n\t\t\t}\n\n\t\t\tconst backgroundColor = this.get(\"backgroundColor\", color(0xffffff));\n\n\t\t\tif (!fill) {\n\t\t\t\tfill = backgroundColor;\n\t\t\t}\n\n\t\t\tlet stroke = fill;\n\t\t\tlet d = -.1;\n\t\t\tif (backgroundColor.toHSL().l < 0.5) {\n\t\t\t\td = -d;\n\t\t\t}\n\n\t\t\tstroke = Color.lighten(fill, d);\n\n\t\t\tthis.noColorGraphics.set(\n\t\t\t\t\"stroke\", stroke\n\t\t\t);\n\n\t\t\tconst bg = this.get(\"background\");\n\n\t\t\tif (bg) {\n\t\t\t\tbg.setAll({\n\t\t\t\t\tfill: fill,\n\t\t\t\t\tstroke: stroke,\n\t\t\t\t\tfillOpacity: opacity,\n\t\t\t\t\tstrokeOpacity: Math.max(0.2, opacity)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.icon.set(\"stroke\", Color.alternative(stroke, this._root.interfaceColors.get(\"alternativeText\"), this._root.interfaceColors.get(\"text\")));\n\t\t}\n\t}\n}"]}